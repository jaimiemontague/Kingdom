{
  "schema_version": "2.0",
  "agent": { "id": "05", "name": "GameplaySystemsDesigner" },
  "notes": [
    "This file is owned by Agent 05 only.",
    "Structure nests rounds inside sprints to keep history organized."
  ],
  "sprints": {
    "wk1-broad-sweep-midweek-endweek": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
        "notes": ""
      },
      "rounds": {
        "wk1_r1": {
          "sprint_id": "wk1-broad-sweep-midweek-endweek",
          "sprint_meta": {
            "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
            "notes": ""
          },
          "round_id": "wk1_r1",
          "round_meta": {
            "prompt_set_id": "wk1_prompts_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "sent_at_local": "2025-12-20T20:19:37-07:00"
          },
          "prompt_text": "Give recommended default values/bands for bounty rewards, lair bounty cost, and early pressure so pacing feels alive but fair.",
          "response": {
            "received_at_local": "2025-12-20T20:19:37-07:00",
            "status": "complete",
            "raw": "### Status\\nCompleted WK1 Agent 5 (GameplaySystemsDesigner) slice: bounty reward bands + lair bounty sanity + early pressure tuning, with a small fix so attack_lair bounties actually result in lair clearing (not instant proximity payout).\\n\\n### Deliverables\\n- Gameplay tuning doc: docs/sprint/wk1_gameplay_tuning.md\\n- Bounty tiers: Low/Med/High rewards via B, Shift+B, Ctrl+B\\n- Lair tuning: stash + spawn pressure adjustments; LAIR_BOUNTY_COST aligned with expected stash payout\\n- Behavior fix (critical for pacing nudge): attack_lair bounties now pay out on lair_cleared, not on proximity\\n\\n### Notes\\n- Implemented completion-based lair bounty payout (engine pays on lair_cleared if a matching attack_lair bounty exists).\\n- Restricted proximity-claim to explore bounties only.\\n- Updated AI so reaching an attack_lair bounty transitions the hero into attacking the lair target (approach adjacent tile, then CombatSystem handles damage).\\n\\n### Handoff checklist\\n- Files changed: docs/sprint/wk1_gameplay_tuning.md, config.py, game/entities/lair.py, game/entities/building.py, ai/basic_ai.py, game/systems/bounty.py, game/engine.py\\n- How to test: python tools/qa_smoke.py --quick; manual: wait ~90s for starter lair bounty and verify heroes clear lair then get payout.",
            "summary_bullets": [
              "Added bounty reward tiers (Low/Med/High) and tiered placement controls (B / Shift+B / Ctrl+B).",
              "Aligned lair bounty cost vs stash payout; slightly increased lair stash and reduced runaway early pressure via slower lair spawn intervals.",
              "Fixed core behavior bug: attack_lair bounties now pay out on lair_cleared (completion), not proximity; heroes now transition to attacking the lair target."
            ],
            "proposed_changes": [
              "config.py: set STARTING_GOLD=1500, LAIR_BOUNTY_COST=90, LAIR_STASH_GROWTH_PER_SPAWN=8; add BOUNTY_REWARD_LOW/MED/HIGH constants.",
              "game/engine.py: use bounty tier modifiers for explore bounties; pay attack_lair bounties on lair_cleared event.",
              "game/systems/bounty.py: restrict proximity-claiming to explore bounties only.",
              "ai/basic_ai.py: when reaching attack_lair bounty, approach lair and begin attacking; avoid unreachable lair center goals.",
              "game/entities/lair.py: tune base stash + spawn intervals per lair type; preserve deterministic spawn behavior.",
              "game/entities/building.py: add x/y properties mapping to building center for safer targeting logic."
            ],
            "acceptance_criteria": [
              "Placing a bounty is a meaningful decision (cost tiers feel distinct; does not feel free/infinite).",
              "Starter attack_lair bounty results in heroes actually clearing the lair; bounty payout occurs on lair clear, not on arrival.",
              "Early game feels active but not instantly lethal; lair clear yields satisfying gold (stash + bounty) and reads as a chapter beat."
            ],
            "risks": [
              "STARTING_GOLD=1500 may be too tight for some EA onboarding expectations; adjust upward if early build options feel constrained.",
              "Typed bounties other than attack_lair (defend_building/hunt_enemy_type) still need completion hooks to match the completion-based model.",
              "Modifier-key bounty tiers may be non-discoverable without an additional HUD hint/tooltips (PM decision: only keep tiers for WK1 if a minimal hint ships)."
            ],
            "dependencies": [
              "Optional: Agent 8 to add UI hint text for bounty tiers (B / Shift+B / Ctrl+B).",
              "Optional: Agents 3/8 responders + attractiveness UI/logic workstream (separate from tuning)."
            ],
            "questions_back_to_pm": [
              "ACK (Agent 05): PM asks done. Files changed: docs/sprint/wk1_gameplay_tuning.md, config.py, game/engine.py, game/systems/bounty.py, ai/basic_ai.py, game/entities/lair.py, game/entities/building.py. qa_smoke --quick: PASS. Typed bounties cannot proximity-claim (BountySystem.check_claims is explore-only; attack_lair pays on lair_cleared). ETA: done. Blockers: none."
            ],
            "recommended_next_actions": [
              "Coordinate with Agent 8: either add a minimal HUD hint for bounty tier modifiers (B / Shift+B / Ctrl+B) or, if we decide not to ship the hint for Build A, revert to a single default bounty reward for Build A.",
              "Run a short manual feel test to decide whether STARTING_GOLD stays at 1500 or is raised to 2000–3000 (per PM decision).",
              "Follow-up (later): implement completion hooks for defend_building and hunt_enemy_type bounties so all typed bounties are completion-based and consistent."
            ],
            "agent_fields": {
              "pm_acknowledged": true,
              "tuning_recommendations": [
                "BOUNTY_REWARD_LOW=25, BOUNTY_REWARD_MED=60, BOUNTY_REWARD_HIGH=150",
                "LAIR_BOUNTY_COST=90; LAIR_STASH_GROWTH_PER_SPAWN=8; slight per-lair spawn interval slowdowns",
                "STARTING_GOLD=1500 (adjustable to 2000–3000 if onboarding feels too tight)"
              ],
              "metrics_or_targets": [
                "Within first 3 minutes, at least one clear lever/decision prompt is surfaced (bounty tip/starter lair bounty).",
                "Clearing an initial lair should typically yield a satisfying payout (bounty + stash) without spiking difficulty uncontrollably."
              ],
              "pm_followups": {
                "qa_smoke_quick": "PASS",
                "typed_bounty_claim_semantics": "Proximity-claiming restricted to explore only; attack_lair bounty paid on lair_cleared; other typed bounties are not proximity-claimed."
              }
            }
          }
        }
        ,
        "wk1_r3": {
          "sprint_id": "wk1-broad-sweep-midweek-endweek",
          "sprint_meta": {
            "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
            "notes": ""
          },
          "round_id": "wk1_r3",
          "round_meta": {
            "prompt_set_id": "wk1_wrapup_v1",
            "build_target": "BuildA_midweek",
            "sent_at_local": "2025-12-20T21:21:09-07:00"
          },
          "prompt_text": "WK1 Wrap-up Round (wk1_r3): We are preparing to declare Build A ready. Only respond if you have a BLOCKER (qa_smoke fails, crash/softlock in --no-llm/mock, or a must-have acceptance criterion still failing). If you have a blocker, log it here with repro + command/seed + what you need from whom.",
          "response": {
            "received_at_local": "2025-12-20T21:21:09-07:00",
            "status": "complete",
            "raw": "### BLOCKER for Build A readiness\\n\\nPM decisions for Build A require: (a) do not hard-commit STARTING_GOLD=1500 without a quick manual feel test, and (b) modifier-key bounty tiers are acceptable only if Agent 8 ships a minimal HUD hint; otherwise keep a single default bounty reward for Build A.\\n\\nCurrent code state includes both:\\n- Tiered bounty placement (B/Shift+B/Ctrl+B) via BOUNTY_REWARD_LOW/MED/HIGH in config + Engine input handling.\\n- STARTING_GOLD=1500 in config.py.\\n\\nThis is a release readiness blocker unless we either (1) confirm the HUD hint landed, and (2) confirm the starting-gold change is explicitly approved for Build A (or revert it to prior/default for Build A).\\n\\n### Repro (player-visible)\\n1) Run the game (no special flags).\\n2) Observe that bounty placement amount changes with Shift/Ctrl modifiers (no guaranteed discoverability without hint).\\n3) Observe starting gold is 1500 (tuning change) which can materially affect early Build A feel.\\n\\n### Commands / evidence\\n- qa_smoke gate: `python tools/qa_smoke.py --quick` (PASS on my side).\\n- Code locations: `config.py` (STARTING_GOLD + BOUNTY_REWARD_*), `game/engine.py` (place_bounty modifier tiers).\\n\\n### What I need / from whom\\n- Agent 8: confirm and land a minimal HUD hint for bounty tier modifiers (or tell me to revert tiers for Build A).\\n- PM (Agent 01): decide whether STARTING_GOLD=1500 is approved for Build A; if not, I should revert STARTING_GOLD (and any other tuning-only values) to the prior baseline for Build A tagging.",
            "summary_bullets": [
              "Build A blocker: PM-decided conditional items are currently in code (bounty modifier tiers + STARTING_GOLD=1500) without explicit Build A approval/hint confirmation."
            ],
            "proposed_changes": [
              "If Agent 8 HUD hint is not shipping in Build A: revert bounty placement to a single default reward for Build A (keep tiers for Build B).",
              "If STARTING_GOLD=1500 is not approved for Build A: revert STARTING_GOLD to prior baseline for Build A tagging (re-apply tuning in Build B)."
            ],
            "acceptance_criteria": [
              "Build A either includes a minimal HUD hint for bounty tier modifiers OR reverts to a single bounty reward amount for Build A.",
              "Build A either explicitly approves STARTING_GOLD=1500 after quick manual feel test OR reverts STARTING_GOLD for Build A tagging."
            ],
            "risks": [
              "Shipping modifier-key tiers without hint risks player confusion and violates PM’s Build A condition.",
              "Shipping STARTING_GOLD=1500 without explicit approval risks unintended difficulty/economy perception for Build A."
            ],
            "dependencies": [
              "Agent 8 decision/implementation on HUD hint for bounty tiers.",
              "PM decision on whether STARTING_GOLD=1500 is approved for Build A."
            ],
            "questions_back_to_pm": [
              "ACK blocker: please confirm whether Build A will ship the HUD hint for bounty tier modifiers; if not, I will revert tiered placement for Build A.",
              "ACK blocker: please confirm whether STARTING_GOLD=1500 is approved for Build A; if not, I will revert to prior baseline for Build A."
            ],
            "recommended_next_actions": [
              "Await Agent 8 confirmation on HUD hint; if not landing, revert tiered bounty placement for Build A immediately.",
              "Await PM approval on STARTING_GOLD; if not approved for Build A, revert STARTING_GOLD (and any other tuning-only constants) for Build A tagging."
            ],
            "agent_fields": {
              "pm_acknowledged": true,
              "blocker_type": "buildA_scope_condition",
              "qa_smoke_quick": "PASS",
              "files_implicated": [
                "config.py",
                "game/engine.py"
              ]
            }
          }
        }
      }
    }
  }
}

