{
  "schema_version": "2.0",
  "agent": { "id": "01", "name": "ExecutiveProducer_PM" },
  "notes": [
    "This file is owned by Agent 01 only.",
    "Structure nests rounds inside sprints to keep history organized.",
    "Preferred workflow: add/update only the current sprint+round; do not rewrite past rounds."
  ],
  "sprints": {
    "wk7-ui-polish": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk7-ui-polish_36a51780.plan.md",
        "notes": "WK7: UI overhaul — window/display modes, ESC menu, castle build catalog, and Majesty-quality UI benchmark pass."
      },
      "rounds": {
        "wk7_r0_kickoff": {
          "round_meta": {
            "prompt_set_id": "wk7_r0_kickoff_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "WK7 kickoff: only send to active agents. Consult-only agents stand down unless pinged."
          },
          "pm_status_summary": {
            "overall_status": "Kickoff",
            "wk7_focus": [
              "UI polish to Majesty standard (quality uplift, not a clone).",
              "Window/display mode options (fullscreen/borderless/windowed) exposed in ESC menu → Graphics.",
              "ESC opens a centered pause/settings menu; world input is blocked while open.",
              "Castle-driven Build Catalog window with building thumbnails + click-to-place."
            ],
            "locked_decisions": {
              "bottom_bar_scope": "Keep a slim always-visible bottom bar for core actions; ESC menu is primarily settings/options.",
              "borderless_drag_behavior": "In fullscreen windowed (borderless), click+hold+drag on the top bar switches to windowed and live-drags with the cursor (best-effort).",
              "drag_degradation_policy": "If live-drag cannot be implemented on the platform/runtime, degrade to switching to windowed at drag start and show a brief HUD message explaining the limitation."
            },
            "gates": {
              "qa_smoke_quick": "Must remain PASS",
              "manual_smoke": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "pm_integration_order": [
            "Agent 03: add/solidify runtime display-mode switching API in engine (apply_display_settings + settings model) + best-effort borderless top-bar drag → windowed live-drag.",
            "Agent 08: implement ESC menu modal + Graphics/Audio/Controls pages using Agent 03 API; block world input while menu is open; wire ESC behavior to show menu.",
            "Agent 14: define audio settings semantics (master volume; optional split) and ensure UI hooks do not violate the visibility-gated audibility rule.",
            "Agent 08: implement castle-driven Build Catalog panel (center screen) + click-to-place; add thumbnails/fallback visuals.",
            "Agent 08: run UI benchmark vs Majesty reference and propose/implement highest-value polish deltas that fit sprint scope.",
            "Agent 11: verify gates + manual checklist for window modes + ESC menu + build catalog; file bugs as needed."
          ],
          "pm_next_actions_by_agent": {
            "03": {
              "status": "assigned_active",
              "asks": [
                "Implement runtime display switching: fullscreen, borderless (NOFRAME), windowed (RESIZABLE) and persist user prefs (UI-only, non-sim).",
                "Add a single engine entrypoint like apply_display_settings() so UI can request a mode change safely.",
                "Implement borderless top-bar click+drag to switch to windowed and live-drag with cursor using pygame._sdl2 if available; otherwise degrade per policy with a HUD message.",
                "Expose the active display mode + window size in game_state so Agent 08 can render correct labels in the ESC Graphics menu.",
                "Keep determinism unaffected: settings are UI-only; do not introduce wall-clock time into sim paths."
              ],
              "acceptance_criteria": [
                "User can switch among fullscreen/borderless/windowed via ESC → Graphics and see changes apply immediately.",
                "In borderless: click+hold+drag in top bar switches to windowed; window follows cursor (best-effort).",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "suggested_files": [
                "game/engine.py",
                "config.py (defaults only; no UI state stored here long-term)"
              ]
            },
            "08": {
              "status": "assigned_active",
              "asks": [
                "Implement ESC menu modal (center screen): Resume, Graphics, Audio, Controls, Quit.",
                "Route Esc to open/close the menu (not just pause). While menu open, block world input; game is paused.",
                "Graphics page: show display mode options (fullscreen/borderless/windowed), call Agent 03 apply_display_settings().",
                "Audio page: master volume slider (coordinate with Agent 14).",
                "Controls page: read-only list of keybinds (rebinding UI is optional if time permits).",
                "Castle-driven Build Catalog: selecting castle shows a Build buildings action; clicking opens centered catalog with thumbnails/name/cost/hotkey + disabled reasons; clicking a building closes panel and enters placement (must call engine.select_building_for_placement()).",
                "UI benchmark vs Majesty reference: capture screenshots, list deltas, then implement the top-impact improvements that fit the sprint."
              ],
              "acceptance_criteria": [
                "Esc opens centered menu; Resume closes; world input is blocked while open; game is paused while menu is open.",
                "Graphics/Audio/Controls pages render without clutter and remain readable at 1920x1080.",
                "Castle → Build buildings opens the catalog; clicking an item enters placement and closes the catalog.",
                "Before/after screenshot set + delta list recorded in Agent 08 log.",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "suggested_files": [
                "game/ui/hud.py",
                "game/ui/widgets.py",
                "game/ui/theme.py",
                "game/ui/building_list_panel.py (replace/augment)",
                "game/ui/building_panel.py",
                "game/engine.py"
              ]
            },
            "14": {
              "status": "assigned_active",
              "asks": [
                "Define audio settings semantics for WK7: master volume slider behavior (and optional split: SFX vs ambient) that is simple and safe.",
                "Work with Agent 08 to define UI labels/ranges and persistence expectations.",
                "Verify/guard: audibility rule remains locked (world SFX only if on-screen + fog-visible). UI sounds are exempt."
              ],
              "acceptance_criteria": [
                "Master volume control works and does not impact simulation state.",
                "No regression in audibility gating behavior.",
                "Document the chosen semantics in Agent 14 log so QA can test it."
              ],
              "suggested_files": [
                "game/audio/audio_system.py",
                "game/audio/EVENT_CONTRACT.md",
                "assets/ATTRIBUTION.md (only if new assets are added)"
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "Create/refresh a WK7 manual smoke checklist focused on: (1) window mode switching, (2) borderless drag-to-windowed behavior, (3) ESC menu input blocking and pause semantics, (4) castle build catalog click-to-place.",
                "Run gates after major merges: python tools/qa_smoke.py --quick must PASS.",
                "File WK7 bug tickets in PM hub if regressions appear (repro + expected/actual + suspected owner)."
              ],
              "acceptance_criteria": [
                "qa_smoke quick remains PASS throughout",
                "Manual smoke confirms expected behaviors on Windows"
              ]
            },
            "10": {
              "status": "consult_only",
              "asks": [
                "If pinged: review ESC menu/build catalog UI code for per-frame allocations and obvious FPS regressions; propose caching/rate-limit fixes."
              ]
            },
            "09": {
              "status": "consult_only",
              "asks": [
                "If pinged: advise on building thumbnail sourcing strategy (use existing building sprites if present; otherwise specify clean placeholder thumbnails) consistent with pixel-art constraints."
              ]
            },
            "12": {
              "status": "consult_only",
              "asks": [
                "If pinged: confirm any new UI/audio assets keep validate_assets clean; advise on manifest/attribution updates if needed."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "08", "14", "11"],
            "do_not_send": ["02", "04", "05", "06", "07", "09", "10", "12", "13"],
            "rationale": "WK7 is primarily UI + display system work with audio settings integration and QA validation. Art/tools/perf are consult-only unless blockers appear."
          }
        },
        "wk7_r1_execution_sync": {
          "round_meta": {
            "prompt_set_id": "wk7_r1_execution_sync_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "WK7 execution: active agents only. Consult-only agents stand down unless pinged."
          },
          "pm_status_summary": {
            "overall_status": "In progress: agents have acknowledged kickoff; execution requires concrete integration contracts + sequencing.",
            "agent_updates_received": {
              "03": "ACK plan posted; implementing apply_display_settings + borderless drag behavior; will expose display state in game_state.",
              "08": "ACK plan posted; will stub ESC menu framework + start UI benchmark; blocking dependencies for Graphics (03 API) + Audio semantics (14).",
              "14": "IN_PROGRESS; proposes master volume API and documentation; needs UI label/range/persistence decisions.",
              "11": "IN_PROGRESS; manual smoke checklist drafted; will run qa_smoke after merges and file bug tickets."
            },
            "current_blockers": [
              "Graphics page is blocked until Agent 03 lands apply_display_settings() + exposes display state in game_state.",
              "Audio page is blocked until Agent 14 finalizes master volume semantics and the callable API surface exists (or is confirmed existing)."
            ],
            "gates": {
              "qa_smoke_quick": "Must remain PASS after each major merge",
              "manual_smoke": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "pm_decisions": {
            "wk7_ui_settings_persistence": {
              "scope": "BuildA",
              "decision": "In-memory persistence is acceptable for WK7 BuildA. If adding a settings file is quick and low-risk, do it; otherwise defer to BuildB.",
              "constraints": [
                "Settings are UI-only and must not affect sim determinism.",
                "Headless/SDL_VIDEODRIVER=dummy runs must not crash if settings exist."
              ]
            },
            "audio_slider_units": {
              "decision": "UI displays 0–100%, API uses 0.0–1.0 floats internally.",
              "default_master_volume": 80
            }
          },
          "pm_next_actions_by_agent": {
            "03": {
              "status": "in_progress",
              "asks": [
                "Land apply_display_settings() + in-engine display_mode/window_size state, and expose these in get_game_state().",
                "Implement borderless top-bar drag: switch to windowed and live-drag if pygame._sdl2 is available; otherwise switch-to-windowed + HUD message.",
                "After landing, paste the exact method signature + expected game_state keys into your agent log so Agent 08 can integrate without guesswork.",
                "Run: python tools/qa_smoke.py --quick and record PASS evidence."
              ],
              "acceptance_criteria": [
                "apply_display_settings exists and is callable from UI without import cycles.",
                "game_state includes keys for display_mode and window_size (or equivalent) so UI can render current selection.",
                "qa_smoke --quick PASS"
              ]
            },
            "14": {
              "status": "in_progress",
              "asks": [
                "Finalize the Audio settings API surface for master volume.\n- Preferred: AudioSystem exposes set_master_volume(vol_0_to_1) + get_master_volume().\n- If you choose an alternate shape, document it precisely and keep it UI-only / non-authoritative.",
                "Implement or coordinate implementation of the API (depending on your role boundaries) and update EVENT_CONTRACT.md with the semantics.",
                "Confirm: master volume scales both SFX and ambient (master * per-sound volume).",
                "Run: python tools/qa_smoke.py --quick and record PASS evidence."
              ],
              "acceptance_criteria": [
                "Master volume semantics are fully documented in your agent log (range, default, what it affects).",
                "Audibility gating is unchanged (volume does not bypass on-screen+VISIBLE checks).",
                "qa_smoke --quick PASS"
              ]
            },
            "08": {
              "status": "in_progress",
              "asks": [
                "Proceed NOW with non-dependent UI work:\n- ESC menu framework (modal/backdrop/input blocking/pause semantics)\n- Resume/Quit/Controls (read-only) pages\n- Start Majesty UI benchmark: capture current screenshots and draft delta list",
                "WAIT to implement Graphics page wiring until Agent 03 posts the exact apply_display_settings signature + game_state keys.",
                "WAIT to implement Audio page wiring until Agent 14 confirms the master volume API signature/semantics.",
                "Once unblocked, wire:\n- Graphics page -> Agent 03 apply_display_settings\n- Audio page -> Agent 14 master volume API\n- Then implement castle-driven Build Catalog + click-to-place, and complete top 3 UI benchmark deltas.",
                "After each major feature lands, coordinate with Agent 11 to run qa_smoke and perform a short manual check."
              ],
              "acceptance_criteria": [
                "ESC opens centered menu; game paused; world input blocked; Resume returns to game.",
                "Controls page displays keybinds clearly (read-only).",
                "Benchmark before/after screenshots + delta list captured in Agent 08 log.",
                "qa_smoke --quick PASS"
              ]
            },
            "11": {
              "status": "in_progress",
              "asks": [
                "After Agent 03 lands display-mode changes: run python tools/qa_smoke.py --quick and log PASS/FAIL.",
                "After Agent 08 lands ESC menu framework: run python tools/qa_smoke.py --quick and log PASS/FAIL; then do a 5-minute manual check of ESC input blocking/pause semantics.",
                "After Agent 14 lands master volume API/semantics: run python tools/qa_smoke.py --quick and log PASS/FAIL; then do a 5-minute audio UI check once Agent 08 wires the slider.",
                "File WK7 bug tickets here in PM hub if regressions appear (use the standard template)."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "08", "14", "11"],
            "do_not_send": ["02", "04", "05", "06", "07", "09", "10", "12", "13"],
            "rationale": "All four active agents have ongoing work; next leg is execution sequencing and unblocking UI wiring via explicit API signatures."
          }
        },
        "wk7_r2_integration_and_polish": {
          "round_meta": {
            "prompt_set_id": "wk7_r2_integration_and_polish_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "WK7 integration/polish: only send to agents with remaining work. Others stand down unless pinged."
          },
          "pm_status_summary": {
            "overall_status": "Core plumbing is landed; now integrate UI wiring + build catalog + benchmark polish + QA verification.",
            "what_is_done": [
              "Agent 03 landed display mode switching API in engine: apply_display_settings(display_mode, window_size=None) and exposed game_state keys display_mode/window_size; includes borderless top-bar drag best-effort live-drag; qa_smoke PASS.",
              "Agent 08 landed ESC menu framework: PauseMenu modal + input blocking/pause semantics + Controls/Resume/Quit pages; qa_smoke PASS.",
              "Agent 14 landed AudioSystem master volume API: set_master_volume(vol_0_to_1) + get_master_volume(); master volume scales SFX+ambient and preserves audibility gating; documented in EVENT_CONTRACT; code is in place."
            ],
            "what_is_not_done_yet": [
              "Agent 08: Wire Graphics page to call engine.apply_display_settings() using game_state['display_mode']/['window_size'].",
              "Agent 08: Wire Audio page to call audio_system.set_master_volume() and reflect current audio_system.get_master_volume() (UI shows 0–100%).",
              "Agent 08: Implement castle-driven Build Catalog panel (center screen) with thumbnails/fallbacks and click-to-place; close menu on selection.",
              "Agent 08: Complete Majesty UI benchmark (before/after screenshots + delta list) and implement the top 3 high-impact deltas that fit scope.",
              "Agent 11: Run qa_smoke --quick after each integration step and perform manual checks (window switching + borderless drag + ESC input blocking + build catalog + audio slider). File bugs if needed."
            ],
            "gates": {
              "qa_smoke_quick": "Must remain PASS",
              "manual_smoke": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "pm_next_actions_by_agent": {
            "08": {
              "status": "assigned_active",
              "asks": [
                "Integrate Graphics page now that Agent 03 API is landed:\n- Read current selection from game_state['display_mode'] and game_state['window_size'].\n- On selection change, call engine.apply_display_settings(display_mode, window_size_if_needed).",
                "Integrate Audio page now that Agent 14 API is landed:\n- Read current from audio_system.get_master_volume().\n- On slider change, call audio_system.set_master_volume(vol_0_to_1).\n- UI displays percent (0–100) but converts to 0.0–1.0 internally.",
                "Implement Castle Build Catalog (centered modal):\n- Castle selection offers 'Build buildings'.\n- Catalog shows thumbnail (building sprite if available; else swatch), name, cost, hotkey, disabled reasons.\n- Click selects building -> closes catalog and enters placement via engine.select_building_for_placement().",
                "Complete Majesty benchmark:\n- Capture current screenshots in a similar state to reference.\n- Produce a delta list.\n- Implement top 3 deltas (highest impact, lowest risk) this round.",
                "After each major integration (Graphics wiring, Audio wiring, Build Catalog, top 3 deltas), run qa_smoke or coordinate with Agent 11 to confirm it stays green."
              ],
              "acceptance_criteria": [
                "ESC menu Graphics page actually changes modes; current mode is reflected correctly.",
                "ESC menu Audio page changes master volume immediately; value persists during session.",
                "Castle → Build buildings opens centered catalog; clicking a building exits catalog and enters placement.",
                "Benchmark before/after screenshots + delta list recorded in Agent 08 log; top 3 deltas shipped.",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "notes": [
                "Prefer in-memory settings persistence for BuildA. If you add a settings file, keep it UI-only and safe under SDL dummy."
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "Re-run python tools/qa_smoke.py --quick now that display/mode + menu + audio API changes exist, and record PASS/FAIL evidence.",
                "Manual verification (Windows):\n- Window mode switching in Graphics page\n- Borderless drag-to-windowed behavior\n- ESC menu input blocking/pause semantics\n- Audio slider changes volume and does not bypass audibility gating\n- Castle build catalog click-to-place",
                "If any regression appears, file WK7 bug tickets in PM hub under this round."
              ]
            },
            "03": {
              "status": "stand_down_consult_only",
              "asks": [
                "Stand by. If Agent 08 hits an edge-case in apply_display_settings/window_size UX, provide a quick follow-up patch and document it."
              ]
            },
            "14": {
              "status": "stand_down_consult_only",
              "asks": [
                "Stand by. If Agent 08 needs help wiring the slider or if QA finds an audibility gating regression, investigate and propose the minimal fix."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["08", "11"],
            "do_not_send": ["03", "14", "02", "04", "05", "06", "07", "09", "10", "12", "13"],
            "rationale": "03 and 14 delivered their core APIs; remaining work is UI wiring + build catalog + benchmark polish (08) and verification (11). Ping 03/14 only if integration issues appear."
          }
        },
        "wk7_r3_closeout_benchmark_and_final_QA": {
          "round_meta": {
            "prompt_set_id": "wk7_r3_closeout_benchmark_and_final_QA_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "WK7 closeout: send only to agents with remaining tasks (08 + 11)."
          },
          "pm_status_summary": {
            "overall_status": "Near complete: functional requirements appear implemented; remaining tasks are Majesty benchmark + final QA/manual verification + any bugfixes found.",
            "reconciled_state": [
              "Codebase check confirms Agent 08 has now wired Graphics and Audio pages AND implemented Build Catalog (castle button -> catalog -> click-to-place).",
              "Engine confirms apply_display_settings exists, PauseMenu exists, and AudioSystem set_master_volume/get_master_volume exists.",
              "Agent 11's earlier note that wiring/catalog were missing is now stale; they should re-verify on current code state."
            ],
            "done_in_code": [
              "Window mode switching API (apply_display_settings) is present.",
              "ESC menu modal is present and blocks world input while open.",
              "Audio master volume API exists.",
              "Castle-driven Build Catalog exists (Build buildings button + centered catalog + click-to-place)."
            ],
            "remaining": [
              "Majesty benchmark (before/after screenshots + delta list + top 3 polish deltas) — Agent 08.",
              "QA re-run on latest code + manual verification (graphics mode switching, borderless drag, ESC input blocking, audio slider volume change, build catalog) — Agent 11.",
              "If any regression is found, file WK7 bug tickets and assign owner."
            ],
            "gates": {
              "qa_smoke_quick": "Must remain PASS",
              "manual_smoke": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "pm_next_actions_by_agent": {
            "08": {
              "status": "assigned_active",
              "asks": [
                "Complete Majesty benchmark now:\n- Use `.cursor/human_provided/Original Majesty UI Example.JPG` as the reference.\n- Capture current game screenshots in a comparable state (1920x1080 if possible).\n- Write a concise delta list (what looks clumpy vs Majesty; spacing, typography hierarchy, panel framing, minimap framing, command bar density, button affordances).\n- Implement the top 3 deltas that are high-impact and low-risk (no big refactors).",
                "After implementing the top 3 deltas, run `python tools/qa_smoke.py --quick` and record PASS evidence in your agent log."
              ],
              "acceptance_criteria": [
                "Before/after screenshots + delta list exist in Agent 08 log.",
                "Top 3 deltas are implemented without breaking core UI behaviors.",
                "qa_smoke --quick PASS"
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "Re-run `python tools/qa_smoke.py --quick` on the latest workspace and record PASS/FAIL evidence.",
                "Manual verification (Windows):\n- ESC menu open/close + input blocking + pause semantics\n- Graphics page changes modes (fullscreen/borderless/windowed) and reflects current mode\n- Borderless drag-to-windowed behavior (best-effort; confirm degrade message if live-drag unavailable)\n- Audio page slider changes master volume (confirm it audibly changes SFX/ambient)\n- Castle Build Catalog: open, close, disabled reasons, click-to-place",
                "If any issues are found, file WK7 bug tickets under this round with repro+owner+acceptance tests."
              ],
              "acceptance_criteria": [
                "qa_smoke --quick PASS",
                "Manual checklist PASS or bug tickets filed for any failures"
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["08", "11"],
            "do_not_send": ["03", "14", "02", "04", "05", "06", "07", "09", "10", "12", "13"],
            "rationale": "Only remaining work is UI benchmark/polish (08) and verification/manual QA (11)."
          }
        },
        "wk7_r4_release_candidate_human_manual_smoke": {
          "round_meta": {
            "prompt_set_id": "wk7_r4_release_candidate_human_manual_smoke_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "WK7 final gate: human manual smoke + any last bug tickets only."
          },
          "pm_bug_tickets": [
            {
              "id": "WK7-BUG-001",
              "title": "Boot crash: PauseMenu constructed before audio_system (AttributeError: GameEngine has no attribute audio_system)",
              "severity": "blocker",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py (or python main.py --no-llm / --provider mock)",
                "Observe crash during GameEngine.__init__"
              ],
              "expected": "Game boots successfully; ESC menu can reference AudioSystem safely.",
              "actual": "Crash: AttributeError: 'GameEngine' object has no attribute 'audio_system' when constructing PauseMenu.",
              "evidence": [
                "Trace shows: game/engine.py calls PauseMenu(... audio_system=self.audio_system) before self.audio_system exists."
              ],
              "suspected_area": [
                "game/engine.py (GameEngine.__init__ initialization order)",
                "game/ui/pause_menu.py (expects audio_system reference)"
              ],
              "constraints": [
                "Keep settings/UI non-authoritative (no sim-state changes).",
                "Keep determinism unchanged.",
                "Avoid headless/dummy driver regressions if possible."
              ],
              "proposed_fix": [
                "Reorder GameEngine initialization so self.audio_system is created before PauseMenu is constructed.",
                "If any UI construction needs window_width/height, ensure those are set before allocating surfaces (avoid init-order crashes).",
                "Keep the change minimal and localized to engine init ordering."
              ],
              "acceptance_test": [
                "python main.py --no-llm boots to a running window (no crash)",
                "python main.py --provider mock boots to a running window (no crash)",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "integration_notes": {
                "risk_notes": [
                  "This is a constructor-order bug; fixing it should not change gameplay behavior, but it is a blocker for any manual smoke.",
                  "If additional headless boot issues exist (SDL dummy), handle them without changing sim determinism."
                ],
                "consult": [
                  "08_UX_UI_Director for any PauseMenu signature expectations",
                  "11_QA_TestEngineering_Lead to re-run qa_smoke and confirm boot"
                ]
              },
              "status": "assigned"
            }
          ],
          "pm_status_summary": {
            "overall_status": "Release candidate: all engineering + automated gates are green; only human manual smoke remains.",
            "done": [
              "Window mode switching API + best-effort borderless drag implementation landed (Agent 03).",
              "ESC menu modal + Graphics/Audio wiring + Controls + Castle Build Catalog landed (Agent 08).",
              "Audio master volume API landed and documented; audibility gating preserved (Agent 14).",
              "Majesty benchmark polish complete (top 3 deltas) + qa_smoke PASS (Agent 08).",
              "QA re-verified latest workspace: qa_smoke PASS and code review confirms wiring and catalog (Agent 11)."
            ],
            "remaining_blockers": [
              "Human manual smoke on Windows (10 minutes each mode) with special attention to borderless drag-to-windowed behavior."
            ],
            "gates": {
              "automated": "python tools/qa_smoke.py --quick PASS (already reported)",
              "human_manual": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "human_manual_smoke_checklist": [
            "ESC menu: opens centered, blocks world input, pauses; Resume closes and resumes.",
            "Graphics: switch fullscreen/borderless/windowed; confirm current selection reflects reality.",
            "Borderless drag: click+hold+drag on top bar switches to windowed and drags; if live-drag not supported, confirm it switches to windowed + shows HUD message.",
            "Audio: master volume slider changes ambient + SFX volume audibly; UI sounds still audible; world audibility gating still respected (off-screen/fog events remain silent).",
            "Castle: click castle -> Build buildings -> catalog opens; disabled reasons show; click-to-place works; cancel works.",
            "No obvious layout clipping at your resolution; new padding/typography feels less clumpy."
          ],
          "pm_next_actions_by_agent": {
            "11": {
              "status": "stand_by",
              "asks": [
                "Stand by for bug tickets arising from human manual smoke; if any are filed, help define minimal acceptance tests and verify qa_smoke remains PASS after fixes."
              ]
            },
            "08": {
              "status": "stand_by",
              "asks": [
                "Stand by for any UI bug tickets from human manual smoke; if any are filed, implement minimal fixes and keep qa_smoke PASS."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "08", "11"],
            "do_not_send": ["14", "02", "04", "05", "06", "07", "09", "10", "12", "13"],
            "rationale": "Boot crash is a release blocker. Assign to Agent 03 (engine init order), consult Agent 08 (PauseMenu expectations), and have Agent 11 verify qa_smoke and boot."
          }
        },
        "wk7_r5_mid_sprint_ui_bugs_and_visual_overhaul": {
          "round_meta": {
            "prompt_set_id": "wk7_r5_mid_sprint_ui_bugs_and_visual_overhaul_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "Mid-sprint corrective: fix UI hitbox/mode switching issues and overhaul visuals (CC0 UI art + layout)."
          },
          "pm_status_summary": {
            "overall_status": "Core WK7 UI exists (ESC menu, build catalog, mode toggles), but human playtest reports major usability + aesthetic issues requiring a mid-sprint corrective push.",
            "human_reports": {
              "click_offset_build_menu": "Build-related UI requires clicking ~100–200px above the visible control to register.",
              "display_mode_switching": "Graphics menu attempts mode changes but ends up staying fullscreen regardless of selection.",
              "ui_look": "UI still looks clunky/grey/empty; no art skin; wasted space; massive always-present right sidebar.",
              "windowed_position_locked": "After switching to windowed mode, the window is stuck at the top-left and cannot be moved around the desktop."
            },
            "evidence_assets": [
              ".cursor/human_provided/week6-7 UI.JPG",
              ".cursor/human_provided/Original Majesty UI Example.JPG"
            ],
            "locked_mid_sprint_decisions": {
              "ui_look_approach": "Import a cohesive CC0 UI art pack (9-slice panels/buttons + icons).",
              "right_panel_behavior": "Right panel becomes toggleable via Tab (not always visible)."
            },
            "gates": {
              "automated": "python tools/qa_smoke.py --quick PASS required after each integration step",
              "human_manual": [
                "python main.py --no-llm (10 min)",
                "python main.py --provider mock (10 min)"
              ]
            }
          },
          "pm_bug_tickets": [
            {
              "id": "WK7-BUG-002",
              "title": "UI click hitboxes are vertically offset (need to click above control)",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py",
                "Try clicking the Build Buildings / build catalog controls (and other UI controls)",
                "Observe click registers only when clicking significantly above the visible control"
              ],
              "expected": "Click target matches the visible control bounds.",
              "actual": "Click registers offset upward by ~100–200px.",
              "suspected_area": [
                "Coordinate space mismatch between panel-local drawing and screen-space Rect hit-tests",
                "Modal panels caching stale screen sizes after display mode changes"
              ],
              "constraints": [
                "UI-only; do not change sim determinism.",
                "Avoid per-frame allocations; preserve caching where possible."
              ],
              "proposed_fix": [
                "Audit clickable rects in build-related UI and enforce consistent coordinate-space rules (panel-local vs screen-space).",
                "Add explicit on_resize(w,h) hooks for PauseMenu / BuildCatalogPanel / HUD (as needed) and call them from apply_display_settings() after pygame.set_mode."
              ],
              "acceptance_test": [
                "Manual: click targets align in fullscreen/borderless/windowed",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "status": "assigned"
            },
            {
              "id": "WK7-BUG-003",
              "title": "Graphics menu display mode switching appears to do nothing (stays fullscreen)",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py",
                "ESC → Graphics → choose Windowed or Borderless",
                "Observe screen flicker/attempt but ends up fullscreen anyway"
              ],
              "expected": "Windowed is obviously windowed (decorated/resizable); borderless is fullscreen-windowed; fullscreen is exclusive fullscreen.",
              "actual": "Remains fullscreen regardless of selection (or looks fullscreen).",
              "suspected_area": [
                "Windowed defaults to desktop size so it looks fullscreen",
                "SDL/pygame flags not clearing properly between modes on Windows",
                "UI not receiving resized screen_w/h after mode change (layout/hitboxes stale)"
              ],
              "constraints": [
                "UI/system-only; do not change sim determinism.",
                "Avoid new persistent settings storage in BuildA unless trivial."
              ],
              "proposed_fix": [
                "Make windowed mode default clearly smaller (e.g., 1280×720) unless prior windowed size exists.",
                "Ensure mode switching clears/sets flags appropriately on Windows and triggers UI resize propagation.",
                "Optional: minimal HUD toast showing the active mode + resolution after switching."
              ],
              "acceptance_test": [
                "Manual: each mode is distinct and stable on Windows",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "status": "assigned"
            }
            ,
            {
              "id": "WK7-BUG-004",
              "title": "Windowed mode window is stuck top-left and cannot be moved",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py",
                "ESC → Graphics → switch to Windowed",
                "Try dragging the window by the title bar around the desktop"
              ],
              "expected": "In windowed mode, the OS-decorated window can be dragged/moved normally.",
              "actual": "Window appears locked to the top-left corner and cannot be moved.",
              "suspected_area": [
                "pygame/SDL window position handling when switching modes",
                "Mode switch code may be forcing position (0,0) or reapplying a fixed position each frame",
                "Possible use of borderless flags or SDL2 window APIs even in windowed mode"
              ],
              "constraints": [
                "UI/system-only; do not change sim determinism.",
                "Avoid brittle platform-specific hacks; prefer SDL/pygame-supported window positioning."
              ],
              "proposed_fix": [
                "Ensure windowed mode uses RESIZABLE with OS decorations (no NOFRAME) and does not forcibly set window position after switching.",
                "If we intentionally set a position during mode switch, set it ONCE (centered) and then stop touching it.",
                "If using pygame._sdl2 Window, verify we are not pinning the position or recreating the window each frame."
              ],
              "acceptance_test": [
                "Manual (Windows): after switching to windowed, user can drag/move the window anywhere.",
                "Switching between modes preserves move-ability in windowed.",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "status": "assigned"
            }
          ],
          "pm_integration_order": [
            "A) Agent 08: Fix click hitbox alignment + implement resize propagation hooks (unblocks reliable interaction).",
            "B) Agent 03: Harden display mode switching and make windowed mode obviously windowed; ensure resize hooks are invoked.",
            "C) Agent 09 + Agent 12: Import one cohesive CC0 UI art pack + attribution proof (Tools owns license/validator cleanliness).",
            "D) Agent 08: Implement 9-slice skin + Tab-toggle right panel + reduce wasted space using the new art pack.",
            "E) Agent 11: QA checklist + before/after screenshots; file bugs as needed."
          ],
          "pm_next_actions_by_agent": {
            "08": {
              "status": "assigned_active",
              "asks": [
                "Fix WK7-BUG-002: audit build-related UI click targets and correct coordinate-space mismatches (panel-local draw vs screen-space hit-test).",
                "Add `on_resize(w,h)` to PauseMenu and BuildCatalogPanel (and HUD if needed); ensure engine calls these after apply_display_settings() so modal rects and hitboxes match the new screen size.",
                "Implement Tab toggling for the right-side panel; when hidden, reclaim space (HUD layout recompute) and show a small hint in top bar (e.g., 'Tab: Panel').",
                "After UI pack lands: implement 9-slice skinning for panels/buttons in widgets, swap in textures for core frames/buttons, and tighten layout spacing to remove empty wasted areas."
              ],
              "acceptance_criteria": [
                "No click offset in any display mode (fullscreen/borderless/windowed).",
                "Right panel not always present; Tab toggles reliably; no input bleed.",
                "UI looks materially less grey/black and closer to Majesty-level framing/affordances.",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "suggested_files": [
                "game/ui/building_panel.py",
                "game/ui/build_catalog_panel.py",
                "game/ui/pause_menu.py",
                "game/ui/hud.py",
                "game/ui/widgets.py",
                "game/engine.py"
              ]
            },
            "03": {
              "status": "assigned_active",
              "asks": [
                "Fix WK7-BUG-003: ensure mode switching truly switches modes on Windows and that 'windowed' is obviously windowed (default to 1280×720 if needed).",
                "Ensure apply_display_settings() triggers UI resize propagation (call HUD/PauseMenu/BuildCatalogPanel on_resize).",
                "Fix WK7-BUG-004: in windowed mode, the OS window must be draggable/movable (not pinned top-left).",
                "Optional: add a minimal confirmation UI (toast) after switching modes with mode+resolution."
              ],
              "acceptance_criteria": [
                "Fullscreen/borderless/windowed are distinct and stable on Windows.",
                "Switching to windowed yields a decorated resizable window (obvious).",
                "Windowed mode window can be moved around the desktop (not pinned top-left).",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "suggested_files": [
                "game/engine.py",
                "config.py (defaults only, if needed)"
              ]
            },
            "09": {
              "status": "assigned_active",
              "asks": [
                "Pick ONE cohesive CC0 UI pack (panels/buttons/icons) and import a minimal curated subset.",
                "Define a small texture contract for 9-slice panels (top/bottom/right/modal) and button states (normal/hover/pressed), plus a few key icons (Build/Hire/Bounty + menu tabs).",
                "Ensure nearest-neighbor scaling (pixel crisp) and avoid bloat."
              ],
              "acceptance_criteria": [
                "Assets live under assets/ui/<pack>/ and render crisply.",
                "Coordinate with Agent 12 so license proof files are included under assets/third_party/<pack>/ (verbatim).",
                "No missing paths; minimal subset imported."
              ]
            },
            "12": {
              "status": "assigned_active",
              "asks": [
                "Own attribution + license proof for the chosen CC0 UI pack:\n- Add assets/third_party/<pack>/{LICENSE,README} (verbatim)\n- Update assets/ATTRIBUTION.md with exact source + license proof\n- If validate_assets needs to include UI assets, update tooling carefully (no false positives).",
                "Coordinate with Agent 09 on the 'UI texture contract' paths so UI code can load assets deterministically and safely."
              ],
              "acceptance_criteria": [
                "Attribution is complete and consistent; license proof exists in-repo.",
                "No tooling regressions; keep validator/qa_smoke clean."
              ]
            },
            "13": {
              "status": "consult_only",
              "asks": [
                "Optional: once UI pack is chosen, record a concise credit blurb suitable for future patch notes / store copy (no file changes required unless PM asks)."
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "After each integration step (A–D), run `python tools/qa_smoke.py --quick` and log PASS/FAIL evidence.",
                "Manual verify: click-hitbox alignment, display-mode switching on Windows, Tab toggle behavior, no startup crashes.",
                "Capture before/after screenshots comparing against .cursor/human_provided/week6-7 UI.JPG and the Majesty reference."
              ],
              "acceptance_criteria": [
                "qa_smoke --quick PASS",
                "Manual checklist PASS or bug tickets filed"
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "08", "09", "11", "12"],
            "do_not_send": ["02", "04", "05", "06", "07", "10", "13", "14"],
            "rationale": "Reactivated Agent 03 for WK7-BUG-004 (windowed window pinned top-left). Continue: UI pack (09) + attribution/tooling (12) + UI skin/layout (08) + QA (11)."
          }
        },
        "wk7_r6_ui_skinning_layout_tightening_and_final_QA": {
          "round_meta": {
            "prompt_set_id": "wk7_r6_ui_skinning_layout_tightening_and_final_QA_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "Closeout: UI visual overhaul integration + final QA/manual verification."
          },
          "pm_status_summary": {
            "overall_status": "Blockers cleared: windowed mode is visually distinct and should be movable (Agent 03 fix), and CC0 UI pack + attribution are landed (Agent 09). Next step is UI skin integration + final QA proof.",
            "done_claimed_by_agents": [
              "Agent 08: click hitbox offset fix + Tab-toggle right panel + on_resize hooks (qa_smoke PASS)",
              "Agent 03: windowed default 1280x720 + resize propagation calls + window pinned top-left fix (qa_smoke PASS)",
              "Agent 09: CC0 UI pack delivered under assets/ui/kingdomsim_ui_cc0/ + license proof + ATTRIBUTION update (qa_smoke PASS)"
            ],
            "remaining_work": [
              "Agent 08 must integrate 9-slice skin + icons and tighten layout to remove grey/black clunkiness.",
              "Agent 11 must re-run qa_smoke + manual verification + before/after screenshots (including window drag/move check)."
            ],
            "gates": {
              "automated": "python tools/qa_smoke.py --quick PASS",
              "manual_windows": [
                "Switch to windowed and drag/move the window freely",
                "ESC menu + Build Catalog interaction correctness",
                "Tab toggles right panel, no input bleed"
              ],
              "visual_proof": "Before/after screenshots compared to .cursor/human_provided/week6-7 UI.JPG and Majesty reference"
            }
          },
          "pm_next_actions_by_agent": {
            "08": {
              "status": "assigned_active",
              "asks": [
                "Integrate the CC0 UI pack into UI rendering:\n- Use assets/ui/kingdomsim_ui_cc0/panels/* and buttons/* for Panel/ModalPanel frames and primary buttons.\n- Add icons (build/hire/bounty/graphics/audio/controls) to improve affordances.\n- Implement 9-slice rendering in game/ui/widgets.py with caching (no per-frame scaling).",
                "Tighten layout to reduce wasted space:\n- Reduce oversized modal padding; compact rows/spacing.\n- Ensure right panel being hidden truly reclaims world space.\n- Keep color language warm (avoid grey/black dominance).",
                "After changes: run `python tools/qa_smoke.py --quick` and capture 2–4 screenshots (ESC menu, build catalog, normal HUD with right panel hidden+shown)."
              ],
              "acceptance_criteria": [
                "UI visibly improved (less grey/black, better framed, icons present, less wasted space).",
                "No regressions in click hitboxes across display modes.",
                "qa_smoke --quick PASS"
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "After Agent 08 lands skin/layout work, run:\n- `python tools/qa_smoke.py --quick`\nThen manual verify on Windows:\n- Switch to windowed and drag/move window freely (WK7-BUG-004 regression check)\n- ESC menu + Graphics switching + Audio slider\n- Build Catalog click-to-place\n- Tab toggles right panel; no input bleed\nCapture before/after screenshots."
              ],
              "acceptance_criteria": [
                "qa_smoke --quick PASS",
                "Manual checklist PASS (or file new WK7 bugs with repro + owner)",
                "Screenshots captured for comparison"
              ]
            },
            "03": {
              "status": "stand_by",
              "asks": [
                "Stand by in case Agent 11/human smoke finds remaining Windows window-position issues. If WK7-BUG-004 persists, iterate on a minimal fix without sim changes."
              ]
            },
            "09": {
              "status": "stand_by",
              "asks": [
                "Stand by if Agent 08 needs additional icons or button states; extend the UI pack with the same palette and sizing."
              ]
            },
            "12": {
              "status": "stand_by",
              "asks": [
                "Stand by if any tooling/validator adjustments are needed for the new UI assets; keep validate_assets and qa_smoke clean."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["08", "11"],
            "do_not_send": ["02", "03", "04", "05", "06", "07", "09", "10", "12", "13", "14"],
            "rationale": "Closeout work is UI skin/layout integration (08) and QA proof (11). Others are stand-by unless QA finds regressions."
          }
        },
        "wk7_r7_production_readiness_bugfixes_and_QA": {
          "round_meta": {
            "prompt_set_id": "wk7_r7_production_readiness_bugfixes_and_QA_v1",
            "build_target": "BuildA_release_candidate",
            "pm_authored_at_local": "2026-01-18T00:00:00",
            "visibility": "Final polish + production readiness: fix remaining fullscreen-resize + UI skin gaps; then final QA proof."
          },
          "pm_status_summary": {
            "overall_status": "UI is now MUCH better per human playtest, but 3 issues remain before production: fullscreen expansion regression after windowed shrink, close X label overlap, and selected-building panel still grey/unskinned.",
            "human_reports": {
              "fullscreen_expand_regression": "After switching from windowed (shrunk) back to fullscreen, the play area/world does not expand back to fullscreen correctly; UI expands but world/play area stays shrunk.",
              "close_x_text_overlap": "Grey text overlays the 'X' close button in the top right; remove/avoid the overlap.",
              "selected_building_panel_grey": "The selected-building info panel is still grey/unskinned compared to the new UI."
            },
            "gates": {
              "automated": "python tools/qa_smoke.py --quick PASS",
              "manual_windows": [
                "Windowed → Fullscreen transition: world/play area must expand and match UI",
                "Close X is clean (no overlapping text)",
                "Selected building panel uses the new textured skin"
              ]
            }
          },
          "pm_bug_tickets": [
            {
              "id": "WK7-BUG-005",
              "title": "World/play area does not re-expand when switching Windowed → Fullscreen",
              "severity": "blocker",
              "build_target": "BuildA_release_candidate",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py",
                "ESC → Graphics → Windowed (choose a smaller window)",
                "ESC → Graphics → Fullscreen",
                "Observe UI expands but world/play area remains shrunk/incorrectly scaled"
              ],
              "expected": "After switching to fullscreen/borderless, world/play area and camera viewport use the new display size.",
              "actual": "World/play area stays at the previous smaller size despite UI expanding.",
              "suspected_area": [
                "game/engine.py render pipeline: scaled surface/view surface sizing not recomputed on set_mode",
                "Camera/viewport clamping uses stale window_width/height",
                "Cached surfaces tied to old size not invalidated on display mode switch"
              ],
              "constraints": [
                "UI/system-only; no sim determinism changes.",
                "Keep perf-safe: recompute only on mode change, not per-frame."
              ],
              "proposed_fix": [
                "On apply_display_settings: recompute any world-render target surfaces and scaling factors for the new screen size.",
                "Ensure window_width/height and any HUD-reserved margins are updated before rendering/world viewport calculations.",
                "If any cached surfaces depend on size, invalidate/rebuild them on resize."
              ],
              "acceptance_test": [
                "Manual (Windows): windowed→fullscreen expands world correctly",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "status": "assigned"
            },
            {
              "id": "WK7-BUG-006",
              "title": "Grey label text overlaps the top-right close 'X' button",
              "severity": "minor",
              "build_target": "BuildA_release_candidate",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "expected": "Close button is clean and readable; no overlapping text.",
              "actual": "Grey text overlays the X in the top right.",
              "suspected_area": [
                "game/ui/hud.py close button label rendering",
                "Button widget draws both icon and label in same rect"
              ],
              "proposed_fix": [
                "Remove the label for the X close button (icon-only), or move label away from the button rect.",
                "Ensure hitbox remains correct and no text draws atop icon."
              ],
              "acceptance_test": [
                "Manual: close X has no label overlap",
                "qa_smoke --quick PASS"
              ],
              "status": "assigned"
            },
            {
              "id": "WK7-BUG-007",
              "title": "Selected-building panel still grey/unskinned",
              "severity": "major",
              "build_target": "BuildA_release_candidate",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "expected": "Selected-building panel uses the same textured/9-slice skin as the rest of the UI.",
              "actual": "Selected-building panel remains grey.",
              "suspected_area": [
                "game/ui/hud.py right panel selection rendering path for buildings",
                "Panel style defaults not using textures for building summary panel"
              ],
              "proposed_fix": [
                "Ensure building selection panel uses textured Panel/ModalPanel style.",
                "If building summary uses a legacy path, route it through the new themed panel renderer."
              ],
              "acceptance_test": [
                "Manual: selecting a building shows a skinned panel",
                "qa_smoke --quick PASS"
              ],
              "status": "assigned"
            },
            {
              "id": "WK7-BUG-008",
              "title": "Boot crash: apply_display_settings -> clamp_camera uses self.zoom before initialization (AttributeError: zoom)",
              "severity": "blocker",
              "build_target": "BuildA_release_candidate",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "human_playtest",
              "evidence": [
                "Trace: game/engine.py __init__ calls apply_display_settings(); apply_display_settings calls clamp_camera(); clamp_camera reads self.zoom but GameEngine has no attribute zoom yet."
              ],
              "repro_steps": [
                "Run: python main.py",
                "Observe crash during GameEngine.__init__ with AttributeError: 'GameEngine' object has no attribute 'zoom'"
              ],
              "expected": "Game boots successfully in all display modes; clamp_camera can always read zoom safely.",
              "actual": "Crash on boot: AttributeError for self.zoom.",
              "suspected_area": [
                "game/engine.py initialization order for zoom/window sizing/camera",
                "apply_display_settings called too early in __init__ before zoom is set"
              ],
              "constraints": [
                "No simulation determinism changes; UI/system-only.",
                "Keep fix minimal and robust (no reliance on optional attributes)."
              ],
              "proposed_fix": [
                "Initialize self.zoom (and any related camera vars used by clamp_camera) before calling apply_display_settings in __init__.",
                "Alternatively, make clamp_camera resilient: treat missing zoom as 1.0 and avoid AttributeError.",
                "Re-run headless safety if applicable and ensure qa_smoke remains PASS."
              ],
              "acceptance_test": [
                "python main.py boots (no crash)",
                "python tools/qa_smoke.py --quick PASS"
              ],
              "status": "assigned"
            }
          ],
          "pm_integration_order": [
            "A) Agent 03 fixes WK7-BUG-008 (boot crash zoom init) immediately (release blocker).",
            "B) Agent 03 fixes WK7-BUG-005 (world not expanding on fullscreen switch).",
            "B) Agent 08 fixes WK7-BUG-006 and WK7-BUG-007 (close X overlap and building panel skin).",
            "C) Agent 11 runs final QA proof + screenshots and files any remaining bugs."
          ],
          "pm_next_actions_by_agent": {
            "03": {
              "status": "assigned_active",
              "asks": [
                "Fix WK7-BUG-008: ensure GameEngine initializes self.zoom (and any camera vars clamp_camera needs) before apply_display_settings() calls clamp_camera; boot must not crash.",
                "Fix WK7-BUG-005: ensure world/play area expands correctly when switching windowed→fullscreen/borderless (resize all world render targets + viewport/camera sizing).",
                "After fix: run `python tools/qa_smoke.py --quick` and perform a quick manual repro on Windows."
              ],
              "acceptance_criteria": [
                "Boot does not crash (no AttributeError on zoom)",
                "Windowed→Fullscreen expands world correctly",
                "qa_smoke --quick PASS"
              ]
            },
            "08": {
              "status": "assigned_active",
              "asks": [
                "Fix WK7-BUG-006: remove/move any label text overlapping the close X (icon-only preferred).",
                "Fix WK7-BUG-007: ensure selected-building panel uses the new textured skin (no grey legacy panel).",
                "After fixes: run `python tools/qa_smoke.py --quick` and capture updated screenshots if visuals changed."
              ],
              "acceptance_criteria": [
                "No close X overlap",
                "Selected-building panel is skinned",
                "qa_smoke --quick PASS"
              ]
            },
            "11": {
              "status": "assigned_active",
              "asks": [
                "After 03 and 08 land fixes, run `python tools/qa_smoke.py --quick`.",
                "Manual (Windows): verify windowed→fullscreen expansion, close X looks clean, selected-building panel skinned, and no interaction regressions.",
                "Capture final before/after screenshots for PM signoff."
              ],
              "acceptance_criteria": [
                "qa_smoke --quick PASS",
                "Manual checklist PASS or bug tickets filed",
                "Screenshots captured"
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03"],
            "do_not_send": ["02", "04", "05", "06", "07", "09", "10", "12", "13", "14"],
            "rationale": "Immediate release blocker: boot crash in GameEngine init (zoom not initialized). Assign to Agent 03 first; other fixes can proceed after boot is stable."
          }
        }
      }
    },
    "wk6-audio-buildmenu-fogbounties-explorexp": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk6_ranged_update+_dee12351.plan.md",
        "notes": "WK6: Audio + Build Menu + Fog Bounties + Ranger Exploration XP"
      },
      "rounds": {
        "wk6_r3": {
          "round_meta": {
            "prompt_set_id": "wk6_r3_finalization_ship_gate",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "visibility": "WK6 finalization: only send to agents with remaining work."
          },
          "pm_status_summary": {
            "overall_status": "Implementation complete; finalization required to ship",
            "gates": {
              "qa_smoke_quick": "PASS (current workspace)",
              "validate_assets_report": "WARN (missing audio files; expected until assets added)"
            },
            "remaining_ship_blockers": [
              "Audio files are now available under `.cursor/human_provided/`, but `assets/audio/{sfx,ambient}` is still empty until we copy/rename them into place.",
              "SFX format mismatch: human-provided SFX are mostly `.ogg`, but current AudioSystem SFX loader only tries `.wav` (needs `.ogg` fallback or conversion).",
              "Screenshot capture for new WK6 scenarios + gallery rebuild not yet performed."
            ]
          },
          "pm_decisions": {
            "audio_direction": {
              "tone": "cozy/peaceful (Majesty-like) (LOCKED)",
              "ambient_build_a": "single neutral loop (LOCKED)",
              "variants_build_b": "multiple variants with deterministic selection (LOCKED; Build A ships single files per event)"
            },
            "audio_contract_resolution_policy": "Pick ONE naming/file layout and align: AudioSystem, EVENT_CONTRACT.md, tools/assets_manifest.json, tools/validate_assets.py, and assets/ATTRIBUTION.md."
          },
          "pm_next_actions_by_agent": {
            "03": {
              "status": "needs_followup",
              "asks": [
                "Keep the current flat audio contract keys (building_place, building_destroy, bounty_place, bow_release, ui_click, ambient_loop). Do NOT change event names unless absolutely necessary.",
                "Update `game/audio/audio_system.py` to load SFX from `.wav` OR `.ogg` (human-provided SFX are mostly `.ogg`). Ambient already supports `.ogg/.wav` fallback.",
                "Ensure ambient actually plays in Build A (start loop on game start when audio enabled).",
                "Coordinate with Agent 12 so validator and manifest match the final contract."
              ]
            },
            "12": {
              "status": "needs_followup",
              "asks": [
                "Align `tools/assets_manifest.json` + `tools/validate_assets.py` with the final locked audio contract (support nested paths if chosen).",
                "Fix `building_menu_open` screenshot scenario apply-hook to open the new Build list panel (`building_list_panel`)."
              ]
            },
            "14": {
              "status": "needs_followup",
              "asks": [
                "Use `.cursor/human_provided/` as the source of truth for audio files (Kenney UI pack + OpenGameArt SFX + ambient wav).",
                "Copy/rename into `assets/audio/**` matching the flat contract keys (building_place, building_destroy, bounty_place, bow_release, ui_click, ambient_loop) with `.ogg` where appropriate.",
                "Ensure third_party proof files remain present and `assets/ATTRIBUTION.md` audio section stays accurate."
              ]
            },
            "11": {
              "status": "needs_followup",
              "asks": [
                "After above fixes land: re-run `python tools/qa_smoke.py --quick` and confirm PASS; run `python tools/validate_assets.py --report` and confirm no errors.",
                "Capture deterministic screenshots: `bounty_in_black_fog` and `building_menu_open` and confirm visuals (bounty visible on black fog; build menu visible).",
                "Quick manual interaction check: Build → click building row → place → ESC cancels."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "12", "14", "11"],
            "do_not_send": ["06", "08"],
            "rationale": "AI + UI implementations are complete and passing qa_smoke; remaining work is audio asset alignment/files + tooling scenario hook + QA verification."
          }
        },
        "wk6_audio_mid_r1": {
          "round_meta": {
            "prompt_set_id": "wk6_audio_mid_r1_followup_v1",
            "build_target": "BuildA_mid_sprint",
            "pm_authored_at_local": "2026-01-04T00:00:00",
            "visibility": "Send only to agents with remaining work for WK6 audio mid-sprint plan."
          },
          "pm_status_summary": {
            "overall_status": "Mid-sprint audio expansion IN PROGRESS (plumbing done; assets + a few event emissions + QA remain).",
            "plan_ref": ".cursor/plans/wk6_audio_mid_sprint_bd7d3c55.plan.md",
            "what_is_done": [
              "Audio visibility gate implemented (viewport + Visibility.VISIBLE) and wired from engine (Agent 03).",
              "Expanded audio contract + AudioSystem mapping/cooldowns landed (Agent 03).",
              "Tooling updated: tools/assets_manifest.json expanded to include new SFX keys; validator supports .wav/.ogg (Agent 12).",
              "Base audio files for the original flat contract are present under assets/audio/ (building_place/building_destroy/bounty_place/bow_release/ui_click + ambient_loop)."
            ],
            "remaining_work": [
              "Emit a real bounty-claim event for AudioSystem: currently bounties are claimed but no `bounty_claimed` event is emitted with a position, so the new sound key never triggers.",
              "Add SFX files for newly mapped keys (at minimum: melee_hit, enemy_death, lair_cleared, bounty_claimed; optional: ui_confirm/ui_error/purchase/hero_hired).",
              "Update assets/ATTRIBUTION.md to include any newly added audio files in the existing Kenney/OpenGameArt entries.",
              "QA verification pass focused on audibility rule (on-screen+VISIBLE only) + gates."
            ],
            "gates": {
              "qa_smoke_quick": "PASS (per Agent 12 evidence in wk6_audio_mid_r1; re-run after remaining changes)",
              "validate_assets_report": "PASS w/ WARN until all new SFX keys have files present"
            },
            "locked_decisions": {
              "audibility_rule": "World SFX only if inside camera viewport AND tile is Visibility.VISIBLE (LOCKED). UI events are not fog-gated.",
              "tone": "cozy/peaceful (Majesty-like) (LOCKED)",
              "ambient_build_a": "single neutral loop (LOCKED)",
              "variants_build_b": "multiple variants with deterministic selection (LOCKED; Build A ships single files per key)"
            }
          },
          "pm_next_actions_by_agent": {
            "03": {
              "status": "needs_followup",
              "asks": [
                "Add `bounty_claimed` event emission when bounties are claimed (both explore proximity-claim and attack_lair completion payout). Include `x,y` (world coords) for visibility gating.",
                "Keep the audibility rule locked: world sounds require viewport+Visibility.VISIBLE. Do not loosen gating for combat/building/bounty world events.",
                "After emitting bounty_claimed, ensure AudioSystem receives those events (same pattern as combat events) with set_listener_view() before emit_from_events()."
              ]
            },
            "14": {
              "status": "needs_followup",
              "asks": [
                "Pick and copy/rename CC0 assets from `.cursor/human_provided/` into `assets/audio/sfx/` for the expanded keys (minimum: melee_hit, enemy_death, lair_cleared, bounty_claimed). Use flat filenames matching sound keys (e.g., `melee_hit.ogg`).",
                "Keep selections cozy/peaceful where possible (avoid jarring SFX).",
                "Update `assets/ATTRIBUTION.md` to include the new file locations under the existing Kenney/OpenGameArt entries (no new license families expected)."
              ]
            },
            "12": {
              "status": "needs_verification_only",
              "asks": [
                "After Agent 14 adds the new SFX files, re-run `python tools/validate_assets.py --report` and confirm warnings drop accordingly.",
                "If any naming mismatch occurs, update `tools/assets_manifest.json` (source-of-truth for validator) to match the locked EVENT_CONTRACT sound keys."
              ]
            },
            "11": {
              "status": "needs_followup",
              "asks": [
                "Run gates after changes: `python tools/qa_smoke.py --quick` (must PASS) and `python tools/validate_assets.py --report` (0 errors; warns ideally 0 for new keys once files are present).",
                "Manual 5-minute acceptance focused on audibility rule: verify a visible on-screen melee hit plays; off-screen or in fog does not; bounty claim plays only if the claim happens on-screen+VISIBLE.",
                "If any sound plays from off-screen actions, treat as a release blocker for this mid-sprint."
              ]
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": ["03", "14", "11", "12"],
            "do_not_send": ["06", "08", "09", "10", "13", "02", "04", "05", "07"],
            "rationale": "Only remaining work is audio asset mapping + one missing bounty_claimed emission + verification/tooling confirmation. No AI/UI/art/perf changes required right now."
          }
        },
        "wk6_audio_mid_r2_closeout": {
          "round_meta": {
            "prompt_set_id": "wk6_audio_mid_r2_closeout_v1",
            "build_target": "BuildA_mid_sprint",
            "pm_authored_at_local": "2026-01-04T00:00:00",
            "visibility": "Closeout: no further agent action required unless we choose to expand to optional Build B sound keys."
          },
          "pm_status_summary": {
            "overall_status": "WK6 audio mid-sprint COMPLETE (Build A).",
            "plan_ref": ".cursor/plans/wk6_audio_mid_sprint_bd7d3c55.plan.md",
            "done": [
              "Visibility-gated audio is implemented (viewport + Visibility.VISIBLE).",
              "bounty_claimed events are emitted with x,y and routed to AudioSystem (visibility-gated).",
              "Minimum new SFX files exist: melee_hit.ogg, enemy_death.ogg, lair_cleared.ogg, bounty_claimed.ogg.",
              "Attribution updated to include new audio files under OpenGameArt entry.",
              "QA reports qa_smoke --quick PASS and validate_assets --report PASS (remaining 4 warnings are optional Build B keys)."
            ],
            "remaining_optional_polish": [
              "Add optional SFX files for: hero_hired, purchase, ui_confirm, ui_error (would drop validate_assets warnings from 4 to 0).",
              "Human 5-minute interactive playtest to confirm 'if you can't see it, you can't hear it' feels correct in practice (code + QA already indicate correctness)."
            ]
          },
          "pm_next_actions_by_agent": {
            "none_required": {
              "status": "complete",
              "notes": "No further agent assignments needed for Build A closeout."
            }
          },
          "pm_send_list_minimal": {
            "send_to_agents": [],
            "do_not_send": ["03", "11", "12", "14", "06", "08", "09", "10", "13", "02", "04", "05", "07"],
            "rationale": "Closeout entry only. Optional polishing can be scheduled as Build B later."
          }
        }
      }
    },
    "wk1-broad-sweep-midweek-endweek": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
        "notes": "PM synthesis + responses to all agents for this sprint live here."
      },
      "rounds": {
        "wk1_r1": {
          "round_meta": {
            "prompt_set_id": "wk1_prompts_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "visibility": "All agents should read this round entry for PM decisions + follow-ups."
          },
          "pm_decisions": {
            "build_split": {
              "build_a_midweek": [
                "FS-1: Hero intent + last decision inspect (UI-visible)",
                "FS-2: Bounty clarity: responders + attractiveness (UI-visible)",
                "QA/Tools gates required: qa_smoke --quick (includes determinism guard) must pass"
              ],
              "build_b_endweek": [
                "FS-3: Early pacing guardrail (tip + optional starter objective) plus tuning polish",
                "Perf/stability pass + any follow-up QA tightening"
              ]
            },
            "intent_taxonomy": [
              "idle",
              "pursuing_bounty",
              "shopping",
              "returning_to_safety",
              "engaging_enemy",
              "defending_building",
              "attacking_lair"
            ],
            "decision_history_policy": "P0 = store ONLY the last decision per hero (no ring buffer) to minimize perf/UI risk.",
            "bounty_attractiveness_policy": "Build A uses a GLOBAL/hero-agnostic tier (low/med/high) computed deterministically. Per-hero scoring can be revisited later.",
            "help_overlay_default": "Default OFF (clean HUD) with a persistent hint (e.g., 'F3: Help'). Revisit after onboarding feedback.",
            "tier_color_language": "Low=gray, Med=gold, High=green (value-contrast first; must remain readable under fog-of-war).",
            "determinism_gate": "Mandatory in Build A/B: no wall-clock time usage inside sim logic; no global random.* usage for sim; stable ordering/tie-breaks."
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: create `docs/sprint/wk1_acceptance_checklist.md` as the single QA signoff doc for Build A and Build B.",
                "Decision: FS-3 (early pacing guardrail) is Build B only (but Build A may include a non-invasive HUD help hint if it doesn't change sim state).",
                "Decision: lock full intent taxonomy for WK1 (see pm_decisions.intent_taxonomy)."
              ],
              "asks": [
                "Please draft the 1-page checklist with two sections: Build A gates and Build B gates.",
                "Include explicit 'qa_smoke --quick must pass' and 'mock/no-llm manual smoke (10 min)' in both."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted direction: thin contracts are the right move; UI must only read hero/bounty fields (no AI imports).",
                "Decision: attractiveness tier is global for Build A (your recommendation accepted).",
                "Guardrail: any 'age since decision' must use sim-time/ticks only (no wall-clock)."
              ],
              "asks": [
                "If you already added `game/sim/contracts.py`, please ensure it has zero cyclical imports and minimal serialization helpers.",
                "Coordinate with Agent 8 to ensure UI reads only the contract fields."
              ]
            },
            "04": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: determinism guard must be a release gate this week.",
                "Decision: determinism guard is mandatory in `tools/qa_smoke.py --quick` (not optional).",
                "Decision: UI should display sim-time-based ages for consistency (avoid 'wall-clock vs sim-time' confusion)."
              ],
              "asks": [
                "If a `tools/determinism_guard.py` exists/gets added, keep it focused on sim-code directories only (avoid false positives in pure UI/graphics).",
                "Please provide a short list of forbidden patterns (time.time, pygame ticks in sim, random.* in sim) to add to the checklist doc."
              ]
            },
            "05": {
              "status": "acknowledged_with_risk_review",
              "pm_reply": [
                "Your completion-based `attack_lair` bounty payout is high-leverage and aligns with Majesty; accepted in principle, but we must verify it's stable and doesn't break other bounty types.",
                "Decision: we will NOT hard-commit STARTING_GOLD=1500 without a quick manual feel test; treat it as a tuning candidate.",
                "Decision: modifier-key bounty tiers are acceptable for WK1 only if Agent 8 adds a minimal HUD hint; otherwise keep a single default bounty reward for Build A."
              ],
              "asks": [
                "Please list exactly which files changed and confirm `qa_smoke --quick` passes after your changes.",
                "If typed bounties beyond attack_lair exist, ensure their claim semantics remain correct (no accidental proximity-claim)."
              ]
            },
            "06": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: store only last decision; record on meaningful transitions only; keep reason strings short.",
                "Decision: show intent + last decision in the main hero panel for Build A (not debug-only).",
                "Decision: use `source` values but keep them simple (`llm`, `mock`, `fallback`, `heuristic`, `system`)."
              ],
              "asks": [
                "Please align with Agent 3's contract keys/types to avoid schema drift.",
                "If you add validation/allowlist logic, ensure fallback behavior is deterministic and never blocks the sim."
              ]
            },
            "07": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: pacing nudge via sim-time with HUD tip and optional starter lair bounty fits FS-3 and should land in Build B.",
                "Guardrail: auto-bounty must never trigger if the player has placed any bounty; and must charge economy (no freebies)."
              ],
              "asks": [
                "Please ensure the nudge is behind a small config/flag so QA can force/disable it.",
                "Coordinate with Agent 5 on `attack_lair` completion semantics so the starter bounty reliably teaches lair clearing."
              ]
            },
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: copy/layout rules; keep bounty world labels compact (R:N + tier) and truncate hero reason strings.",
                "Decision: help overlay default OFF, but add an always-visible hint (F3: Help).",
                "Decision: attractiveness tier is global/simple for Build A."
              ],
              "asks": [
                "Please ensure UI additions avoid per-frame allocations; cache formatted strings where possible.",
                "Add a minimal HUD hint for bounty tier modifiers only if we ship the tiered controls in WK1."
              ]
            },
            "09": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: procedural/cached icon approach is great as a non-blocking placeholder.",
                "Decision: go with value-contrast-first; tier colors Low=gray, Med=gold, High=green."
              ],
              "asks": [
                "If implemented, keep icon generation cached and ensure nearest-neighbor scaling only.",
                "Defer always-visible composite badges if clutter becomes an issue; prefer hover/selection if needed."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: prioritize caching UI overlay surfaces and cadenced refresh; we will treat O(H*B) scans as a regression risk.",
                "Decision: no hard perf budget number this week; instead record a baseline from the headless benchmark and prevent regressions."
              ],
              "asks": [
                "Please document the benchmark command(s) and where outputs/CSV go (if applicable).",
                "After responders/attractiveness land, add a benchmark profile that includes bounties to quantify scoring cost."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: qa_smoke --quick becomes mandatory pre-merge for Build A and Build B.",
                "Decision: duplicate hero-name collisions remain a warning for now (not a failing condition) unless they break behavior determinism.",
                "Good call on replacing wall-clock + global RNG usage; that aligns with the determinism gate."
              ],
              "asks": [
                "Please ensure QA assertions remain non-flaky by using the deterministic scenario preset (so tuning doesn't break the gate).",
                "If you touched AI modules, coordinate with Agent 6 to ensure intent/decision logging semantics match."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: dedicated deterministic `intent_bounty` scenario is exactly what we need for fast iteration.",
                "Decision: responders field enforcement can wait until responder tracking is implemented; for now, require claim evidence and non-empty intent.",
                "Decision: hero-name duplicates remain warning-only for now."
              ],
              "asks": [
                "Please add the command(s) to the sprint checklist doc so every agent runs the same gate.",
                "After responder tracking lands, tighten QA to assert explicit responder counts > 0 in the scenario."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: patch note structure; we will only publish verified bullets that are merged + QA-confirmed.",
                "Decision: public labeling will be Prototype semantic version bumps (e.g., v1.2.1 for Build A, v1.2.2 for Build B) unless we decide otherwise later.",
                "Yes: each post should include a short reminder about mock/no-LLM mode (no API keys required)."
              ],
              "asks": [
                "After Build A code merges, update the draft with exact shipped bullets + known issues from QA.",
                "After Build B merges, do the same and include the early pacing guardrail description."
              ]
            }
          },
          "pm_integration_order": [
            "Merge/land thin contracts (Agent 3) and hero intent/last decision logging semantics (Agent 6).",
            "Land bounty responders + global attractiveness tier (Agent 3/8).",
            "Land UI display for hero intent/last decision and bounty overlay (Agent 8) + optional icons (Agent 9).",
            "Ensure qa_smoke --quick + deterministic scenario gate is green (Agents 11/12) before tagging Build A.",
            "Land early pacing guardrail (Agent 7) + any tuning (Agent 5) for Build B, then re-run QA/perf checks."
          ],
          "pm_open_questions_resolved": [
            "FS-3 split: Build B only.",
            "Intent taxonomy: lock full list for WK1.",
            "Decision history: last-decision only.",
            "Attractiveness: global/simple tier for Build A."
          ]
        },
        "wk1_r2": {
          "round_meta": {
            "prompt_set_id": "wk1_final_changes_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final changes round based on human playtest feedback. Only agents with remaining issues are contacted."
          },
          "bug_tickets": [
            {
              "id": "WK1-BUG-001",
              "title": "Hero panel 'Last decision' stays '(none yet)' in --no-llm play",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Select a hero after ~60s of sim time",
                "Observe 'Last decision' line remains '(none yet)'"
              ],
              "expected": "Hero panel shows last decision (action + reason + age) after a hero has taken any meaningful action (bounty pursue, engage enemy, retreat, shop, etc.).",
              "actual": "Hero panel always shows '(none yet)' in no-LLM mode.",
              "evidence": "Human playtest report; QA smoke passes but doesn't validate hero panel text.",
              "suspected_area": [
                "game/ui/hud.py (hero panel formatting currently reads LLM-only fields)",
                "game/entities/hero.py (source of truth: hero.last_decision / hero.get_intent_snapshot())"
              ],
              "constraints": [
                "Use sim-time for decision age display (no wall-clock).",
                "Avoid per-frame allocations; cache formatted text/surfaces if needed."
              ],
              "proposed_fix": [
                "Update HUD hero panel to read hero.get_intent_snapshot() or hero.last_decision (HeroDecisionRecord).",
                "Keep fallback behavior safe if fields are missing (placeholder OK early)."
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "After 30–90s, select hero and verify Last decision is not '(none yet)' for at least one hero",
                "Run: python tools/qa_smoke.py --quick (must remain PASS)"
              ],
              "integration_notes": {
                "depends_on": [
                  "Agent 03 contract field names (hero intent/decision snapshot) if needed"
                ],
                "risk_notes": [
                  "UI currently uses legacy LLM-only fields; ensure new code path works in all modes"
                ]
              },
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-002",
              "title": "Bounty placement is unclear to players (controls + tiers not discoverable)",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Try to place a bounty without reading console help",
                "Unclear how to place bounty and where it will land"
              ],
              "expected": "Player can discover how to place bounties quickly (key + placement behavior + cost).",
              "actual": "Player doesn't know the control path to place a bounty.",
              "suspected_area": [
                "HUD help overlay copy",
                "In-game tip messaging"
              ],
              "constraints": [
                "Keep HUD minimal; avoid spam",
                "Explain tiers only if we keep tiered bounties for WK1"
              ],
              "proposed_fix": [
                "Update help overlay to explicitly say: 'B: place bounty at mouse cursor (Shift/Ctrl for tiers)'",
                "Add a one-time toast hint on first minute if no bounty placed (already present tip text; ensure it’s visible and accurate)"
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "Press F3 to view help; confirm bounty instructions are explicit",
                "Press B with mouse over ground; confirm bounty appears at cursor and gold decreases"
              ],
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-003",
              "title": "QA smoke reports bounty responder attribute missing (contract mismatch / UI-only field names)",
              "severity": "minor",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "qa_smoke",
              "repro_steps": [
                "Run: python tools/qa_smoke.py --quick",
                "Observe output includes: bounty_responder_attr_present=False"
              ],
              "expected": "Bounty objects expose stable responder/tier fields per contract (so QA can assert them reliably).",
              "actual": "Responder/tier appears to be computed as UI-only fields (QA can’t detect contract fields).",
              "evidence": "qa_smoke output: bounty_responder_attr_present=False while scenario passes.",
              "suspected_area": [
                "game/systems/bounty.py field naming (ui_responders vs contract fields)",
                "game/sim/contracts.py expectations"
              ],
              "constraints": [
                "Deterministic computation only; stable ordering",
                "Avoid O(N_heroes*N_bounties) per-tick if possible"
              ],
              "proposed_fix": [
                "Align bounty responder/tier fields with contract names (e.g., responders + attractiveness_tier) while preserving UI caches",
                "Update QA detection to check the stable contract fields"
              ],
              "acceptance_test": [
                "Run: python tools/qa_smoke.py --quick and confirm bounty_responder_attr_present=True",
                "Run: python main.py --no-llm and verify bounty overlay still renders and remains performant"
              ],
              "status": "assigned"
            }
          ],
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Please address WK1-BUG-003 (contract mismatch): ensure bounties expose stable responder/tier fields per contract (responders + attractiveness_tier, optional score). Keep existing UI caches if needed. Update/verify qa_smoke reports bounty_responder_attr_present=True. Gate: python tools/qa_smoke.py --quick must PASS."
            },
            "08": {
              "status": "requested",
              "message": "Please address WK1-BUG-001 and WK1-BUG-002: hero panel should display last decision in --no-llm by reading hero.last_decision / hero.get_intent_snapshot (not LLM-only fields). Also update help/UX so bounty placement is discoverable: 'B places bounty at mouse cursor' and mention Shift/Ctrl tiers only if we keep tiered bounties. Provide before/after screenshots if possible. Gate: python tools/qa_smoke.py --quick must PASS."
            }
          }
        },
        "wk1_r3": {
          "round_meta": {
            "prompt_set_id": "wk1_wrap_up_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final wrap-up round. Only agents with blockers/late-breaking issues should respond."
          },
          "pm_instruction": "If you have last-minute blockers or need cross-agent coordination to finish WK1 Build A, log them under your agent file in this round and tag the owner(s). If no blockers, do not respond.",
          "status": "resolved",
          "pm_wrapup_notes": [
            "Agent 05 raised a Build A scope-condition blocker: (1) tiered bounty placement requires a HUD hint; (2) STARTING_GOLD=1500 requires explicit approval.",
            "Resolved: Agent 08 shipped explicit help-overlay copy + early-session hint for bounty tiers/placement (wk1_r2).",
            "Resolved: Human playtest feedback confirmed gold tightness feels good; approve STARTING_GOLD=1500 for Prototype v1.2.1 (Build A).",
            "Gate status: python tools/qa_smoke.py --quick => PASS (determinism_guard PASS; bounty_responder_attr_present=True)."
          ],
          "pm_message_for_agent_05": "Blocker resolved. Build A ships tiered bounty placement WITH the new HUD/help hint from Agent 08. STARTING_GOLD=1500 is explicitly approved for Build A based on human playtest feedback (gold tightness feels good). No further action needed."
        }
      }
    },
    "wk2-hero-polish-ai-sprites": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk2-hero-polish-ai-sprites_5318e148.plan.md",
        "notes": "WK2 PM hub: Round-based delegation for hero AI anti-jank + core hero sprite pipeline."
      },
      "rounds": {
        "wk2_r1": {
          "round_meta": {
            "prompt_set_id": "wk2_kickoff_r1_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 1 is the async meeting stage: acceptance criteria + contracts + deterministic repro/QA harness. Some non-active agents responded due to accidental broadcast; they are stood down below."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "02_GameDirector_ProductOwner",
                "03_TechnicalDirector_Architecture",
                "06_AIBehaviorDirector_LLM",
                "08_UX_UI_Director",
                "09_ArtDirector_Pixel_Animation_VFX",
                "11_QA_TestEngineering_Lead",
                "12_ToolsDevEx_Lead"
              ],
              "consult_only_agents": [
                "04_NetworkingDeterminism_Lead",
                "05_GameplaySystemsDesigner",
                "10_PerformanceStability_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "silent_agents": [
                "07_ContentScenarioDirector"
              ],
              "note": "Only Active agents should respond in wk2_r2 unless PM explicitly pings others."
            },
            "build_split": {
              "build_a_midweek": [
                "No combat while inside buildings (hard gate)",
                "Reduced oscillation / target thrash (commitment window + hysteresis)",
                "Deterministic stuck detection + deterministic recovery (repath/adjacent/goal reset)",
                "Debug-only visibility for stuck/unstuck counters"
              ],
              "build_b_endweek": [
                "4-class hero sprites (warrior/ranger/rogue/wizard) across idle/walk/attack/hurt/inside",
                "Animation readability pass (no jitter/flicker; state matches gameplay state)",
                "Final stability/perf pass"
              ]
            },
            "contracts_locked_from_agent_03": {
              "combat_gating": [
                "Hero.can_attack: bool",
                "Hero.attack_blocked_reason: str (optional)",
                "Rule: if hero.is_inside_building is True => can_attack=False"
              ],
              "stuck_signals": [
                "Hero.stuck_active: bool",
                "Hero.stuck_since_ms: int|null (sim-time)",
                "Hero.last_progress_ms: int (sim-time)",
                "Hero.unstuck_attempts: int",
                "Hero.stuck_reason: str",
                "Hero.get_stuck_snapshot(now_ms=None)->dict"
              ],
              "determinism_guardrails": [
                "Use game.sim.timebase.now_ms() for all timeouts/ages; no wall-clock",
                "No random.* in sim; stable ordering for tie-breaks"
              ]
            },
            "acceptance_thresholds_locked": {
              "stuck_displacement_tiles_threshold": 0.25,
              "stuck_time_s": 2.0,
              "unstuck_max_attempts_per_target": 3,
              "unstuck_backoff_s": 0.5,
              "target_commit_window_s": 1.5,
              "bounty_commit_window_s": 2.5,
              "oscillation_note": "Override commitment immediately for: target died/invalid, bounty removed/claimed, target unreachable."
            },
            "qa_assertion_policy": {
              "inside_combat_gate": "P0 assert: no damage while inside buildings. P1 (if available): also assert no 'attack event/animation trigger' while inside.",
              "stuck_recovery_gate": "Deterministic scenario must show >=1 stuck detection and >=1 recovery attempt OR prove no hero remains stuck >5s in repro.",
              "gate_commands": [
                "python tools/qa_smoke.py --quick",
                "python main.py --no-llm",
                "python main.py --provider mock"
              ]
            },
            "ui_policy": {
              "stuck_indicators": "Debug-only for Build A (avoid player-facing clutter).",
              "inside_state_visibility": "Show inside-building status in selected hero panel if available (can be debug-only if needed)."
            },
            "logging_conventions": {
              "prompt_set_id_canonical": "wk2_kickoff_r1_v1",
              "note": "Some agents logged prompt_set_id=wk2_prompts_v1; acceptable. Use canonical IDs going forward (wk2_exec_r2_v1, wk2_wrap_r3_v1)."
            }
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Acceptance criteria are locked as written (inside-combat gate, oscillation limits, stuck recovery, animation readability for Build B).",
                "PM decision: debug visibility for stuck is debug-only in Build A."
              ],
              "asks": [
                "No further action in Round 2 unless a vision/feel dispute appears."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Contract surface is accepted and treated as LOCKED for WK2 (Hero.can_attack + stuck snapshot fields).",
                "Proceed to Round 2 as contract reviewer/signoff; avoid import cycles (UI must not import AI)."
              ],
              "asks": [
                "In Round 2, please review any PRs touching combat/hero fields for contract compliance and determinism pitfalls.",
                "Pick a single location for tunables (constants module) that AI/QA can reference without cycles."
              ]
            },
            "06": {
              "status": "assigned",
              "pm_reply": [
                "Greenlight for Build A implementation after contracts: implement inside-combat gating at the authoritative attack execution site and add anti-oscillation + stuck recovery in BasicAI (sim-time based).",
                "Use the exact thresholds in pm_decisions.acceptance_thresholds_locked unless you find a measured reason to adjust."
              ],
              "asks": [
                "Do P0 in this order: (1) combat gating (no damage while inside), (2) deterministic stuck recovery + counters, (3) anti-oscillation commitment/hysteresis.",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS and the deterministic repro scenario (once Tools/QA land it)."
              ]
            },
            "08": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with minimal debug-only stuck indicator UI reading Agent 3 contract fields (get_stuck_snapshot) and show inside status when possible.",
                "Keep additions cache-friendly and rate-limited; do not add player-facing clutter for Build A."
              ],
              "asks": [
                "Implement Build A HUD/debug reads after Agent 6/3 fields exist; keep debug-only by default.",
                "Coordinate with QA on how to toggle debug mode for verification (if needed)."
              ]
            },
            "09": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with Build B sprite production in the specified folder conventions; no Build A dependency.",
                "Frame count guidance accepted; ensure pixel-crisp export (nearest-neighbor, no smoothing)."
              ],
              "asks": [
                "In Round 2, confirm whether any loader changes are required; if not, remain assets+docs only."
              ]
            },
            "11": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to wire deterministic WK2 QA gates once Agent 12 lands scenarios: add profiles into qa_smoke --quick and fail on contract-driven assertions.",
                "PM decision: P0 for inside-combat is 'no damage while inside'; treat 'no attack animation/events' as P1 if instrumentation exists."
              ],
              "asks": [
                "Define 'attack event' for QA as damage application first; add 'attack attempted while inside' counter only if easy and deterministic.",
                "Keep tests non-flaky; rely on deterministic scenario, not emergent sim."
              ]
            },
            "12": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to implement deterministic scenarios in observe_sync: hero_stuck_repro (required) and inside_combat_repro (nice-to-have if time).",
                "Confirm prompt_set_id: use wk2_kickoff_r1_v1 (already fine if your log says wk2_prompts_v1)."
              ],
              "asks": [
                "Implement scenario setup that forces repeatable stalls (do not rely on emergent pathing randomness).",
                "Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks; then coordinate with Agent 11 to assert them in qa_smoke."
              ]
            },
            "04": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—determinism guidance is noted. You are consult-only for WK2; no further action unless pinged."
              ],
              "asks": []
            },
            "05": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—tuning defaults captured. You are consult-only for WK2; no further action unless pinged (we may ask for tuning review after repro harness exists)."
              ],
              "asks": []
            },
            "07": {
              "status": "stand_down_silent",
              "pm_reply": [
                "You were not on the active roster for WK2. Please stand down unless pinged for a specific scenario/content hook later."
              ],
              "asks": []
            },
            "10": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—perf gate suggestions captured. You are consult-only for WK2; no further action unless a perf regression appears."
              ],
              "asks": []
            },
            "13": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—release scaffolds are fine. You are consult-only for WK2; no further action until end-of-sprint when we draft/post Build A/B notes."
              ],
              "asks": []
            }
          },
          "pm_integration_order": [
            "Lock contracts and field names (Agent 3) — treat as API for WK2.",
            "Tools deterministic repro scenario (Agent 12) + QA assertions wiring (Agent 11).",
            "Combat gating (Agent 6) + stuck recovery (Agent 6) validated via scenario + qa_smoke.",
            "Anti-oscillation guardrails (Agent 6) validated via scenario + manual smoke.",
            "Debug-only stuck/inside UI reads (Agent 8) once fields exist; keep allocations low.",
            "Build A tag once qa_smoke --quick is green and 10-minute manual smoke in --no-llm and --provider mock passes.",
            "Build B: sprite asset drop (Agent 9) + animation readability pass + final QA."
          ],
          "pm_open_questions_resolved": [
            "Stuck/unstuck indicators are debug-only for Build A.",
            "Inside-combat QA asserts P0: no damage while inside; P1: no attack event/animation if instrumentation exists.",
            "Canonical prompt_set_id naming for WK2 rounds going forward."
          ]
        },
        "wk2_r2": {
          "round_meta": {
            "prompt_set_id": "wk2_exec_r2_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 2 execution: implement against locked contracts, wire deterministic repro + qa_smoke gates, and prepare Build A."
          },
          "pm_instruction": "WK2 Round 2 (wk2_r2): Execute. Only ACTIVE agents should respond. Implement against Agent 3 locked contracts and the acceptance thresholds in wk2_r1 pm_decisions. Provide evidence (commands + PASS) and keep changes deterministic/perf-safe. Consult-only agents do not respond unless pinged.",
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Round 2: treat your wk2_r1 contract surface as LOCKED. Please review upcoming PRs for contract compliance + determinism pitfalls (sim-time only, no random.*, stable ordering). Also pick a single tunables location (constants module) that AI/QA can read without cycles and note it in your log."
            },
            "06": {
              "status": "requested",
              "message": "Round 2: implement Build A P0. Order: (1) inside-combat gating at authoritative attack/damage site using `hero.can_attack`/`is_inside_building` (no damage while inside), (2) stuck detection + deterministic recovery + counters per Agent 3 fields (sim-time), (3) anti-oscillation commitment window + hysteresis using locked thresholds. Evidence: `python tools/qa_smoke.py --quick` PASS + deterministic repro scenario run once Tools lands."
            },
            "08": {
              "status": "requested",
              "message": "Round 2: implement minimal debug-only UI reads: selected hero panel shows inside status and stuck snapshot (reason, attempts, time stuck) by reading Agent 3 contract fields (`get_stuck_snapshot`). Keep rate-limited and cache-friendly; no player-facing clutter. Ensure `python tools/qa_smoke.py --quick` stays PASS."
            },
            "09": {
              "status": "requested",
              "message": "Round 2: proceed with Build B prep (assets+docs only): confirm folder conventions match loader, create/extend docs for sprite pipeline, and begin producing frames for the 4 classes (idle/walk/attack/hurt/inside). No Build A dependencies."
            },
            "11": {
              "status": "requested",
              "message": "Round 2: after Agent 12 lands deterministic scenarios, wire them into `python tools/qa_smoke.py --quick` with non-flaky assertions. P0: inside-combat asserts no damage while inside. Stuck: assert >=1 stuck detection and >=1 recovery attempt OR bounded max stuck time in scenario. Keep oscillation checks optional/report-only until thresholds are proven stable."
            },
            "12": {
              "status": "requested",
              "message": "Round 2: implement deterministic scenarios in `tools/observe_sync.py`: required `--scenario hero_stuck_repro` (forces repeatable stall) and optional `--scenario inside_combat_repro` (hero inside with enemies). Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks. Coordinate with Agent 11 to assert these in `qa_smoke --quick`."
            }
          },
          "pm_round2_results": {
            "high_level_status": "mostly_complete",
            "what_landed": [
              "Agent 06 implemented Build A P0: inside-combat damage gating via Hero.can_attack + CombatSystem hard gate; deterministic stuck detection/recovery; anti-oscillation commitment windows. Gates: qa_smoke PASS + boot smoke OK.",
              "Agent 08 implemented debug-only HUD visibility for inside state + stuck snapshot + attack blocked reason; added game_state.debug_ui gating and caching. Gate: qa_smoke PASS.",
              "Agent 03 added canonical tunables module `game/sim/hero_guardrails_tunables.py` for locked thresholds; qa_smoke PASS.",
              "Agent 12 added deterministic observe scenarios: hero_stuck_repro (required) and inside_combat_repro (optional), plus counters; qa_smoke PASS.",
              "Agent 09 completed Build B prep (docs + folder skeletons) and fixed a HUD init crash discovered during manual smoke; qa_smoke PASS."
            ],
            "still_pending_before_tagging_build_a": [
              "Agent 11 must wire Agent 12 scenarios into `python tools/qa_smoke.py --quick` with non-flaky assertions (hero_stuck_repro required).",
              "PM/human must complete the 10-minute interactive manual smoke in both modes: `python main.py --no-llm` and `python main.py --provider mock` (player-visible checks: no damage while inside, stuck recovery observed at least once in the repro, reduced oscillation)."
            ],
            "integration_risks": [
              "Potential merge conflict risk: `game/ui/hud.py` was modified by Agents 08 and 09 in wk2_r2; ensure Agent 09's HUD init crash fix is preserved when integrating Agent 08's debug UI additions.",
              "Drift risk: Agent 06 should import locked thresholds from `game.sim.hero_guardrails_tunables` (avoid duplicating constants)."
            ]
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Thanks—gate PASS evidence recorded and no vision disputes. We still need the interactive 10-minute manual smoke before tagging Build A."
              ],
              "asks": []
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Approved: `game/sim/hero_guardrails_tunables.py` is now the single source of truth for thresholds. Great call."
              ],
              "asks": [
                "Please sanity-review any final merges for contract compliance and ensure no cycles were introduced by the new tunables module."
              ]
            },
            "06": {
              "status": "in_review",
              "pm_reply": [
                "Excellent—core Build A P0 is implemented and gates are green.",
                "Please switch any hard-coded thresholds to import from `game.sim.hero_guardrails_tunables` so AI/QA/tools cannot drift."
              ],
              "asks": [
                "Run Agent 12's deterministic scenarios after integration and paste the counter lines into your log: `hero_stuck_repro` (required) and `inside_combat_repro` (optional)."
              ]
            },
            "08": {
              "status": "in_review",
              "pm_reply": [
                "Approved direction: debug-only visibility + caching + game_state.debug_ui gating.",
                "Important: coordinate merge with Agent 09 since both touched `game/ui/hud.py`."
              ],
              "asks": [
                "When integrating, ensure the HUD init crash fix from Agent 09 is preserved alongside your debug UI changes."
              ]
            },
            "09": {
              "status": "in_review",
              "pm_reply": [
                "Thanks—Build B pipeline prep is on track.",
                "Note: you fixed a HUD crash (helpful), but for process: please ensure any cross-domain fixes are clearly logged (which you did) and call out merge-risk if another agent touched the same file."
              ],
              "asks": [
                "When integrating with Agent 08 HUD work, double-check `hud.py` keeps your messages init fix."
              ]
            },
            "11": {
              "status": "action_required",
              "pm_reply": [
                "Agent 12 has now landed `hero_stuck_repro` and `inside_combat_repro`. Please wire `hero_stuck_repro` into `tools/qa_smoke.py --quick` as a failing profile with deterministic assertions."
              ],
              "asks": [
                "Update `tools/qa_smoke.py` to run the scenario and assert either (a) stuck_events>=1 AND unstuck_attempts>=1, or (b) bounded max_stuck_ms (per plan).",
                "Define the inside-combat P0 check as 'no damage while inside' (as previously locked).",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS after wiring."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Great—deterministic repro scenarios and counters are exactly what we needed.",
                "Thanks for keeping assertions conditioned to field presence to avoid flake during rollout."
              ],
              "asks": [
                "Please coordinate with Agent 11 on the exact counter names being asserted in qa_smoke (stuck_events, unstuck_attempts, max_stuck_ms, inside_attack_blocks)."
              ]
            }
          },
          "status": "in_review"
        },
        "wk2_r3": {
          "round_meta": {
            "prompt_set_id": "wk2_wrap_r3_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 3 is final sync + blockers only. Goal: close remaining automation gaps and declare Build A ready for human manual smoke + tag."
          },
          "pm_decisions": {
            "automation_status": [
              "Agent 11 has wired `hero_stuck_repro` into `python tools/qa_smoke.py --quick` (now a mandatory failing profile).",
              "Agent 06 has imported locked thresholds from `game.sim.hero_guardrails_tunables` (no duplicated constants).",
              "Agents 08+09 confirmed `game/ui/hud.py` integration preserves both the HUD init crash fix and debug-only stuck/inside indicators.",
              "Agent 12 confirmed the stable counter keys/format for scenario parsing."
            ],
            "build_a_readiness": "Automated gates are satisfied. Remaining gate is HUMAN interactive manual smoke (10 minutes) in both modes before tagging Build A."
          },
          "pm_wrapup_notes": [
            "Evidence (automated): `python tools/qa_smoke.py --quick` PASS including hero_stuck_repro profile.",
            "Evidence (deterministic repro): Agent 11 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=11 unstuck_attempts=31 inside_attack_blocks=0 max_stuck_ms=3483` during qa_smoke run.",
            "Evidence (AI repro run): Agent 06 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=25 unstuck_attempts=103 inside_attack_blocks=0 max_stuck_ms=19983` and `qa_smoke` PASS.",
            "Integration risk cleared: `game/ui/hud.py` contains both messages init crash fix + debug_ui gated indicators; qa_smoke PASS after merge."
          ],
          "pm_remaining_steps_for_human": [
            "Run 10-minute interactive manual smoke: `python main.py --no-llm`.",
            "Run 10-minute interactive manual smoke: `python main.py --provider mock`.",
            "Confirm player-visible checks: (1) heroes do not deal damage while inside buildings, (2) fewer freezes/unstuck feels reasonable, (3) reduced target thrash/oscillation, (4) debug panel (F1) shows stuck/attack-block info when applicable.",
            "If both manual runs look good: tag Build A and (optionally) ping Agent 13 to draft/post Build A notes."
          ],
          "pm_message_for_all_agents": "WK2 Build A automation is complete (qa_smoke includes hero_stuck_repro). Studio is now waiting on HUMAN manual smoke (10 minutes in --no-llm and provider=mock) before tagging Build A. All agents stand down unless you have a blocker/regression to report.",
          "status": "ready_for_manual_smoke"
        }
      }
    },
    "wk3-ui-polish-1080p-pixelart": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk3-ui-polish-1080p-pixelart_f37350f2.plan.md",
        "notes": "WK3 PM hub: ship borderless 1920x1080 default + Majesty-inspired UI skeleton (Build A), then pixel-art ingestion + attribution + validation (Build B)."
      },
      "rounds": {
        "wk3_r1": {
          "round_meta": {
            "prompt_set_id": "wk3_kickoff_r1_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 1 is the async meeting stage: lock contracts (window + UI layout + asset conventions + attribution rules) before heavy implementation."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "02_GameDirector_ProductOwner",
                "03_TechnicalDirector_Architecture",
                "08_UX_UI_Director",
                "10_PerformanceStability_Lead",
                "11_QA_TestEngineering_Lead",
                "12_ToolsDevEx_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "consult_only_agents": [
                "09_ArtDirector_Pixel_Animation_VFX"
              ],
              "silent_agents": [
                "04_NetworkingDeterminism_Lead",
                "05_GameplaySystemsDesigner",
                "06_AIBehaviorDirector_LLM",
                "07_ContentScenarioDirector"
              ],
              "note": "Keep roster tight. Only Active agents should respond in wk3_r2 unless PM explicitly pings others."
            },
            "build_split": {
              "build_a_midweek": [
                "Default launch: borderless fullscreen 1920x1080 (fallback to display resolution if smaller)",
                "Majesty-inspired HUD layout skeleton (top bar / bottom command bar / right info panel / minimap region) with theme primitives",
                "No new external art dependency; sprite fallbacks remain OK",
                "Perf-safe widgets (cache surfaces; no per-frame allocations)"
              ],
              "build_b_endweek": [
                "Pixel-art ingestion for all currently shipped heroes/enemies/buildings (PNG override folders populated)",
                "Attribution compliance: assets/ATTRIBUTION.md + assets/third_party/<pack>/{LICENSE,README}.txt (verbatim)",
                "Asset validation tool (strict mode) + QA wiring; keep qa_smoke green"
              ]
            },
            "display_contract_locked": {
              "default_mode": "borderless fullscreen at 1920x1080",
              "fallback_mode": "if display smaller than 1920x1080, use display's current resolution (still borderless)",
              "owner": "Agent 03",
              "implementation_boundary": [
                "config.py owns defaults/toggles",
                "game/engine.py owns pygame.display.set_mode flags + fallback resolution selection"
              ]
            },
            "ui_scaling_contract_locked": {
              "design_reference": "1920x1080",
              "policy": [
                "Primary target is 1080p: pixel-crisp, no smoothing.",
                "If runtime resolution differs (fallback), compute layout using actual screen_w/screen_h; do NOT assume 1920x1080.",
                "Avoid fractional scaling of pixel art; if any scaling is needed, prefer integer-ish/rounded sizes and nearest-neighbor."
              ],
              "owner": "Agent 08 (final layout details), Agent 03 (window + any scale primitives)"
            },
            "asset_conventions_locked": {
              "heroes": "assets/sprites/heroes/<class>/{idle,walk,attack,hurt,inside}/frame_###.png",
              "enemies": "assets/sprites/enemies/<type>/{idle,walk,attack,hurt,dead}/frame_###.png",
              "buildings": "assets/sprites/buildings/<building_type>/{built,construction,damaged}/frame_###.png",
              "frame_naming": "frame_000.png ... (filename-sort order is playback order)",
              "note": "Do not change loader paths this sprint unless absolutely required; prefer matching existing loaders."
            },
            "attribution_contract_locked": {
              "rollup_file": "assets/ATTRIBUTION.md",
              "per_pack_dir": "assets/third_party/<pack_name>/",
              "required_verbatim_files": [
                "LICENSE*.txt",
                "README*.txt"
              ],
              "policy": "Strict attribution is a Build B gate; Build A may add scaffolding docs/tools but must not block UI work."
            },
            "qa_and_perf_gates_locked": {
              "always_on_gate": "python tools/qa_smoke.py --quick (must PASS)",
              "manual_smoke": [
                "python main.py --no-llm (10 min; verify window mode + UI readability)",
                "python main.py --provider mock (10 min; verify window mode + UI readability)"
              ],
              "perf_baseline_policy": "Record perf_wk3.csv baseline via tools/perf_benchmark.py; investigate >15% ms/tick increase on same machine/config (not a hard fail gate this sprint).",
              "asset_validation_policy": "Build A: report-only; Build B: strict/failing gate."
            }
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: your 1080p readability + ‘no clutter’ rules are the product acceptance lens for Build A.",
                "Decision: we are not attempting a full settings menu this sprint; focus on default behavior + clarity."
              ],
              "asks": [
                "In wk3_r2, please do an approval/cut pass on Agent 8’s concrete HUD layout and list any ‘must cut’ items if clutter risk appears."
              ]
            },
            "03": {
              "status": "assigned",
              "pm_reply": [
                "Greenlight: implement the borderless 1920x1080 default + smaller-display fallback as you described.",
                "Decision: keep changes localized to config/engine; no UI coupling."
              ],
              "asks": [
                "Expose the selected window size (screen_w/screen_h) to UI in a simple, non-cyclic way if not already available.",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS and a one-line startup log (optional) stating chosen window mode + resolution."
              ]
            },
            "08": {
              "status": "assigned",
              "pm_reply": [
                "Approved: your Majesty-inspired layout spec and minimal theme/widgets approach.",
                "Decision: Build A must be shippable without any new PNG assets; do not hardcode asset paths beyond existing contracts."
              ],
              "asks": [
                "Build A: implement HUD layout skeleton + theme primitives with caching (no per-frame surface churn).",
                "Answer the scaling question by following the locked policy: compute layout from actual screen_w/screen_h; keep pixel-crisp; avoid fractional scaling."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: perf guardrails and baseline approach (perf_wk3.csv + >15% investigate threshold)."
              ],
              "asks": [
                "In wk3_r2, record a baseline perf_wk3.csv and call out any obvious new allocation hotspots introduced by UI work."
              ]
            },
            "11": {
              "status": "assigned",
              "pm_reply": [
                "Accepted: keep fullscreen verification as human smoke (platform-dependent).",
                "Decision: do not add flaky automated fullscreen asserts to qa_smoke; focus on no-crash + tool validation for Build B."
              ],
              "asks": [
                "In wk3_r2, add/refresh a short manual smoke checklist for borderless 1080p + UI readability (Windows).",
                "Coordinate with Agent 12 on validator wiring: report-only in Build A, strict in Build B."
              ]
            },
            "12": {
              "status": "assigned",
              "pm_reply": [
                "Decision: asset validation is report-only for Build A; strict/failing gate for Build B (recommended).",
                "Approved: optional manifest/allowlist approach to avoid guessing entity types."
              ],
              "asks": [
                "In wk3_r2, implement `tools/validate_assets.py` (or similar) + initial manifest and keep it fast (no image decoding/scaling).",
                "Provide output examples for --report and exit codes for --strict/--check-attribution."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Approved: create attribution standard doc + patch-notes template section for Credits/Attribution.",
                "Decision: keep release notes precise: we will not claim ‘pixel art for everything’ unless validator passes and QA confirms coverage."
              ],
              "asks": [
                "In wk3_r2, add docs-only scaffolds: attribution standard + WK3 Build A/B patch notes drafts (with Credits section placeholders)."
              ]
            },
            "09": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—style direction is accepted. You are consult-only for wk3_r2; no response needed unless pinged.",
                "We may ask you in wk3_r3 to shortlist 1–2 CC0/open-license packs per category (heroes/enemies/buildings/UI) with cohesion notes."
              ],
              "asks": []
            }
          },
          "pm_integration_order": [
            "Agent 03 lands borderless 1920x1080 default + fallback in config/engine; keep qa_smoke green.",
            "Agent 08 lands UI skeleton + theme/widgets with caching; keep changes incremental and shippable without new art.",
            "Agent 10 records perf_wk3 baseline and flags any new per-frame allocations.",
            "Agents 12+11 land asset validator in report-only mode (no failing gate) + document Build B strict gate plan.",
            "Agent 13 lands attribution standard + patch-note scaffolds."
          ],
          "pm_open_questions_resolved": [
            "Asset validator strictness: Build A report-only, Build B strict/failing gate.",
            "UI scaling policy: 1080p-first; compute layout from actual screen size; keep pixel-crisp; avoid fractional scaling."
          ]
        },
        "wk3_r2": {
          "round_meta": {
            "prompt_set_id": "wk3_exec_r2_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 2 is execution (Build A). Only ACTIVE agents should respond."
          },
          "pm_instruction": "WK3 Round 2 (wk3_r2): Execute Build A. Implement borderless 1920x1080 default + fallback, and the Majesty-inspired UI skeleton/theme, keeping perf safe and `python tools/qa_smoke.py --quick` PASS. Asset validation should be report-only (no failing gate yet). Only ACTIVE agents respond; consult-only agents stand down unless pinged.",
          "pm_messages_to_agents": {
            "02": {
              "status": "requested",
              "message": "Round 2: do an approval/cut pass on Agent 8’s HUD layout implementation once it’s posted/landed. Call out any clutter risks; prioritize readability at 1080p and ‘key info always visible’ (gold/time/alerts) without covering the playfield."
            },
            "03": {
              "status": "requested",
              "message": "Round 2: implement borderless fullscreen default 1920x1080 with fallback to display resolution if smaller. Keep changes localized to config/engine. If feasible, expose chosen screen_w/screen_h to UI (game_state) without cycles. Evidence: `python tools/qa_smoke.py --quick` PASS."
            },
            "08": {
              "status": "requested",
              "message": "Round 2: implement Build A UI skeleton: top bar + bottom command bar + right info panel + minimap region, plus minimal `theme.py` + `widgets.py` primitives. Keep it incremental (don’t refactor everything at once), cache surfaces/text to avoid per-frame churn, and compute layout from actual screen_w/screen_h (no hardcoded 1920x1080 assumptions). Evidence: `python tools/qa_smoke.py --quick` PASS."
            },
            "10": {
              "status": "requested",
              "message": "Round 2: record a baseline perf run (perf_wk3.csv) and review any UI PRs for per-frame allocations. Flag any hotspots early. Keep changes minimal and coordination-safe."
            },
            "11": {
              "status": "requested",
              "message": "Round 2: keep qa_smoke green. Add/refresh a short Windows manual smoke checklist for borderless 1080p + UI readability. Coordinate with Agent 12: validator is report-only in Build A and strict in Build B (do not add flaky fullscreen asserts)."
            },
            "12": {
              "status": "requested",
              "message": "Round 2: implement `tools/validate_assets.py` (or similar) + initial manifest/allowlist. It must be fast (no image decoding/scaling). Provide `--report` output example and `--strict`/`--check-attribution` exit behavior. Do NOT block Build A; wire as report-only if integrated."
            },
            "13": {
              "status": "requested",
              "message": "Round 2: docs-only scaffolding: attribution standard doc + patch-notes template Credits section + WK3 Build A/B patch note draft files. Keep claims precise and gated by validator/QA later."
            }
          },
          "pm_round2_results": {
            "high_level_status": "mostly_complete_with_one_blocker",
            "what_landed": [
              "Agent 08 shipped Build A UI skeleton + minimal UI framework (`game/ui/theme.py`, `game/ui/widgets.py`) and refactored `game/ui/hud.py` to compute layout from actual surface size; qa_smoke PASS.",
              "Display mode work appears landed in code: `config.py` sets WINDOW_WIDTH/HEIGHT=1920/1080 + DEFAULT_BORDERLESS=True, and `game/engine.py` selects desired window size with fallback to display resolution and uses NOFRAME for borderless (skips in SDL dummy); qa_smoke PASS.",
              "Agent 12 shipped report-only asset validator tooling: `tools/validate_assets.py` + `tools/assets_manifest.json`; qa_smoke PASS.",
              "Agent 11 added Windows manual smoke checklist: `docs/sprint/wk3_acceptance_checklist.md`; qa_smoke PASS.",
              "Agent 10 recorded perf baseline to local perf_wk3.csv and flagged legacy per-frame Surface allocations in `game/ui/building_panel.py` and `game/ui/debug_panel.py`.",
              "Agent 13 shipped docs scaffolding: attribution standard + patch notes templates/drafts for WK3 Build A/B."
            ],
            "still_pending_before_calling_build_a_ready": [
              "HUMAN manual smoke (required): `python main.py --no-llm` and `python main.py --provider mock` for ~10 minutes each, verifying borderless behavior and UI readability.",
              "P0 tech blocker: ensure render/camera/scaling paths do not assume WINDOW_WIDTH/WINDOW_HEIGHT when window resolution differs due to fallback. (Engine currently sets `self.window_width/height`, but many downstream uses still reference constants; this can break smaller-display fallback.)",
              "Audit trail gap: Agent 03 did not log a wk3_r2 entry even though display-mode code appears landed. We need a retro-log for traceability."
            ],
            "integration_risks": [
              "Fallback resolution risk: `pygame.transform.scale(..., (WINDOW_WIDTH, WINDOW_HEIGHT), self._scaled_surface)` and camera edge logic may mismatch the actual window size when fallback < 1920x1080. Must use `self.window_width/self.window_height` (or derive from `self.screen.get_width/height`) consistently.",
              "Perf risk: legacy `building_panel.py` and `debug_panel.py` allocate surfaces per render; keep behind debug toggles or schedule a caching pass if they remain frequently visible."
            ]
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Thanks—your cut guidance is accepted. Good call that we should avoid always-on clutter and keep full control legends behind F3."
              ],
              "asks": [
                "In wk3_r3, please sanity-check the completed UI skeleton at 1920x1080 and confirm it meets readability rules (no overlap/clipping; right panel not too wide)."
              ]
            },
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Great—UI skeleton + theme/widgets landed with caching and screen-size-derived layout; that matches Build A goals."
              ],
              "asks": [
                "In wk3_r3, do a quick pass to ensure the new HUD doesn’t accidentally force legacy panels to stay visible (building/debug panels) and that layout remains usable if window size changes."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Perf baseline recorded; hotspot notes accepted."
              ],
              "asks": [
                "After Agent 03 fixes any fallback sizing issues (wk3_r3), rerun perf_benchmark and compare to baseline (investigate >15% increases)."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Checklist addition is correct; keep fullscreen verification human-run as planned."
              ],
              "asks": [
                "In wk3_r3, add one line to the checklist to also validate behavior on a smaller-than-1080 display if available (or at least verify window size mismatch does not crash).",
                "Coordinate with Agent 12 on whether to mention `python tools/validate_assets.py --report` as optional Build A informational command."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Validator shipped as requested (fast + report-only). Good job keeping it non-blocking."
              ],
              "asks": [
                "In wk3_r3, coordinate with Agent 11 to optionally call `python tools/validate_assets.py --report` in Build A workflow (non-failing).",
                "Prepare a severity-tightening plan for Build B strict mode (which findings become ERROR vs WARN once assets land)."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Docs scaffolding is landed; keep claims gated by validator+QA."
              ],
              "asks": [
                "In wk3_r3, stand by for pack list so you can convert it into Credits bullets; no further action unless pinged."
              ]
            }
          },
          "status": "action_required"
        },
        "wk3_r3": {
          "round_meta": {
            "prompt_set_id": "wk3_wrap_and_buildb_kick_r3_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 3: close remaining Build A blockers and (if clear) kickoff Build B asset ingestion + strict validation."
          },
          "pm_instruction": "WK3 Round 3 (wk3_r3): Blockers-only. Primary goal is to make borderless fallback safe (no WINDOW_WIDTH/HEIGHT assumptions when window differs), keep `python tools/qa_smoke.py --quick` PASS, and declare Build A ready for human manual smoke + tag. If Build A is cleared early, we’ll immediately kickoff Build B prep (pack shortlist + strict validator severity plan + attribution wiring).",
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "P0 blocker fix: ensure engine/render/camera/scaling uses the actual window size when fallback < 1920x1080. Today the window is created with `self.window_width/height`, but many downstream computations still use WINDOW_WIDTH/WINDOW_HEIGHT. Fix minimally: derive `screen_w/screen_h` from `self.window_width/height` (or `self.screen.get_width/height`) and use it consistently for camera center, edge-scroll boundaries, view scaling, and `pygame.transform.scale` destinations. Keep determinism unchanged. Evidence: `python tools/qa_smoke.py --quick` PASS. Also retro-log a wk3_r2 entry summarizing your earlier display-mode changes (audit trail)."
            },
            "11": {
              "status": "requested",
              "message": "Update docs checklist (small): add a note to validate that window-size mismatch (smaller-than-1080 display) does not crash or clip UI catastrophically. Optionally add `python tools/validate_assets.py --report` as a non-blocking informational command for Build A. Keep qa_smoke PASS."
            },
            "02": {
              "status": "requested",
              "message": "Quick signoff: once Agent 03 lands fallback-safe sizing, review UI readability at 1920x1080 and confirm no overlap/clipping + right panel not too wide. If anything is too cluttered, list the top 1–2 cuts (Build A only)."
            },
            "08": {
              "status": "requested",
              "message": "Sanity pass after Agent 03 sizing fix: ensure HUD layout remains correct (derived from surface size), and confirm no legacy panels are forced always-on. Keep caching intact; qa_smoke must remain PASS."
            },
            "12": {
              "status": "requested",
              "message": "Build B prep (no asset ingestion yet unless cleared): propose severity-tightening for strict mode (what becomes ERROR once we add packs) and coordinate with Agent 11 on wiring `validate_assets.py` into QA (Build A report-only, Build B strict)."
            },
            "09": {
              "status": "requested",
              "message": "Build B kickoff prep: shortlist 1–2 CC0/open-license packs per category (heroes/enemies/buildings, optional UI icons) with cohesion notes (outline thickness, palette/ramp). Keep it minimal and curated (avoid repo bloat). Do not commit assets yet in this round—just shortlist + rationale + any normalization steps."
            },
            "13": {
              "status": "requested",
              "message": "Stand by for Build B: once Agent 09/12 select packs, convert the pack list into exact Credits bullets format (assets/ATTRIBUTION.md + per-pack third_party folder expectations). No new claims until validator+QA confirm coverage."
            }
          },
          "pm_round3_results": {
            "high_level_status": "blocker_resolved_build_a_ready_for_human_smoke",
            "what_landed": [
              "Agent 03 removed remaining WINDOW_WIDTH/WINDOW_HEIGHT assumptions from camera + render scaling paths and exposed `screen_w/screen_h` in game_state; `python tools/qa_smoke.py --quick` PASS.",
              "Agent 11 updated `docs/sprint/wk3_acceptance_checklist.md` to explicitly validate smaller-than-1080 fallback safety and added optional `python tools/validate_assets.py --report` (non-blocking); `qa_smoke` PASS.",
              "Agent 12 proposed Build B strict-mode severity policy for `tools/validate_assets.py` and confirmed `qa_smoke` PASS.",
              "Agent 09 delivered Build B pack shortlist (Kenney primary; LPC fallback) and confirmed `qa_smoke` PASS.",
              "Agent 13 is standing by to convert the final pack list into Credits/Attribution bullets; `qa_smoke` PASS."
            ],
            "build_a_readiness": "Automation gates are green and the fallback-resolution blocker is resolved in code. However, a new P0 crash was found during manual smoke boot: UITheme dataclass slots prevent setting font_* attributes in __post_init__. Build A is NOT smokeable until WK3-BUG-001 is fixed.",
            "required_human_steps": [
              "Manual smoke 10 min: `python main.py --no-llm` — verify borderless behavior and UI readability at actual runtime resolution; confirm no catastrophic clipping/crash if display <1080p.",
              "Manual smoke 10 min: `python main.py --provider mock` — same checks.",
              "Optional informational: `python tools/validate_assets.py --report` (should exit 0 and report missing sprite folders/states as WARNs)."
            ],
            "build_b_go_no_go": "GO for Build B kickoff planning now (pack/license verification + strict validator policy), but do not claim ‘pixel art for everything’ until validator+QA confirm coverage."
          },
          "pm_decisions": {
            "build_a_status": "blocked_on_WK3-BUG-001",
            "build_b_validator_strict_policy": {
              "ATTRIBUTION_md": "ERROR (required) once any third_party packs are added",
              "third_party_LICENSE": "ERROR when pack dir exists",
              "third_party_README": "WARN (upgrade to ERROR if we find license requires it)",
              "missing_required_state_frames": "ERROR in strict mode for Build B"
            },
            "pack_selection_policy": "Prefer single-source cohesion. Start with a minimal curated subset; avoid importing entire packs."
          },
          "pm_bug_tickets": [
            {
              "id": "WK3-BUG-001",
              "title": "Boot crash: UITheme dataclass(slots=True) cannot set font_* attributes in __post_init__",
              "severity": "blocker",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_manual_smoke",
              "repro_steps": [
                "Run: python main.py (or python main.py --no-llm / --provider mock)",
                "Observe crash during GameEngine init when HUD creates UITheme"
              ],
              "expected": "Game boots successfully; UITheme initializes fonts safely.",
              "actual": "Crash: AttributeError: 'UITheme' object has no attribute 'font_title' and no __dict__ for setting new attributes",
              "evidence": [
                "Trace points to game/ui/theme.py: UITheme.__post_init__ assigning self.font_title/body/small on a slots dataclass without declaring those fields."
              ],
              "suspected_area": [
                "game/ui/theme.py (UITheme dataclass)",
                "game/ui/hud.py (constructs UITheme in HUD.__init__)"
              ],
              "constraints": [
                "Keep behavior deterministic and perf-safe.",
                "Prefer keeping slots=True; declare font fields properly (init=False) rather than removing slots unless necessary."
              ],
              "proposed_fix": [
                "In UITheme dataclass, add fields: font_title/font_body/font_small (e.g., pygame.font.Font | None) with init=False default=None, then assign in __post_init__.",
                "Alternative: remove slots=True (less preferred)."
              ],
              "acceptance_test": [
                "python main.py --no-llm boots to a running window (no crash)",
                "python tools/qa_smoke.py --quick remains PASS"
              ],
              "status": "resolved",
              "resolution_summary": [
                "Agent 08 kept `@dataclass(slots=True)` and declared `font_title/font_body/font_small` as dataclass fields (init=False, default=None), then assigned them in `UITheme.__post_init__`.",
                "Boot verified in `--no-llm` and `--provider mock` and `python tools/qa_smoke.py --quick` PASS per Agent 08 log (wk3_r4)."
              ],
              "resolution_evidence": [
                "Agent 08 log: sprints[\"wk3-ui-polish-1080p-pixelart\"].rounds[\"wk3_r4\"]",
                "Code: game/ui/theme.py declares the font fields using dataclasses.field(...) and assigns in __post_init__."
              ]
            }
          ],
          "status": "ready_for_human_manual_smoke"
        },
        "wk3_r5": {
          "round_meta": {
            "prompt_set_id": "wk3_manageability_r5_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "UI manageability polish: Quit button + closeable panels + moved perf overlay. UI-only changes; keep qa_smoke green."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "08_UX_UI_Director",
                "11_QA_TestEngineering_Lead"
              ],
              "note": "Tight roster for a small UX polish pass."
            },
            "scope_locked": [
              "Quit button visible in HUD (top bar) and exits game reliably on click.",
              "Add X close buttons for: right info panel (hero/building selection), debug panel, perf overlay.",
              "Reposition perf overlay so it does not fight top bar/right panel.",
              "Perf-safe: no per-frame surface churn.",
              "No sim/determinism changes."
            ],
            "qa_gate": "python tools/qa_smoke.py --quick must PASS"
          },
          "pm_round5_results": {
            "high_level_status": "shipped",
            "what_landed": [
              "Agent 08 implemented Quit button, close (X) on right info panel + debug panel + perf overlay, and moved perf overlay to a less intrusive placement; also added caching to debug panel to remove per-frame surface allocs while visible.",
              "Engine click routing now prioritizes UI clicks before world selection: HUD returns actions (quit/close_selection), DebugPanel consumes clicks and has close X, perf overlay has close hitbox.",
              "Agent 11 updated `docs/sprint/wk3_acceptance_checklist.md` with UI manageability checks and confirmed `python tools/qa_smoke.py --quick` PASS."
            ],
            "evidence": [
              "Agent 08 log wk3_r5: qa_smoke PASS + headless click sanity markers (ui_quit_click_ok/ui_*_close_ok).",
              "Agent 11 log wk3_r5: qa_smoke PASS; checklist updated."
            ],
            "remaining_human_steps": [
              "Run the manual smoke checklist items (Quit + X close behaviors) in a real display run (Windows): `python main.py --no-llm` and `python main.py --provider mock`."
            ]
          },
          "pm_responses_by_agent": {
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Shipped as requested. Great job keeping it UI-only and perf-safe (debug panel caching was a nice win)."
              ],
              "asks": [
                "No further action unless a UX issue appears during manual smoke (e.g., quit misclicks → consider confirm dialog later)."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Checklist updates accepted. Keep click behaviors manual-verified; avoid flaky headless assertions beyond what’s already in place."
              ],
              "asks": [
                "No further action unless Build B validator wiring changes are ready."
              ]
            }
          },
          "status": "complete"
        },
        "wk3_r6": {
          "round_meta": {
            "prompt_set_id": "wk3_buildB_kickoff_r6_v1",
            "build_target": "BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Build B kickoff: lock pack family + mapping, tighten validator strict policy, add attribution scaffolding + QA gate plan. No asset import expected in this kickoff round."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "09_ArtDirector_Pixel_Animation_VFX",
                "12_ToolsDevEx_Lead",
                "11_QA_TestEngineering_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "note": "Build B kickoff is tooling/QA/Ops-led with Art providing pack+mapping. Keep roster tight; no sim/determinism changes."
            },
            "scope_locked": [
              "Primary pack family preference: Kenney (single-source cohesion).",
              "Curate subsets only (avoid importing whole packs).",
              "Do not change loader paths; use existing override folders under assets/sprites/.",
              "Build A remains report-only for assets; Build B adds failing gate via validate_assets strict + attribution checks."
            ],
            "buildb_required_gates": [
              "python tools/qa_smoke.py --quick (PASS)",
              "python tools/validate_assets.py --strict --check-attribution (PASS once assets land)"
            ]
          },
          "pm_round6_results": {
            "high_level_status": "prep_complete_no_assets",
            "what_landed": [
              "Agent 12 implemented strict enforcement in `tools/validate_assets.py` (missing kind/state frames become ERROR in strict; attribution requirements enforced when third_party packs exist).",
              "Agent 11 documented Build B gate plan in `docs/sprint/wk3_acceptance_checklist.md` (qa_smoke baseline + strict validate_assets gate).",
              "Agent 13 added attribution scaffolding: `assets/ATTRIBUTION.md` (rollup template + Steam credits bullet format) and `assets/third_party/README.md` (required per-pack license/provenance layout).",
              "Agent 09 locked a pack-family plan (Kenney primary; LPC minimal fallback) and provided a mapping table for shipped heroes/enemies/buildings with placeholder rules (1 frame per required action/state OK initially)."
            ],
            "verification_notes": [
              "Repo currently contains `.gitkeep` placeholders under assets/sprites/ but no `frame_###.png` files yet; Build B art ingestion has NOT happened in wk3_r6 (as expected for kickoff)."
            ],
            "evidence": [
              "Agent 12 log wk3_r6: validate_assets strict policy implemented; qa_smoke PASS; validate_assets --report PASS.",
              "Agent 11 log wk3_r6: checklist updated; qa_smoke PASS.",
              "Agent 13 log wk3_r6: attribution scaffolding committed; qa_smoke PASS.",
              "Agent 09 log wk3_r6: mapping plan + pack-family lock; qa_smoke PASS."
            ],
            "blockers_to_buildb_claims": [
              "Cannot claim 'pixel art replaces shapes for all entities' until curated PNGs are imported AND `python tools/validate_assets.py --strict --check-attribution` PASS is demonstrated."
            ]
          },
          "pm_next_round_plan": {
            "round_id": "wk3_r7",
            "goal": "Actual asset ingestion: import curated Kenney subset into override folders + fill ATTRIBUTION + per-pack LICENSE files, then make strict validator PASS.",
            "success_criteria": [
              "At least one `frame_000.png` exists for every required hero class action folder.",
              "At least one `frame_000.png` exists for every required enemy type action folder.",
              "At least one `frame_000.png` exists for every required building type state folder.",
              "If any `assets/third_party/<pack>/` exists: `assets/ATTRIBUTION.md` is fully populated AND each pack dir contains `LICENSE*.txt` (verbatim) and a `README*.txt` (verbatim or provenance note).",
              "Gates: `python tools/qa_smoke.py --quick` PASS and `python tools/validate_assets.py --strict --check-attribution` PASS."
            ]
          },
          "status": "ready_for_wk3_r7_asset_ingest"
        },
        "wk3_r7": {
          "round_meta": {
            "prompt_set_id": "wk3_buildB_exec_r7_v1",
            "build_target": "BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Build B execution: land real PNG sprites + attribution and make strict validator PASS."
          },
          "pm_round7_results": {
            "high_level_status": "shipped_buildb_gate_green",
            "what_landed": [
              "PNG sprite coverage is now present across the override folders (at least frame_000.png per required hero/enemy/building state).",
              "Attribution scaffolding exists and passes strict checks: assets/ATTRIBUTION.md populated; assets/third_party/<pack> contains LICENSE*.txt and README*.txt.",
              "Tooling/QA gates are now green on the current repo state."
            ],
            "important_note": [
              "The first landed sprites are a CC0 'kingdomsim_cc0_placeholders' set generated in-repo to unblock the pipeline end-to-end. Kenney CC0 is scaffolded and attributed, but curated Kenney-derived PNG replacements may still be desired for final art direction."
            ],
            "evidence": [
              "Local run (repo root): `python tools/validate_assets.py --strict --check-attribution --report` => OK: no findings (errors=0 warns=0).",
              "Local run (repo root): `python tools/qa_smoke.py --quick` => PASS (see agent-tools output log: 3fa31bc4-9070-4c25-aa57-9ab1ceeb505d.txt).",
              "Repo contains frame PNGs (examples): assets/sprites/heroes/*/*/frame_000.png, assets/sprites/enemies/*/*/frame_000.png, assets/sprites/buildings/*/*/frame_000.png."
            ],
            "qa_timing_reconcile": [
              "Agent 11's wk3_r7 strict validator FAIL was a timing artifact (ran before PNGs landed). Current repo state is strict PASS as verified locally."
            ]
          },
          "pm_next_actions": {
            "option_A_tag_buildb_now": [
              "If you accept the CC0 placeholders as 'pixel imagery' for this build: run the manual smoke checklist, then bump version + update CHANGELOG/patch notes and tag/release Build B."
            ],
            "option_B_swap_to_kenney_then_tag": [
              "If you want the intended Kenney look before tagging: run one more Art/Ops round to replace placeholder frames with curated Kenney subset while keeping strict validator + qa_smoke green."
            ]
          },
          "status": "ready_for_human_choice_tag_vs_swap"
        }
      }
    }
    ,
    "wk4-new-enemy-skeleton-archer": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk4-new-enemy-skeleton-archer_0feaab3a.plan.md",
        "notes": "WK4 Build A: add new enemy type skeleton_archer (ranged kiter), ensure it is testable quickly, and keep strict validator + snapshot system green."
      },
      "rounds": {
        "wk4_r2": {
          "round_meta": {
            "prompt_set_id": "wk4_r2_pm_synthesis_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "visibility": "All agents should treat this as the source of truth for WK4 decisions."
          },
          "pm_decisions": {
            "buildA_locked": {
              "enemy_type": "skeleton_archer",
              "ranged_only": true,
              "instant_hit_ranged": true,
              "no_projectile_system": true,
              "spawn_source": "skeleton_crypt (lair)",
              "spawn_mix": "80/20 skeleton/skeleton_archer (deterministic via lair RNG)",
              "pipeline_complete": [
                "tools/assets_manifest.json includes skeleton_archer",
                "assets/sprites/enemies/skeleton_archer/{idle,walk,attack,hurt,dead}/frame_000.png exist"
              ],
              "testing_gates": [
                "python tools/qa_smoke.py --quick",
                "python tools/validate_assets.py --strict --check-attribution",
                "python tools/capture_screenshots.py --scenario enemy_catalog --seed 3 --out docs/screenshots/wk4_after/enemy_catalog_seed3 --size 1920x1080 --ticks 0",
                "python tools/build_gallery.py --shots docs/screenshots/wk4_after --refs .cursor/plans/art_examples --out docs/art/compare_gallery.html"
              ],
              "clarity_safeguard_allowed": "Tiny deterministic readability cue is allowed (pose + minimal impact flash) but no new systems."
            },
            "tunables_v0": {
              "hp": 40,
              "attack": 4,
              "speed": 1.35,
              "attack_range_tiles": 6.0,
              "min_range_tiles": 2.0,
              "attack_cooldown_ms": 1400
            },
            "determinism_perf_guardrails": [
              "Sim-time/ticks only for cooldowns/ages; no wall-clock in sim logic.",
              "Seeded RNG streams only; no global random.*",
              "Stable ordering/tie-breaks for targeting decisions (no set/dict iteration dependence).",
              "Avoid per-frame pathing churn; rate-limit reposition decisions; avoid O(N_enemies*N_heroes) scans and per-tick allocations."
            ]
          },
          "status": "complete"
        },
        "wk4_r3": {
          "round_meta": {
            "prompt_set_id": "wk4_r3_exec_closeout_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "notes": "Implementation + verification closeout summary; keep audit trail and evidence in one place."
          },
          "pm_round3_results": {
            "high_level_status": "buildA_shippable",
            "what_landed": [
              "Implemented SkeletonArcher enemy (ranged-only, instant-hit) with kite band + hysteresis/commitment + bounded attempts fallback.",
              "SkeletonCrypt spawns deterministic 80/20 skeleton/skeleton_archer mix via lair RNG.",
              "Tools/pipeline: tools/assets_manifest.json updated; CC0 placeholder frames generated for skeleton_archer; runtime fallback recognizes skeleton_archer.",
              "Wave testability: first enemy wave now guarantees a skeleton_archer spawn near the map center for quick validation."
            ],
            "evidence": [
              "python tools/qa_smoke.py --quick => PASS",
              "python tools/validate_assets.py --strict --check-attribution => PASS"
            ],
            "manual_spot_check": [
              "Recommended: run `python main.py --no-llm` and confirm a Skeleton Archer appears as the first wave enemy within ~10–15s and engages near the castle."
            ]
          },
          "status": "ready_to_ship"
        }
      }
    }
    ,
    "wk5-demolition-projectiles-workers": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk5_demolition+projectiles_d4ea82e0.plan.md",
        "notes": "WK5 focus: building lifecycle cleanup (auto-demolish at 0 HP) + player demolish button, visible ranged projectiles (generic pipeline), and replacing peasant/tax-collector glyph renders with pixel sprites. Maintain determinism + tooling + Visual Snapshot System."
      },
      "rounds": {
        "wk5_r2": {
          "round_meta": {
            "prompt_set_id": "wk5_r2_pm_synthesis_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "visibility": "All agents should treat this round entry as the source of truth for locked WK5 Build A decisions."
          },
          "pm_decisions": {
            "buildA_locked": {
              "building_auto_demolish": {
                "rule": "Any non-castle building at hp<=0 is removed from the world/buildings list.",
                "castle_exception": "Castle is NOT auto-removed; game-over behavior remains as-is.",
                "lair_cleanup": "If demolished building is a lair, remove it from lair_system.lairs and clear any entity references."
              },
              "player_demolish": {
                "enabled": true,
                "refund_policy": "No refund (instant removal).",
                "allowed_while_under_attack": true,
                "disabled_for_castle": true,
                "disabled_for_under_construction": true
              },
              "ranged_projectiles": {
                "scope": "All ranged units now and in future (generic pipeline).",
                "first_pass": "Visual-only projectiles (no collision/physics).",
                "event_contract": "Combat emits a ranged_projectile event (from_x/y, to_x/y, projectile_kind, optional color/size). VFX consumes it.",
                "timing_defaults": "Approx 3000 px/s speed with 80–140ms clamp (distance-based).",
                "palette_defaults": "Arrow = high-contrast warm/wood + bright tip pixel; Bolt = cool/steel variant (as needed)."
              },
              "ranger_bow_readability": "Ranger attack pose must read as bow shot at 32x32 (strong C-curve bow silhouette + release pose cue).",
              "workers_pixel_sprites": {
                "replace_glyphs": true,
                "types": ["peasant", "tax_collector"],
                "states_manifest_strategy": "Build A uses flat state list in assets_manifest (per Agent 12); permissive subset per type is acceptable for strict validator."
              },
              "snapshot_tick_strategy": {
                "ranged_projectiles": [60, 90, 120],
                "rationale": "Fixed ticks for deterministic mid-flight coverage (per QA)."
              },
              "required_gates": [
                "python tools/qa_smoke.py --quick",
                "python tools/validate_assets.py --strict --check-attribution"
              ]
            },
            "integration_order_buildA": [
              "Tooling/manifest/validator/placeholder generation + snapshot scenario scaffolding (Agent 12 already reports complete).",
              "Gameplay: building auto-demolish cleanup pass + player demolish action and reference cleanup.",
              "Gameplay: ranged projectile event emission + VFX rendering path.",
              "Rendering: peasant + tax collector use worker sprites (no glyphs).",
              "Visual Snapshot System: capture worker_catalog + ranged_projectiles at ticks 60/90/120; rebuild gallery."
            ]
          },
          "pm_responses_by_agent": {
            "03": {
              "status": "accepted",
              "pm_reply": [
                "Accepted: centralize building removal + reference cleanup in a single engine cleanup pass (collect destroyed first, then remove; identity checks).",
                "Accepted: ranged_projectile event contract emitted from combat and consumed by VFX; visual-only, deterministic.",
                "Decision: player demolish should use the same cleanup path (set hp=0 and run cleanup immediately in that tick) so it feels instant without duplicating logic."
              ],
              "asks": [
                "Provide the exact ordering and list of references to clear (selected_building, building_panel selection, hero/enemy targets, peasant targets, tax collector target_guild, lair_system.lairs).",
                "Confirm whether we also clear bounties targeting demolished lairs/buildings (if applicable) as part of cleanup."
              ]
            },
            "05": {
              "status": "accepted",
              "pm_reply": [
                "Accepted: demolish guardrails locked for Build A: allowed while under attack; disabled for under-construction; castle excluded; no refunds.",
                "Accepted: projectile tuning defaults (≈3000 px/s, 80–140ms clamp) and arrow/bolt color language as v0."
              ],
              "asks": [
                "Confirm current ranged attackers inventory for Build A (at minimum Ranger, SkeletonArcher, BallistaTower) and any other ranged unit present in code.",
                "Confirm whether projectile_kind defaults to 'arrow' unless overridden by get_ranged_spec()."
              ]
            },
            "08": {
              "status": "accepted",
              "pm_reply": [
                "Accepted: demolish button spec (bottom-of-panel placement with red color language; disabled/hidden appropriately).",
                "Accepted: microcopy split: player action 'Demolished: X' vs damage outcome 'X destroyed'."
              ],
              "asks": [
                "Keep Build A to no-confirm (per plan); if misclicks show up, propose Build B confirm/hold-to-demolish."
              ]
            },
            "09": {
              "status": "accepted_with_art_notes",
              "pm_reply": [
                "Accepted: bow readability requirements for Ranger (strong C-curve silhouette + release pose cues at 32x32).",
                "Accepted: projectile spec (1–2 px arrow/bolt, bright tip pixel, trailing-edge outline, deterministic).",
                "Accepted: worker silhouettes: peasant reads via tool; tax collector reads via coin bag/trim."
              ],
              "asks": [
                "Confirm Build A arrow color policy: same arrow color for ranger and skeleton_archer recommended; differentiate only if readability demands it.",
                "Confirm whether tax_collector needs hurt/dead frames in gameplay; tooling may still generate them to satisfy strict validator."
              ]
            },
            "11": {
              "status": "accepted",
              "pm_reply": [
                "Accepted: Build A test steps and snapshot tick strategy: ranged_projectiles captured at fixed ticks 60/90/120 for deterministic coverage.",
                "Accepted: verification scope: gates + Visual Snapshot evidence after implementation lands."
              ],
              "asks": [
                "After implementation, run: qa_smoke --quick, validate_assets --strict --check-attribution, capture_screenshots for worker_catalog + ranged_projectiles (ticks 60/90/120), then rebuild gallery and report PASS/FAIL evidence."
              ]
            },
            "12": {
              "status": "accepted_complete",
              "pm_reply": [
                "Accepted: Build A manifest strategy is flat worker states list; permissive subsets per type are fine for strict gate.",
                "Accepted: scenario names: worker_catalog + ranged_projectiles.",
                "Noted: Agent 12 reports tooling implementation complete and gates PASS; treat as ready-for-integration."
              ],
              "asks": [
                "Post the commit/diff reference for the tooling changes once merged, and any integration notes for gameplay implementers (tick count defaults, scenario setup assumptions)."
              ]
            },
            "10": {
              "status": "consult_optional_not_pinged",
              "pm_reply": [
                "Perf consult is optional for WK5. If pinged, please sanity-check projectile VFX for per-frame allocation and add a bounded active-projectile cap if needed."
              ],
              "asks": []
            }
          },
          "status": "ready_for_wk5_r3_execution"
        },
        "wk5_r3": {
          "round_meta": {
            "prompt_set_id": "wk5_r3_execution_greenlight_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "notes": "Execution/greenlight prompt for implementing agents; keep this round as the active build thread."
          },
          "pm_execution_prompt": {
            "plan_ref": ".cursor/plans/wk5_demolition+projectiles_d4ea82e0.plan.md",
            "write_replies_to": "sprints[\"wk5-demolition-projectiles-workers\"].rounds[\"wk5_r3\"]",
            "global_constraints": [
              "Determinism: no wall-clock time in sim logic; avoid non-seeded RNG in sim paths.",
              "Projectiles are visual-only (no collision/physics).",
              "Auto-demolish all non-castle buildings at hp<=0; castle remains game-over.",
              "Player demolish: instant, no refund, allowed while under attack, disabled for castle and under-construction.",
              "Gates must remain green: qa_smoke --quick and validate_assets --strict --check-attribution."
            ],
            "agent_tasks": {
              "03": [
                "Confirm final engine ordering for cleanup pass (after combat, before building updates).",
                "Finalize ranged_projectile event contract fields and minimal ranged interface surface.",
                "Confirm player demolish uses the same cleanup path and feels instant."
              ],
              "05": [
                "Confirm ranged attacker inventory (Ranger, SkeletonArcher, BallistaTower at minimum).",
                "Confirm projectile defaults (speed/lifetime clamp; arrow vs bolt kinds)."
              ],
              "08": [
                "Confirm demolish button spec + microcopy finalized for Build A (no confirm)."
              ],
              "09": [
                "Confirm arrow/bolt palette defaults and ranger bow silhouette cues for Build A.",
                "Confirm whether tax_collector needs hurt/dead in gameplay (tooling may still generate)."
              ],
              "11": [
                "After implementation lands, run gates + snapshots; capture ranged_projectiles at ticks 60/90/120 and report evidence."
              ],
              "12": [
                "If not already merged, land tooling changes; otherwise provide merge reference and integration notes for gameplay implementers."
              ]
            }
          },
          "pm_round3_progress": {
            "build_mode": "BuildA_midweek+BuildB_endweek",
            "what_landed": [
              "Engine: centralized building auto-demolish + reference cleanup via `_cleanup_destroyed_buildings()` (Agent 03).",
              "UI: building panel demolish button + engine action handling + microcopy split (Agent 08).",
              "Gameplay: combat emits `ranged_projectile` events for ranged hero attacks (Agent 03).",
              "Tooling: workers manifest/validator/placeholder generation + snapshot scenarios implemented; tooling gates reported PASS (Agent 12)."
            ],
            "carried_forward_to_wk5_r4": [
              "Enemy-side and building-side ranged projectile event emission (SkeletonArcher + BallistaTower).",
              "VFX rendering for ranged_projectile.",
              "QA snapshot + gallery evidence."
            ]
          },
          "status": "complete_buildA_core_landed"
        },
        "wk5_r4": {
          "round_meta": {
            "prompt_set_id": "wk5_r4_buildA_finish_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "notes": "Finish Build A: visible projectiles for ALL ranged attackers (including enemy SkeletonArcher), worker runtime sprites (no glyphs), then snapshots + gate evidence."
          },
          "pm_execution_prompt": {
            "plan_ref": ".cursor/plans/wk5_demolition+projectiles_d4ea82e0.plan.md",
            "write_replies_to": "sprints[\"wk5-demolition-projectiles-workers\"].rounds[\"wk5_r4\"]",
            "locked_buildA_decision": "Enemy projectiles are REQUIRED for Build A (not deferred to Build B).",
            "global_constraints": [
              "Determinism: no wall-clock time in sim logic; avoid non-seeded RNG in sim paths.",
              "Projectiles are visual-only (no collision/physics) but MUST be visible for all ranged attackers.",
              "Gates must remain green: qa_smoke --quick and validate_assets --strict --check-attribution."
            ],
            "agent_tasks": {
              "03": [
                "Implement enemy-side ranged projectile event emission for SkeletonArcher attacks (enemy.update()/do_attack path) using the same `ranged_projectile` event contract (from_x/y, to_x/y, projectile_kind, optional color/size_px).",
                "Confirm BallistaTower ranged attacks (if present) also emit ranged_projectile; otherwise document as Build B follow-up."
              ],
              "09": [
                "Implement VFX rendering for `ranged_projectile` in `game/graphics/vfx.py` (1–2 px arrow/bolt with bright tip pixel, deterministic).",
                "Verify ranger bow cue + projectile readability at Z2; confirm single arrow color policy for Build A."
              ],
              "12": [
                "If tooling changes are not merged, land them; otherwise provide merge reference and confirm scenarios: worker_catalog + ranged_projectiles."
              ],
              "11": [
                "After the above lands, run and post evidence: qa_smoke --quick; validate_assets --strict --check-attribution; capture_screenshots worker_catalog ticks 0; ranged_projectiles ticks 60/90/120; build_gallery."
              ]
            }
          },
          "pm_round4_results": {
            "high_level_status": "buildA_complete_verified",
            "what_landed": [
              "Enemy-side ranged_projectile event emission for SkeletonArcher (Agent 03).",
              "Building-side ranged_projectile event emission for BallistaTower (Agent 03).",
              "Engine collection/merge of ranged_projectile events from enemies/buildings into the VFX feed (Agent 03).",
              "VFX rendering for ranged_projectile (1–2 px, bright tip, deterministic; Build A enforces wood-brown) (Agent 09).",
              "QA verification: qa_smoke --quick PASS; validate_assets --strict --check-attribution PASS; worker_catalog snapshot PASS; ranged_projectiles snapshots PASS at ticks 60/90/120; gallery build PASS (Agent 11)."
            ],
            "evidence": [
              "Agent 11 wk5_r3: ran qa_smoke --quick (PASS), validate_assets --strict --check-attribution (PASS), capture_screenshots worker_catalog (PASS), capture_screenshots ranged_projectiles ticks 60/90/120 (PASS), build_gallery (PASS)."
            ],
            "ready_to_ship_buildA": true
          },
          "status": "complete_buildA_ready_to_ship"
        }
        ,
        "wk5_r5": {
          "round_meta": {
            "prompt_set_id": "wk5_r5_buildB_polish_v1",
            "build_target": "BuildB_endweek",
            "pm_authored_at_local": "2026-01-03T00:00:00",
            "notes": "Build B polish: improve readability and tighten validator/specs without breaking determinism or pipelines."
          },
          "pm_execution_prompt": {
            "plan_ref": ".cursor/plans/wk5_demolition+projectiles_d4ea82e0.plan.md",
            "write_replies_to": "sprints[\"wk5-demolition-projectiles-workers\"].rounds[\"wk5_r5\"]",
            "buildB_targets": [
              "Projectile polish: allow bolt vs arrow color/kind differentiation (Ballista bolt cool/steel; arrows wood-brown) while remaining deterministic.",
              "Ranger bow polish: adjust placeholder bow cue toward the diagonal C-curve silhouette per art contract (if still vertical).",
              "Workers: optional validator tightening to be per-type-aware (so tax_collector doesn't require hurt/dead, peasant doesn't require collect/return) without breaking strict gate.",
              "UX safety: only if misclicks observed, add optional confirm/hold-to-demolish (default off)."
            ],
            "required_gates": [
              "python tools/qa_smoke.py --quick",
              "python tools/validate_assets.py --strict --check-attribution",
              "Visual Snapshot System: worker_catalog + ranged_projectiles and gallery rebuild remain PASS"
            ]
          },
          "status": "ready_for_buildB_kickoff"
        }
      }
    }
  }
}

