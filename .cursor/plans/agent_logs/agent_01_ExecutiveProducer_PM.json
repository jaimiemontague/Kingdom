{
  "schema_version": "2.0",
  "agent": { "id": "01", "name": "ExecutiveProducer_PM" },
  "notes": [
    "This file is owned by Agent 01 only.",
    "Structure nests rounds inside sprints to keep history organized.",
    "Preferred workflow: add/update only the current sprint+round; do not rewrite past rounds."
  ],
  "sprints": {
    "wk1-broad-sweep-midweek-endweek": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
        "notes": "PM synthesis + responses to all agents for this sprint live here."
      },
      "rounds": {
        "wk1_r1": {
          "round_meta": {
            "prompt_set_id": "wk1_prompts_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "visibility": "All agents should read this round entry for PM decisions + follow-ups."
          },
          "pm_decisions": {
            "build_split": {
              "build_a_midweek": [
                "FS-1: Hero intent + last decision inspect (UI-visible)",
                "FS-2: Bounty clarity: responders + attractiveness (UI-visible)",
                "QA/Tools gates required: qa_smoke --quick (includes determinism guard) must pass"
              ],
              "build_b_endweek": [
                "FS-3: Early pacing guardrail (tip + optional starter objective) plus tuning polish",
                "Perf/stability pass + any follow-up QA tightening"
              ]
            },
            "intent_taxonomy": [
              "idle",
              "pursuing_bounty",
              "shopping",
              "returning_to_safety",
              "engaging_enemy",
              "defending_building",
              "attacking_lair"
            ],
            "decision_history_policy": "P0 = store ONLY the last decision per hero (no ring buffer) to minimize perf/UI risk.",
            "bounty_attractiveness_policy": "Build A uses a GLOBAL/hero-agnostic tier (low/med/high) computed deterministically. Per-hero scoring can be revisited later.",
            "help_overlay_default": "Default OFF (clean HUD) with a persistent hint (e.g., 'F3: Help'). Revisit after onboarding feedback.",
            "tier_color_language": "Low=gray, Med=gold, High=green (value-contrast first; must remain readable under fog-of-war).",
            "determinism_gate": "Mandatory in Build A/B: no wall-clock time usage inside sim logic; no global random.* usage for sim; stable ordering/tie-breaks."
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: create `docs/sprint/wk1_acceptance_checklist.md` as the single QA signoff doc for Build A and Build B.",
                "Decision: FS-3 (early pacing guardrail) is Build B only (but Build A may include a non-invasive HUD help hint if it doesn't change sim state).",
                "Decision: lock full intent taxonomy for WK1 (see pm_decisions.intent_taxonomy)."
              ],
              "asks": [
                "Please draft the 1-page checklist with two sections: Build A gates and Build B gates.",
                "Include explicit 'qa_smoke --quick must pass' and 'mock/no-llm manual smoke (10 min)' in both."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted direction: thin contracts are the right move; UI must only read hero/bounty fields (no AI imports).",
                "Decision: attractiveness tier is global for Build A (your recommendation accepted).",
                "Guardrail: any 'age since decision' must use sim-time/ticks only (no wall-clock)."
              ],
              "asks": [
                "If you already added `game/sim/contracts.py`, please ensure it has zero cyclical imports and minimal serialization helpers.",
                "Coordinate with Agent 8 to ensure UI reads only the contract fields."
              ]
            },
            "04": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: determinism guard must be a release gate this week.",
                "Decision: determinism guard is mandatory in `tools/qa_smoke.py --quick` (not optional).",
                "Decision: UI should display sim-time-based ages for consistency (avoid 'wall-clock vs sim-time' confusion)."
              ],
              "asks": [
                "If a `tools/determinism_guard.py` exists/gets added, keep it focused on sim-code directories only (avoid false positives in pure UI/graphics).",
                "Please provide a short list of forbidden patterns (time.time, pygame ticks in sim, random.* in sim) to add to the checklist doc."
              ]
            },
            "05": {
              "status": "acknowledged_with_risk_review",
              "pm_reply": [
                "Your completion-based `attack_lair` bounty payout is high-leverage and aligns with Majesty; accepted in principle, but we must verify it's stable and doesn't break other bounty types.",
                "Decision: we will NOT hard-commit STARTING_GOLD=1500 without a quick manual feel test; treat it as a tuning candidate.",
                "Decision: modifier-key bounty tiers are acceptable for WK1 only if Agent 8 adds a minimal HUD hint; otherwise keep a single default bounty reward for Build A."
              ],
              "asks": [
                "Please list exactly which files changed and confirm `qa_smoke --quick` passes after your changes.",
                "If typed bounties beyond attack_lair exist, ensure their claim semantics remain correct (no accidental proximity-claim)."
              ]
            },
            "06": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: store only last decision; record on meaningful transitions only; keep reason strings short.",
                "Decision: show intent + last decision in the main hero panel for Build A (not debug-only).",
                "Decision: use `source` values but keep them simple (`llm`, `mock`, `fallback`, `heuristic`, `system`)."
              ],
              "asks": [
                "Please align with Agent 3's contract keys/types to avoid schema drift.",
                "If you add validation/allowlist logic, ensure fallback behavior is deterministic and never blocks the sim."
              ]
            },
            "07": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: pacing nudge via sim-time with HUD tip and optional starter lair bounty fits FS-3 and should land in Build B.",
                "Guardrail: auto-bounty must never trigger if the player has placed any bounty; and must charge economy (no freebies)."
              ],
              "asks": [
                "Please ensure the nudge is behind a small config/flag so QA can force/disable it.",
                "Coordinate with Agent 5 on `attack_lair` completion semantics so the starter bounty reliably teaches lair clearing."
              ]
            },
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: copy/layout rules; keep bounty world labels compact (R:N + tier) and truncate hero reason strings.",
                "Decision: help overlay default OFF, but add an always-visible hint (F3: Help).",
                "Decision: attractiveness tier is global/simple for Build A."
              ],
              "asks": [
                "Please ensure UI additions avoid per-frame allocations; cache formatted strings where possible.",
                "Add a minimal HUD hint for bounty tier modifiers only if we ship the tiered controls in WK1."
              ]
            },
            "09": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: procedural/cached icon approach is great as a non-blocking placeholder.",
                "Decision: go with value-contrast-first; tier colors Low=gray, Med=gold, High=green."
              ],
              "asks": [
                "If implemented, keep icon generation cached and ensure nearest-neighbor scaling only.",
                "Defer always-visible composite badges if clutter becomes an issue; prefer hover/selection if needed."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: prioritize caching UI overlay surfaces and cadenced refresh; we will treat O(H*B) scans as a regression risk.",
                "Decision: no hard perf budget number this week; instead record a baseline from the headless benchmark and prevent regressions."
              ],
              "asks": [
                "Please document the benchmark command(s) and where outputs/CSV go (if applicable).",
                "After responders/attractiveness land, add a benchmark profile that includes bounties to quantify scoring cost."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: qa_smoke --quick becomes mandatory pre-merge for Build A and Build B.",
                "Decision: duplicate hero-name collisions remain a warning for now (not a failing condition) unless they break behavior determinism.",
                "Good call on replacing wall-clock + global RNG usage; that aligns with the determinism gate."
              ],
              "asks": [
                "Please ensure QA assertions remain non-flaky by using the deterministic scenario preset (so tuning doesn't break the gate).",
                "If you touched AI modules, coordinate with Agent 6 to ensure intent/decision logging semantics match."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: dedicated deterministic `intent_bounty` scenario is exactly what we need for fast iteration.",
                "Decision: responders field enforcement can wait until responder tracking is implemented; for now, require claim evidence and non-empty intent.",
                "Decision: hero-name duplicates remain warning-only for now."
              ],
              "asks": [
                "Please add the command(s) to the sprint checklist doc so every agent runs the same gate.",
                "After responder tracking lands, tighten QA to assert explicit responder counts > 0 in the scenario."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: patch note structure; we will only publish verified bullets that are merged + QA-confirmed.",
                "Decision: public labeling will be Prototype semantic version bumps (e.g., v1.2.1 for Build A, v1.2.2 for Build B) unless we decide otherwise later.",
                "Yes: each post should include a short reminder about mock/no-LLM mode (no API keys required)."
              ],
              "asks": [
                "After Build A code merges, update the draft with exact shipped bullets + known issues from QA.",
                "After Build B merges, do the same and include the early pacing guardrail description."
              ]
            }
          },
          "pm_integration_order": [
            "Merge/land thin contracts (Agent 3) and hero intent/last decision logging semantics (Agent 6).",
            "Land bounty responders + global attractiveness tier (Agent 3/8).",
            "Land UI display for hero intent/last decision and bounty overlay (Agent 8) + optional icons (Agent 9).",
            "Ensure qa_smoke --quick + deterministic scenario gate is green (Agents 11/12) before tagging Build A.",
            "Land early pacing guardrail (Agent 7) + any tuning (Agent 5) for Build B, then re-run QA/perf checks."
          ],
          "pm_open_questions_resolved": [
            "FS-3 split: Build B only.",
            "Intent taxonomy: lock full list for WK1.",
            "Decision history: last-decision only.",
            "Attractiveness: global/simple tier for Build A."
          ]
        },
        "wk1_r2": {
          "round_meta": {
            "prompt_set_id": "wk1_final_changes_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final changes round based on human playtest feedback. Only agents with remaining issues are contacted."
          },
          "bug_tickets": [
            {
              "id": "WK1-BUG-001",
              "title": "Hero panel 'Last decision' stays '(none yet)' in --no-llm play",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Select a hero after ~60s of sim time",
                "Observe 'Last decision' line remains '(none yet)'"
              ],
              "expected": "Hero panel shows last decision (action + reason + age) after a hero has taken any meaningful action (bounty pursue, engage enemy, retreat, shop, etc.).",
              "actual": "Hero panel always shows '(none yet)' in no-LLM mode.",
              "evidence": "Human playtest report; QA smoke passes but doesn't validate hero panel text.",
              "suspected_area": [
                "game/ui/hud.py (hero panel formatting currently reads LLM-only fields)",
                "game/entities/hero.py (source of truth: hero.last_decision / hero.get_intent_snapshot())"
              ],
              "constraints": [
                "Use sim-time for decision age display (no wall-clock).",
                "Avoid per-frame allocations; cache formatted text/surfaces if needed."
              ],
              "proposed_fix": [
                "Update HUD hero panel to read hero.get_intent_snapshot() or hero.last_decision (HeroDecisionRecord).",
                "Keep fallback behavior safe if fields are missing (placeholder OK early)."
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "After 30–90s, select hero and verify Last decision is not '(none yet)' for at least one hero",
                "Run: python tools/qa_smoke.py --quick (must remain PASS)"
              ],
              "integration_notes": {
                "depends_on": [
                  "Agent 03 contract field names (hero intent/decision snapshot) if needed"
                ],
                "risk_notes": [
                  "UI currently uses legacy LLM-only fields; ensure new code path works in all modes"
                ]
              },
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-002",
              "title": "Bounty placement is unclear to players (controls + tiers not discoverable)",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Try to place a bounty without reading console help",
                "Unclear how to place bounty and where it will land"
              ],
              "expected": "Player can discover how to place bounties quickly (key + placement behavior + cost).",
              "actual": "Player doesn't know the control path to place a bounty.",
              "suspected_area": [
                "HUD help overlay copy",
                "In-game tip messaging"
              ],
              "constraints": [
                "Keep HUD minimal; avoid spam",
                "Explain tiers only if we keep tiered bounties for WK1"
              ],
              "proposed_fix": [
                "Update help overlay to explicitly say: 'B: place bounty at mouse cursor (Shift/Ctrl for tiers)'",
                "Add a one-time toast hint on first minute if no bounty placed (already present tip text; ensure it’s visible and accurate)"
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "Press F3 to view help; confirm bounty instructions are explicit",
                "Press B with mouse over ground; confirm bounty appears at cursor and gold decreases"
              ],
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-003",
              "title": "QA smoke reports bounty responder attribute missing (contract mismatch / UI-only field names)",
              "severity": "minor",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "qa_smoke",
              "repro_steps": [
                "Run: python tools/qa_smoke.py --quick",
                "Observe output includes: bounty_responder_attr_present=False"
              ],
              "expected": "Bounty objects expose stable responder/tier fields per contract (so QA can assert them reliably).",
              "actual": "Responder/tier appears to be computed as UI-only fields (QA can’t detect contract fields).",
              "evidence": "qa_smoke output: bounty_responder_attr_present=False while scenario passes.",
              "suspected_area": [
                "game/systems/bounty.py field naming (ui_responders vs contract fields)",
                "game/sim/contracts.py expectations"
              ],
              "constraints": [
                "Deterministic computation only; stable ordering",
                "Avoid O(N_heroes*N_bounties) per-tick if possible"
              ],
              "proposed_fix": [
                "Align bounty responder/tier fields with contract names (e.g., responders + attractiveness_tier) while preserving UI caches",
                "Update QA detection to check the stable contract fields"
              ],
              "acceptance_test": [
                "Run: python tools/qa_smoke.py --quick and confirm bounty_responder_attr_present=True",
                "Run: python main.py --no-llm and verify bounty overlay still renders and remains performant"
              ],
              "status": "assigned"
            }
          ],
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Please address WK1-BUG-003 (contract mismatch): ensure bounties expose stable responder/tier fields per contract (responders + attractiveness_tier, optional score). Keep existing UI caches if needed. Update/verify qa_smoke reports bounty_responder_attr_present=True. Gate: python tools/qa_smoke.py --quick must PASS."
            },
            "08": {
              "status": "requested",
              "message": "Please address WK1-BUG-001 and WK1-BUG-002: hero panel should display last decision in --no-llm by reading hero.last_decision / hero.get_intent_snapshot (not LLM-only fields). Also update help/UX so bounty placement is discoverable: 'B places bounty at mouse cursor' and mention Shift/Ctrl tiers only if we keep tiered bounties. Provide before/after screenshots if possible. Gate: python tools/qa_smoke.py --quick must PASS."
            }
          }
        },
        "wk1_r3": {
          "round_meta": {
            "prompt_set_id": "wk1_wrap_up_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final wrap-up round. Only agents with blockers/late-breaking issues should respond."
          },
          "pm_instruction": "If you have last-minute blockers or need cross-agent coordination to finish WK1 Build A, log them under your agent file in this round and tag the owner(s). If no blockers, do not respond.",
          "status": "resolved",
          "pm_wrapup_notes": [
            "Agent 05 raised a Build A scope-condition blocker: (1) tiered bounty placement requires a HUD hint; (2) STARTING_GOLD=1500 requires explicit approval.",
            "Resolved: Agent 08 shipped explicit help-overlay copy + early-session hint for bounty tiers/placement (wk1_r2).",
            "Resolved: Human playtest feedback confirmed gold tightness feels good; approve STARTING_GOLD=1500 for Prototype v1.2.1 (Build A).",
            "Gate status: python tools/qa_smoke.py --quick => PASS (determinism_guard PASS; bounty_responder_attr_present=True)."
          ],
          "pm_message_for_agent_05": "Blocker resolved. Build A ships tiered bounty placement WITH the new HUD/help hint from Agent 08. STARTING_GOLD=1500 is explicitly approved for Build A based on human playtest feedback (gold tightness feels good). No further action needed."
        }
      }
    },
    "wk2-hero-polish-ai-sprites": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk2-hero-polish-ai-sprites_5318e148.plan.md",
        "notes": "WK2 PM hub: Round-based delegation for hero AI anti-jank + core hero sprite pipeline."
      },
      "rounds": {
        "wk2_r1": {
          "round_meta": {
            "prompt_set_id": "wk2_kickoff_r1_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 1 is the async meeting stage: acceptance criteria + contracts + deterministic repro/QA harness. Some non-active agents responded due to accidental broadcast; they are stood down below."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "02_GameDirector_ProductOwner",
                "03_TechnicalDirector_Architecture",
                "06_AIBehaviorDirector_LLM",
                "08_UX_UI_Director",
                "09_ArtDirector_Pixel_Animation_VFX",
                "11_QA_TestEngineering_Lead",
                "12_ToolsDevEx_Lead"
              ],
              "consult_only_agents": [
                "04_NetworkingDeterminism_Lead",
                "05_GameplaySystemsDesigner",
                "10_PerformanceStability_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "silent_agents": [
                "07_ContentScenarioDirector"
              ],
              "note": "Only Active agents should respond in wk2_r2 unless PM explicitly pings others."
            },
            "build_split": {
              "build_a_midweek": [
                "No combat while inside buildings (hard gate)",
                "Reduced oscillation / target thrash (commitment window + hysteresis)",
                "Deterministic stuck detection + deterministic recovery (repath/adjacent/goal reset)",
                "Debug-only visibility for stuck/unstuck counters"
              ],
              "build_b_endweek": [
                "4-class hero sprites (warrior/ranger/rogue/wizard) across idle/walk/attack/hurt/inside",
                "Animation readability pass (no jitter/flicker; state matches gameplay state)",
                "Final stability/perf pass"
              ]
            },
            "contracts_locked_from_agent_03": {
              "combat_gating": [
                "Hero.can_attack: bool",
                "Hero.attack_blocked_reason: str (optional)",
                "Rule: if hero.is_inside_building is True => can_attack=False"
              ],
              "stuck_signals": [
                "Hero.stuck_active: bool",
                "Hero.stuck_since_ms: int|null (sim-time)",
                "Hero.last_progress_ms: int (sim-time)",
                "Hero.unstuck_attempts: int",
                "Hero.stuck_reason: str",
                "Hero.get_stuck_snapshot(now_ms=None)->dict"
              ],
              "determinism_guardrails": [
                "Use game.sim.timebase.now_ms() for all timeouts/ages; no wall-clock",
                "No random.* in sim; stable ordering for tie-breaks"
              ]
            },
            "acceptance_thresholds_locked": {
              "stuck_displacement_tiles_threshold": 0.25,
              "stuck_time_s": 2.0,
              "unstuck_max_attempts_per_target": 3,
              "unstuck_backoff_s": 0.5,
              "target_commit_window_s": 1.5,
              "bounty_commit_window_s": 2.5,
              "oscillation_note": "Override commitment immediately for: target died/invalid, bounty removed/claimed, target unreachable."
            },
            "qa_assertion_policy": {
              "inside_combat_gate": "P0 assert: no damage while inside buildings. P1 (if available): also assert no 'attack event/animation trigger' while inside.",
              "stuck_recovery_gate": "Deterministic scenario must show >=1 stuck detection and >=1 recovery attempt OR prove no hero remains stuck >5s in repro.",
              "gate_commands": [
                "python tools/qa_smoke.py --quick",
                "python main.py --no-llm",
                "python main.py --provider mock"
              ]
            },
            "ui_policy": {
              "stuck_indicators": "Debug-only for Build A (avoid player-facing clutter).",
              "inside_state_visibility": "Show inside-building status in selected hero panel if available (can be debug-only if needed)."
            },
            "logging_conventions": {
              "prompt_set_id_canonical": "wk2_kickoff_r1_v1",
              "note": "Some agents logged prompt_set_id=wk2_prompts_v1; acceptable. Use canonical IDs going forward (wk2_exec_r2_v1, wk2_wrap_r3_v1)."
            }
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Acceptance criteria are locked as written (inside-combat gate, oscillation limits, stuck recovery, animation readability for Build B).",
                "PM decision: debug visibility for stuck is debug-only in Build A."
              ],
              "asks": [
                "No further action in Round 2 unless a vision/feel dispute appears."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Contract surface is accepted and treated as LOCKED for WK2 (Hero.can_attack + stuck snapshot fields).",
                "Proceed to Round 2 as contract reviewer/signoff; avoid import cycles (UI must not import AI)."
              ],
              "asks": [
                "In Round 2, please review any PRs touching combat/hero fields for contract compliance and determinism pitfalls.",
                "Pick a single location for tunables (constants module) that AI/QA can reference without cycles."
              ]
            },
            "06": {
              "status": "assigned",
              "pm_reply": [
                "Greenlight for Build A implementation after contracts: implement inside-combat gating at the authoritative attack execution site and add anti-oscillation + stuck recovery in BasicAI (sim-time based).",
                "Use the exact thresholds in pm_decisions.acceptance_thresholds_locked unless you find a measured reason to adjust."
              ],
              "asks": [
                "Do P0 in this order: (1) combat gating (no damage while inside), (2) deterministic stuck recovery + counters, (3) anti-oscillation commitment/hysteresis.",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS and the deterministic repro scenario (once Tools/QA land it)."
              ]
            },
            "08": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with minimal debug-only stuck indicator UI reading Agent 3 contract fields (get_stuck_snapshot) and show inside status when possible.",
                "Keep additions cache-friendly and rate-limited; do not add player-facing clutter for Build A."
              ],
              "asks": [
                "Implement Build A HUD/debug reads after Agent 6/3 fields exist; keep debug-only by default.",
                "Coordinate with QA on how to toggle debug mode for verification (if needed)."
              ]
            },
            "09": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with Build B sprite production in the specified folder conventions; no Build A dependency.",
                "Frame count guidance accepted; ensure pixel-crisp export (nearest-neighbor, no smoothing)."
              ],
              "asks": [
                "In Round 2, confirm whether any loader changes are required; if not, remain assets+docs only."
              ]
            },
            "11": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to wire deterministic WK2 QA gates once Agent 12 lands scenarios: add profiles into qa_smoke --quick and fail on contract-driven assertions.",
                "PM decision: P0 for inside-combat is 'no damage while inside'; treat 'no attack animation/events' as P1 if instrumentation exists."
              ],
              "asks": [
                "Define 'attack event' for QA as damage application first; add 'attack attempted while inside' counter only if easy and deterministic.",
                "Keep tests non-flaky; rely on deterministic scenario, not emergent sim."
              ]
            },
            "12": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to implement deterministic scenarios in observe_sync: hero_stuck_repro (required) and inside_combat_repro (nice-to-have if time).",
                "Confirm prompt_set_id: use wk2_kickoff_r1_v1 (already fine if your log says wk2_prompts_v1)."
              ],
              "asks": [
                "Implement scenario setup that forces repeatable stalls (do not rely on emergent pathing randomness).",
                "Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks; then coordinate with Agent 11 to assert them in qa_smoke."
              ]
            },
            "04": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—determinism guidance is noted. You are consult-only for WK2; no further action unless pinged."
              ],
              "asks": []
            },
            "05": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—tuning defaults captured. You are consult-only for WK2; no further action unless pinged (we may ask for tuning review after repro harness exists)."
              ],
              "asks": []
            },
            "07": {
              "status": "stand_down_silent",
              "pm_reply": [
                "You were not on the active roster for WK2. Please stand down unless pinged for a specific scenario/content hook later."
              ],
              "asks": []
            },
            "10": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—perf gate suggestions captured. You are consult-only for WK2; no further action unless a perf regression appears."
              ],
              "asks": []
            },
            "13": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—release scaffolds are fine. You are consult-only for WK2; no further action until end-of-sprint when we draft/post Build A/B notes."
              ],
              "asks": []
            }
          },
          "pm_integration_order": [
            "Lock contracts and field names (Agent 3) — treat as API for WK2.",
            "Tools deterministic repro scenario (Agent 12) + QA assertions wiring (Agent 11).",
            "Combat gating (Agent 6) + stuck recovery (Agent 6) validated via scenario + qa_smoke.",
            "Anti-oscillation guardrails (Agent 6) validated via scenario + manual smoke.",
            "Debug-only stuck/inside UI reads (Agent 8) once fields exist; keep allocations low.",
            "Build A tag once qa_smoke --quick is green and 10-minute manual smoke in --no-llm and --provider mock passes.",
            "Build B: sprite asset drop (Agent 9) + animation readability pass + final QA."
          ],
          "pm_open_questions_resolved": [
            "Stuck/unstuck indicators are debug-only for Build A.",
            "Inside-combat QA asserts P0: no damage while inside; P1: no attack event/animation if instrumentation exists.",
            "Canonical prompt_set_id naming for WK2 rounds going forward."
          ]
        },
        "wk2_r2": {
          "round_meta": {
            "prompt_set_id": "wk2_exec_r2_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 2 execution: implement against locked contracts, wire deterministic repro + qa_smoke gates, and prepare Build A."
          },
          "pm_instruction": "WK2 Round 2 (wk2_r2): Execute. Only ACTIVE agents should respond. Implement against Agent 3 locked contracts and the acceptance thresholds in wk2_r1 pm_decisions. Provide evidence (commands + PASS) and keep changes deterministic/perf-safe. Consult-only agents do not respond unless pinged.",
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Round 2: treat your wk2_r1 contract surface as LOCKED. Please review upcoming PRs for contract compliance + determinism pitfalls (sim-time only, no random.*, stable ordering). Also pick a single tunables location (constants module) that AI/QA can read without cycles and note it in your log."
            },
            "06": {
              "status": "requested",
              "message": "Round 2: implement Build A P0. Order: (1) inside-combat gating at authoritative attack/damage site using `hero.can_attack`/`is_inside_building` (no damage while inside), (2) stuck detection + deterministic recovery + counters per Agent 3 fields (sim-time), (3) anti-oscillation commitment window + hysteresis using locked thresholds. Evidence: `python tools/qa_smoke.py --quick` PASS + deterministic repro scenario run once Tools lands."
            },
            "08": {
              "status": "requested",
              "message": "Round 2: implement minimal debug-only UI reads: selected hero panel shows inside status and stuck snapshot (reason, attempts, time stuck) by reading Agent 3 contract fields (`get_stuck_snapshot`). Keep rate-limited and cache-friendly; no player-facing clutter. Ensure `python tools/qa_smoke.py --quick` stays PASS."
            },
            "09": {
              "status": "requested",
              "message": "Round 2: proceed with Build B prep (assets+docs only): confirm folder conventions match loader, create/extend docs for sprite pipeline, and begin producing frames for the 4 classes (idle/walk/attack/hurt/inside). No Build A dependencies."
            },
            "11": {
              "status": "requested",
              "message": "Round 2: after Agent 12 lands deterministic scenarios, wire them into `python tools/qa_smoke.py --quick` with non-flaky assertions. P0: inside-combat asserts no damage while inside. Stuck: assert >=1 stuck detection and >=1 recovery attempt OR bounded max stuck time in scenario. Keep oscillation checks optional/report-only until thresholds are proven stable."
            },
            "12": {
              "status": "requested",
              "message": "Round 2: implement deterministic scenarios in `tools/observe_sync.py`: required `--scenario hero_stuck_repro` (forces repeatable stall) and optional `--scenario inside_combat_repro` (hero inside with enemies). Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks. Coordinate with Agent 11 to assert these in `qa_smoke --quick`."
            }
          },
          "pm_round2_results": {
            "high_level_status": "mostly_complete",
            "what_landed": [
              "Agent 06 implemented Build A P0: inside-combat damage gating via Hero.can_attack + CombatSystem hard gate; deterministic stuck detection/recovery; anti-oscillation commitment windows. Gates: qa_smoke PASS + boot smoke OK.",
              "Agent 08 implemented debug-only HUD visibility for inside state + stuck snapshot + attack blocked reason; added game_state.debug_ui gating and caching. Gate: qa_smoke PASS.",
              "Agent 03 added canonical tunables module `game/sim/hero_guardrails_tunables.py` for locked thresholds; qa_smoke PASS.",
              "Agent 12 added deterministic observe scenarios: hero_stuck_repro (required) and inside_combat_repro (optional), plus counters; qa_smoke PASS.",
              "Agent 09 completed Build B prep (docs + folder skeletons) and fixed a HUD init crash discovered during manual smoke; qa_smoke PASS."
            ],
            "still_pending_before_tagging_build_a": [
              "Agent 11 must wire Agent 12 scenarios into `python tools/qa_smoke.py --quick` with non-flaky assertions (hero_stuck_repro required).",
              "PM/human must complete the 10-minute interactive manual smoke in both modes: `python main.py --no-llm` and `python main.py --provider mock` (player-visible checks: no damage while inside, stuck recovery observed at least once in the repro, reduced oscillation)."
            ],
            "integration_risks": [
              "Potential merge conflict risk: `game/ui/hud.py` was modified by Agents 08 and 09 in wk2_r2; ensure Agent 09's HUD init crash fix is preserved when integrating Agent 08's debug UI additions.",
              "Drift risk: Agent 06 should import locked thresholds from `game.sim.hero_guardrails_tunables` (avoid duplicating constants)."
            ]
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Thanks—gate PASS evidence recorded and no vision disputes. We still need the interactive 10-minute manual smoke before tagging Build A."
              ],
              "asks": []
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Approved: `game/sim/hero_guardrails_tunables.py` is now the single source of truth for thresholds. Great call."
              ],
              "asks": [
                "Please sanity-review any final merges for contract compliance and ensure no cycles were introduced by the new tunables module."
              ]
            },
            "06": {
              "status": "in_review",
              "pm_reply": [
                "Excellent—core Build A P0 is implemented and gates are green.",
                "Please switch any hard-coded thresholds to import from `game.sim.hero_guardrails_tunables` so AI/QA/tools cannot drift."
              ],
              "asks": [
                "Run Agent 12's deterministic scenarios after integration and paste the counter lines into your log: `hero_stuck_repro` (required) and `inside_combat_repro` (optional)."
              ]
            },
            "08": {
              "status": "in_review",
              "pm_reply": [
                "Approved direction: debug-only visibility + caching + game_state.debug_ui gating.",
                "Important: coordinate merge with Agent 09 since both touched `game/ui/hud.py`."
              ],
              "asks": [
                "When integrating, ensure the HUD init crash fix from Agent 09 is preserved alongside your debug UI changes."
              ]
            },
            "09": {
              "status": "in_review",
              "pm_reply": [
                "Thanks—Build B pipeline prep is on track.",
                "Note: you fixed a HUD crash (helpful), but for process: please ensure any cross-domain fixes are clearly logged (which you did) and call out merge-risk if another agent touched the same file."
              ],
              "asks": [
                "When integrating with Agent 08 HUD work, double-check `hud.py` keeps your messages init fix."
              ]
            },
            "11": {
              "status": "action_required",
              "pm_reply": [
                "Agent 12 has now landed `hero_stuck_repro` and `inside_combat_repro`. Please wire `hero_stuck_repro` into `tools/qa_smoke.py --quick` as a failing profile with deterministic assertions."
              ],
              "asks": [
                "Update `tools/qa_smoke.py` to run the scenario and assert either (a) stuck_events>=1 AND unstuck_attempts>=1, or (b) bounded max_stuck_ms (per plan).",
                "Define the inside-combat P0 check as 'no damage while inside' (as previously locked).",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS after wiring."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Great—deterministic repro scenarios and counters are exactly what we needed.",
                "Thanks for keeping assertions conditioned to field presence to avoid flake during rollout."
              ],
              "asks": [
                "Please coordinate with Agent 11 on the exact counter names being asserted in qa_smoke (stuck_events, unstuck_attempts, max_stuck_ms, inside_attack_blocks)."
              ]
            }
          },
          "status": "in_review"
        },
        "wk2_r3": {
          "round_meta": {
            "prompt_set_id": "wk2_wrap_r3_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 3 is final sync + blockers only. Goal: close remaining automation gaps and declare Build A ready for human manual smoke + tag."
          },
          "pm_decisions": {
            "automation_status": [
              "Agent 11 has wired `hero_stuck_repro` into `python tools/qa_smoke.py --quick` (now a mandatory failing profile).",
              "Agent 06 has imported locked thresholds from `game.sim.hero_guardrails_tunables` (no duplicated constants).",
              "Agents 08+09 confirmed `game/ui/hud.py` integration preserves both the HUD init crash fix and debug-only stuck/inside indicators.",
              "Agent 12 confirmed the stable counter keys/format for scenario parsing."
            ],
            "build_a_readiness": "Automated gates are satisfied. Remaining gate is HUMAN interactive manual smoke (10 minutes) in both modes before tagging Build A."
          },
          "pm_wrapup_notes": [
            "Evidence (automated): `python tools/qa_smoke.py --quick` PASS including hero_stuck_repro profile.",
            "Evidence (deterministic repro): Agent 11 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=11 unstuck_attempts=31 inside_attack_blocks=0 max_stuck_ms=3483` during qa_smoke run.",
            "Evidence (AI repro run): Agent 06 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=25 unstuck_attempts=103 inside_attack_blocks=0 max_stuck_ms=19983` and `qa_smoke` PASS.",
            "Integration risk cleared: `game/ui/hud.py` contains both messages init crash fix + debug_ui gated indicators; qa_smoke PASS after merge."
          ],
          "pm_remaining_steps_for_human": [
            "Run 10-minute interactive manual smoke: `python main.py --no-llm`.",
            "Run 10-minute interactive manual smoke: `python main.py --provider mock`.",
            "Confirm player-visible checks: (1) heroes do not deal damage while inside buildings, (2) fewer freezes/unstuck feels reasonable, (3) reduced target thrash/oscillation, (4) debug panel (F1) shows stuck/attack-block info when applicable.",
            "If both manual runs look good: tag Build A and (optionally) ping Agent 13 to draft/post Build A notes."
          ],
          "pm_message_for_all_agents": "WK2 Build A automation is complete (qa_smoke includes hero_stuck_repro). Studio is now waiting on HUMAN manual smoke (10 minutes in --no-llm and provider=mock) before tagging Build A. All agents stand down unless you have a blocker/regression to report.",
          "status": "ready_for_manual_smoke"
        }
      }
    }
  }
}

