{
  "schema_version": "2.0",
  "agent": { "id": "01", "name": "ExecutiveProducer_PM" },
  "notes": [
    "This file is owned by Agent 01 only.",
    "Structure nests rounds inside sprints to keep history organized.",
    "Preferred workflow: add/update only the current sprint+round; do not rewrite past rounds."
  ],
  "sprints": {
    "wk1-broad-sweep-midweek-endweek": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk1-broad-sweep-midweek-endweek_3ca65814.plan.md",
        "notes": "PM synthesis + responses to all agents for this sprint live here."
      },
      "rounds": {
        "wk1_r1": {
          "round_meta": {
            "prompt_set_id": "wk1_prompts_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "visibility": "All agents should read this round entry for PM decisions + follow-ups."
          },
          "pm_decisions": {
            "build_split": {
              "build_a_midweek": [
                "FS-1: Hero intent + last decision inspect (UI-visible)",
                "FS-2: Bounty clarity: responders + attractiveness (UI-visible)",
                "QA/Tools gates required: qa_smoke --quick (includes determinism guard) must pass"
              ],
              "build_b_endweek": [
                "FS-3: Early pacing guardrail (tip + optional starter objective) plus tuning polish",
                "Perf/stability pass + any follow-up QA tightening"
              ]
            },
            "intent_taxonomy": [
              "idle",
              "pursuing_bounty",
              "shopping",
              "returning_to_safety",
              "engaging_enemy",
              "defending_building",
              "attacking_lair"
            ],
            "decision_history_policy": "P0 = store ONLY the last decision per hero (no ring buffer) to minimize perf/UI risk.",
            "bounty_attractiveness_policy": "Build A uses a GLOBAL/hero-agnostic tier (low/med/high) computed deterministically. Per-hero scoring can be revisited later.",
            "help_overlay_default": "Default OFF (clean HUD) with a persistent hint (e.g., 'F3: Help'). Revisit after onboarding feedback.",
            "tier_color_language": "Low=gray, Med=gold, High=green (value-contrast first; must remain readable under fog-of-war).",
            "determinism_gate": "Mandatory in Build A/B: no wall-clock time usage inside sim logic; no global random.* usage for sim; stable ordering/tie-breaks."
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: create `docs/sprint/wk1_acceptance_checklist.md` as the single QA signoff doc for Build A and Build B.",
                "Decision: FS-3 (early pacing guardrail) is Build B only (but Build A may include a non-invasive HUD help hint if it doesn't change sim state).",
                "Decision: lock full intent taxonomy for WK1 (see pm_decisions.intent_taxonomy)."
              ],
              "asks": [
                "Please draft the 1-page checklist with two sections: Build A gates and Build B gates.",
                "Include explicit 'qa_smoke --quick must pass' and 'mock/no-llm manual smoke (10 min)' in both."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted direction: thin contracts are the right move; UI must only read hero/bounty fields (no AI imports).",
                "Decision: attractiveness tier is global for Build A (your recommendation accepted).",
                "Guardrail: any 'age since decision' must use sim-time/ticks only (no wall-clock)."
              ],
              "asks": [
                "If you already added `game/sim/contracts.py`, please ensure it has zero cyclical imports and minimal serialization helpers.",
                "Coordinate with Agent 8 to ensure UI reads only the contract fields."
              ]
            },
            "04": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: determinism guard must be a release gate this week.",
                "Decision: determinism guard is mandatory in `tools/qa_smoke.py --quick` (not optional).",
                "Decision: UI should display sim-time-based ages for consistency (avoid 'wall-clock vs sim-time' confusion)."
              ],
              "asks": [
                "If a `tools/determinism_guard.py` exists/gets added, keep it focused on sim-code directories only (avoid false positives in pure UI/graphics).",
                "Please provide a short list of forbidden patterns (time.time, pygame ticks in sim, random.* in sim) to add to the checklist doc."
              ]
            },
            "05": {
              "status": "acknowledged_with_risk_review",
              "pm_reply": [
                "Your completion-based `attack_lair` bounty payout is high-leverage and aligns with Majesty; accepted in principle, but we must verify it's stable and doesn't break other bounty types.",
                "Decision: we will NOT hard-commit STARTING_GOLD=1500 without a quick manual feel test; treat it as a tuning candidate.",
                "Decision: modifier-key bounty tiers are acceptable for WK1 only if Agent 8 adds a minimal HUD hint; otherwise keep a single default bounty reward for Build A."
              ],
              "asks": [
                "Please list exactly which files changed and confirm `qa_smoke --quick` passes after your changes.",
                "If typed bounties beyond attack_lair exist, ensure their claim semantics remain correct (no accidental proximity-claim)."
              ]
            },
            "06": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: store only last decision; record on meaningful transitions only; keep reason strings short.",
                "Decision: show intent + last decision in the main hero panel for Build A (not debug-only).",
                "Decision: use `source` values but keep them simple (`llm`, `mock`, `fallback`, `heuristic`, `system`)."
              ],
              "asks": [
                "Please align with Agent 3's contract keys/types to avoid schema drift.",
                "If you add validation/allowlist logic, ensure fallback behavior is deterministic and never blocks the sim."
              ]
            },
            "07": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: pacing nudge via sim-time with HUD tip and optional starter lair bounty fits FS-3 and should land in Build B.",
                "Guardrail: auto-bounty must never trigger if the player has placed any bounty; and must charge economy (no freebies)."
              ],
              "asks": [
                "Please ensure the nudge is behind a small config/flag so QA can force/disable it.",
                "Coordinate with Agent 5 on `attack_lair` completion semantics so the starter bounty reliably teaches lair clearing."
              ]
            },
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: copy/layout rules; keep bounty world labels compact (R:N + tier) and truncate hero reason strings.",
                "Decision: help overlay default OFF, but add an always-visible hint (F3: Help).",
                "Decision: attractiveness tier is global/simple for Build A."
              ],
              "asks": [
                "Please ensure UI additions avoid per-frame allocations; cache formatted strings where possible.",
                "Add a minimal HUD hint for bounty tier modifiers only if we ship the tiered controls in WK1."
              ]
            },
            "09": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: procedural/cached icon approach is great as a non-blocking placeholder.",
                "Decision: go with value-contrast-first; tier colors Low=gray, Med=gold, High=green."
              ],
              "asks": [
                "If implemented, keep icon generation cached and ensure nearest-neighbor scaling only.",
                "Defer always-visible composite badges if clutter becomes an issue; prefer hover/selection if needed."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: prioritize caching UI overlay surfaces and cadenced refresh; we will treat O(H*B) scans as a regression risk.",
                "Decision: no hard perf budget number this week; instead record a baseline from the headless benchmark and prevent regressions."
              ],
              "asks": [
                "Please document the benchmark command(s) and where outputs/CSV go (if applicable).",
                "After responders/attractiveness land, add a benchmark profile that includes bounties to quantify scoring cost."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: qa_smoke --quick becomes mandatory pre-merge for Build A and Build B.",
                "Decision: duplicate hero-name collisions remain a warning for now (not a failing condition) unless they break behavior determinism.",
                "Good call on replacing wall-clock + global RNG usage; that aligns with the determinism gate."
              ],
              "asks": [
                "Please ensure QA assertions remain non-flaky by using the deterministic scenario preset (so tuning doesn't break the gate).",
                "If you touched AI modules, coordinate with Agent 6 to ensure intent/decision logging semantics match."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: dedicated deterministic `intent_bounty` scenario is exactly what we need for fast iteration.",
                "Decision: responders field enforcement can wait until responder tracking is implemented; for now, require claim evidence and non-empty intent.",
                "Decision: hero-name duplicates remain warning-only for now."
              ],
              "asks": [
                "Please add the command(s) to the sprint checklist doc so every agent runs the same gate.",
                "After responder tracking lands, tighten QA to assert explicit responder counts > 0 in the scenario."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: patch note structure; we will only publish verified bullets that are merged + QA-confirmed.",
                "Decision: public labeling will be Prototype semantic version bumps (e.g., v1.2.1 for Build A, v1.2.2 for Build B) unless we decide otherwise later.",
                "Yes: each post should include a short reminder about mock/no-LLM mode (no API keys required)."
              ],
              "asks": [
                "After Build A code merges, update the draft with exact shipped bullets + known issues from QA.",
                "After Build B merges, do the same and include the early pacing guardrail description."
              ]
            }
          },
          "pm_integration_order": [
            "Merge/land thin contracts (Agent 3) and hero intent/last decision logging semantics (Agent 6).",
            "Land bounty responders + global attractiveness tier (Agent 3/8).",
            "Land UI display for hero intent/last decision and bounty overlay (Agent 8) + optional icons (Agent 9).",
            "Ensure qa_smoke --quick + deterministic scenario gate is green (Agents 11/12) before tagging Build A.",
            "Land early pacing guardrail (Agent 7) + any tuning (Agent 5) for Build B, then re-run QA/perf checks."
          ],
          "pm_open_questions_resolved": [
            "FS-3 split: Build B only.",
            "Intent taxonomy: lock full list for WK1.",
            "Decision history: last-decision only.",
            "Attractiveness: global/simple tier for Build A."
          ]
        },
        "wk1_r2": {
          "round_meta": {
            "prompt_set_id": "wk1_final_changes_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final changes round based on human playtest feedback. Only agents with remaining issues are contacted."
          },
          "bug_tickets": [
            {
              "id": "WK1-BUG-001",
              "title": "Hero panel 'Last decision' stays '(none yet)' in --no-llm play",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Select a hero after ~60s of sim time",
                "Observe 'Last decision' line remains '(none yet)'"
              ],
              "expected": "Hero panel shows last decision (action + reason + age) after a hero has taken any meaningful action (bounty pursue, engage enemy, retreat, shop, etc.).",
              "actual": "Hero panel always shows '(none yet)' in no-LLM mode.",
              "evidence": "Human playtest report; QA smoke passes but doesn't validate hero panel text.",
              "suspected_area": [
                "game/ui/hud.py (hero panel formatting currently reads LLM-only fields)",
                "game/entities/hero.py (source of truth: hero.last_decision / hero.get_intent_snapshot())"
              ],
              "constraints": [
                "Use sim-time for decision age display (no wall-clock).",
                "Avoid per-frame allocations; cache formatted text/surfaces if needed."
              ],
              "proposed_fix": [
                "Update HUD hero panel to read hero.get_intent_snapshot() or hero.last_decision (HeroDecisionRecord).",
                "Keep fallback behavior safe if fields are missing (placeholder OK early)."
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "After 30–90s, select hero and verify Last decision is not '(none yet)' for at least one hero",
                "Run: python tools/qa_smoke.py --quick (must remain PASS)"
              ],
              "integration_notes": {
                "depends_on": [
                  "Agent 03 contract field names (hero intent/decision snapshot) if needed"
                ],
                "risk_notes": [
                  "UI currently uses legacy LLM-only fields; ensure new code path works in all modes"
                ]
              },
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-002",
              "title": "Bounty placement is unclear to players (controls + tiers not discoverable)",
              "severity": "major",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_playtest",
              "repro_steps": [
                "Run: python main.py --no-llm",
                "Try to place a bounty without reading console help",
                "Unclear how to place bounty and where it will land"
              ],
              "expected": "Player can discover how to place bounties quickly (key + placement behavior + cost).",
              "actual": "Player doesn't know the control path to place a bounty.",
              "suspected_area": [
                "HUD help overlay copy",
                "In-game tip messaging"
              ],
              "constraints": [
                "Keep HUD minimal; avoid spam",
                "Explain tiers only if we keep tiered bounties for WK1"
              ],
              "proposed_fix": [
                "Update help overlay to explicitly say: 'B: place bounty at mouse cursor (Shift/Ctrl for tiers)'",
                "Add a one-time toast hint on first minute if no bounty placed (already present tip text; ensure it’s visible and accurate)"
              ],
              "acceptance_test": [
                "Run: python main.py --no-llm",
                "Press F3 to view help; confirm bounty instructions are explicit",
                "Press B with mouse over ground; confirm bounty appears at cursor and gold decreases"
              ],
              "status": "assigned"
            },
            {
              "id": "WK1-BUG-003",
              "title": "QA smoke reports bounty responder attribute missing (contract mismatch / UI-only field names)",
              "severity": "minor",
              "build_target": "BuildA",
              "owner_agent": "03_TechnicalDirector_Architecture",
              "reporter": "qa_smoke",
              "repro_steps": [
                "Run: python tools/qa_smoke.py --quick",
                "Observe output includes: bounty_responder_attr_present=False"
              ],
              "expected": "Bounty objects expose stable responder/tier fields per contract (so QA can assert them reliably).",
              "actual": "Responder/tier appears to be computed as UI-only fields (QA can’t detect contract fields).",
              "evidence": "qa_smoke output: bounty_responder_attr_present=False while scenario passes.",
              "suspected_area": [
                "game/systems/bounty.py field naming (ui_responders vs contract fields)",
                "game/sim/contracts.py expectations"
              ],
              "constraints": [
                "Deterministic computation only; stable ordering",
                "Avoid O(N_heroes*N_bounties) per-tick if possible"
              ],
              "proposed_fix": [
                "Align bounty responder/tier fields with contract names (e.g., responders + attractiveness_tier) while preserving UI caches",
                "Update QA detection to check the stable contract fields"
              ],
              "acceptance_test": [
                "Run: python tools/qa_smoke.py --quick and confirm bounty_responder_attr_present=True",
                "Run: python main.py --no-llm and verify bounty overlay still renders and remains performant"
              ],
              "status": "assigned"
            }
          ],
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Please address WK1-BUG-003 (contract mismatch): ensure bounties expose stable responder/tier fields per contract (responders + attractiveness_tier, optional score). Keep existing UI caches if needed. Update/verify qa_smoke reports bounty_responder_attr_present=True. Gate: python tools/qa_smoke.py --quick must PASS."
            },
            "08": {
              "status": "requested",
              "message": "Please address WK1-BUG-001 and WK1-BUG-002: hero panel should display last decision in --no-llm by reading hero.last_decision / hero.get_intent_snapshot (not LLM-only fields). Also update help/UX so bounty placement is discoverable: 'B places bounty at mouse cursor' and mention Shift/Ctrl tiers only if we keep tiered bounties. Provide before/after screenshots if possible. Gate: python tools/qa_smoke.py --quick must PASS."
            }
          }
        },
        "wk1_r3": {
          "round_meta": {
            "prompt_set_id": "wk1_wrap_up_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Final wrap-up round. Only agents with blockers/late-breaking issues should respond."
          },
          "pm_instruction": "If you have last-minute blockers or need cross-agent coordination to finish WK1 Build A, log them under your agent file in this round and tag the owner(s). If no blockers, do not respond.",
          "status": "resolved",
          "pm_wrapup_notes": [
            "Agent 05 raised a Build A scope-condition blocker: (1) tiered bounty placement requires a HUD hint; (2) STARTING_GOLD=1500 requires explicit approval.",
            "Resolved: Agent 08 shipped explicit help-overlay copy + early-session hint for bounty tiers/placement (wk1_r2).",
            "Resolved: Human playtest feedback confirmed gold tightness feels good; approve STARTING_GOLD=1500 for Prototype v1.2.1 (Build A).",
            "Gate status: python tools/qa_smoke.py --quick => PASS (determinism_guard PASS; bounty_responder_attr_present=True)."
          ],
          "pm_message_for_agent_05": "Blocker resolved. Build A ships tiered bounty placement WITH the new HUD/help hint from Agent 08. STARTING_GOLD=1500 is explicitly approved for Build A based on human playtest feedback (gold tightness feels good). No further action needed."
        }
      }
    },
    "wk2-hero-polish-ai-sprites": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk2-hero-polish-ai-sprites_5318e148.plan.md",
        "notes": "WK2 PM hub: Round-based delegation for hero AI anti-jank + core hero sprite pipeline."
      },
      "rounds": {
        "wk2_r1": {
          "round_meta": {
            "prompt_set_id": "wk2_kickoff_r1_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 1 is the async meeting stage: acceptance criteria + contracts + deterministic repro/QA harness. Some non-active agents responded due to accidental broadcast; they are stood down below."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "02_GameDirector_ProductOwner",
                "03_TechnicalDirector_Architecture",
                "06_AIBehaviorDirector_LLM",
                "08_UX_UI_Director",
                "09_ArtDirector_Pixel_Animation_VFX",
                "11_QA_TestEngineering_Lead",
                "12_ToolsDevEx_Lead"
              ],
              "consult_only_agents": [
                "04_NetworkingDeterminism_Lead",
                "05_GameplaySystemsDesigner",
                "10_PerformanceStability_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "silent_agents": [
                "07_ContentScenarioDirector"
              ],
              "note": "Only Active agents should respond in wk2_r2 unless PM explicitly pings others."
            },
            "build_split": {
              "build_a_midweek": [
                "No combat while inside buildings (hard gate)",
                "Reduced oscillation / target thrash (commitment window + hysteresis)",
                "Deterministic stuck detection + deterministic recovery (repath/adjacent/goal reset)",
                "Debug-only visibility for stuck/unstuck counters"
              ],
              "build_b_endweek": [
                "4-class hero sprites (warrior/ranger/rogue/wizard) across idle/walk/attack/hurt/inside",
                "Animation readability pass (no jitter/flicker; state matches gameplay state)",
                "Final stability/perf pass"
              ]
            },
            "contracts_locked_from_agent_03": {
              "combat_gating": [
                "Hero.can_attack: bool",
                "Hero.attack_blocked_reason: str (optional)",
                "Rule: if hero.is_inside_building is True => can_attack=False"
              ],
              "stuck_signals": [
                "Hero.stuck_active: bool",
                "Hero.stuck_since_ms: int|null (sim-time)",
                "Hero.last_progress_ms: int (sim-time)",
                "Hero.unstuck_attempts: int",
                "Hero.stuck_reason: str",
                "Hero.get_stuck_snapshot(now_ms=None)->dict"
              ],
              "determinism_guardrails": [
                "Use game.sim.timebase.now_ms() for all timeouts/ages; no wall-clock",
                "No random.* in sim; stable ordering for tie-breaks"
              ]
            },
            "acceptance_thresholds_locked": {
              "stuck_displacement_tiles_threshold": 0.25,
              "stuck_time_s": 2.0,
              "unstuck_max_attempts_per_target": 3,
              "unstuck_backoff_s": 0.5,
              "target_commit_window_s": 1.5,
              "bounty_commit_window_s": 2.5,
              "oscillation_note": "Override commitment immediately for: target died/invalid, bounty removed/claimed, target unreachable."
            },
            "qa_assertion_policy": {
              "inside_combat_gate": "P0 assert: no damage while inside buildings. P1 (if available): also assert no 'attack event/animation trigger' while inside.",
              "stuck_recovery_gate": "Deterministic scenario must show >=1 stuck detection and >=1 recovery attempt OR prove no hero remains stuck >5s in repro.",
              "gate_commands": [
                "python tools/qa_smoke.py --quick",
                "python main.py --no-llm",
                "python main.py --provider mock"
              ]
            },
            "ui_policy": {
              "stuck_indicators": "Debug-only for Build A (avoid player-facing clutter).",
              "inside_state_visibility": "Show inside-building status in selected hero panel if available (can be debug-only if needed)."
            },
            "logging_conventions": {
              "prompt_set_id_canonical": "wk2_kickoff_r1_v1",
              "note": "Some agents logged prompt_set_id=wk2_prompts_v1; acceptable. Use canonical IDs going forward (wk2_exec_r2_v1, wk2_wrap_r3_v1)."
            }
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Acceptance criteria are locked as written (inside-combat gate, oscillation limits, stuck recovery, animation readability for Build B).",
                "PM decision: debug visibility for stuck is debug-only in Build A."
              ],
              "asks": [
                "No further action in Round 2 unless a vision/feel dispute appears."
              ]
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Contract surface is accepted and treated as LOCKED for WK2 (Hero.can_attack + stuck snapshot fields).",
                "Proceed to Round 2 as contract reviewer/signoff; avoid import cycles (UI must not import AI)."
              ],
              "asks": [
                "In Round 2, please review any PRs touching combat/hero fields for contract compliance and determinism pitfalls.",
                "Pick a single location for tunables (constants module) that AI/QA can reference without cycles."
              ]
            },
            "06": {
              "status": "assigned",
              "pm_reply": [
                "Greenlight for Build A implementation after contracts: implement inside-combat gating at the authoritative attack execution site and add anti-oscillation + stuck recovery in BasicAI (sim-time based).",
                "Use the exact thresholds in pm_decisions.acceptance_thresholds_locked unless you find a measured reason to adjust."
              ],
              "asks": [
                "Do P0 in this order: (1) combat gating (no damage while inside), (2) deterministic stuck recovery + counters, (3) anti-oscillation commitment/hysteresis.",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS and the deterministic repro scenario (once Tools/QA land it)."
              ]
            },
            "08": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with minimal debug-only stuck indicator UI reading Agent 3 contract fields (get_stuck_snapshot) and show inside status when possible.",
                "Keep additions cache-friendly and rate-limited; do not add player-facing clutter for Build A."
              ],
              "asks": [
                "Implement Build A HUD/debug reads after Agent 6/3 fields exist; keep debug-only by default.",
                "Coordinate with QA on how to toggle debug mode for verification (if needed)."
              ]
            },
            "09": {
              "status": "assigned",
              "pm_reply": [
                "Proceed with Build B sprite production in the specified folder conventions; no Build A dependency.",
                "Frame count guidance accepted; ensure pixel-crisp export (nearest-neighbor, no smoothing)."
              ],
              "asks": [
                "In Round 2, confirm whether any loader changes are required; if not, remain assets+docs only."
              ]
            },
            "11": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to wire deterministic WK2 QA gates once Agent 12 lands scenarios: add profiles into qa_smoke --quick and fail on contract-driven assertions.",
                "PM decision: P0 for inside-combat is 'no damage while inside'; treat 'no attack animation/events' as P1 if instrumentation exists."
              ],
              "asks": [
                "Define 'attack event' for QA as damage application first; add 'attack attempted while inside' counter only if easy and deterministic.",
                "Keep tests non-flaky; rely on deterministic scenario, not emergent sim."
              ]
            },
            "12": {
              "status": "assigned",
              "pm_reply": [
                "Proceed to implement deterministic scenarios in observe_sync: hero_stuck_repro (required) and inside_combat_repro (nice-to-have if time).",
                "Confirm prompt_set_id: use wk2_kickoff_r1_v1 (already fine if your log says wk2_prompts_v1)."
              ],
              "asks": [
                "Implement scenario setup that forces repeatable stalls (do not rely on emergent pathing randomness).",
                "Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks; then coordinate with Agent 11 to assert them in qa_smoke."
              ]
            },
            "04": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—determinism guidance is noted. You are consult-only for WK2; no further action unless pinged."
              ],
              "asks": []
            },
            "05": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—tuning defaults captured. You are consult-only for WK2; no further action unless pinged (we may ask for tuning review after repro harness exists)."
              ],
              "asks": []
            },
            "07": {
              "status": "stand_down_silent",
              "pm_reply": [
                "You were not on the active roster for WK2. Please stand down unless pinged for a specific scenario/content hook later."
              ],
              "asks": []
            },
            "10": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—perf gate suggestions captured. You are consult-only for WK2; no further action unless a perf regression appears."
              ],
              "asks": []
            },
            "13": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—release scaffolds are fine. You are consult-only for WK2; no further action until end-of-sprint when we draft/post Build A/B notes."
              ],
              "asks": []
            }
          },
          "pm_integration_order": [
            "Lock contracts and field names (Agent 3) — treat as API for WK2.",
            "Tools deterministic repro scenario (Agent 12) + QA assertions wiring (Agent 11).",
            "Combat gating (Agent 6) + stuck recovery (Agent 6) validated via scenario + qa_smoke.",
            "Anti-oscillation guardrails (Agent 6) validated via scenario + manual smoke.",
            "Debug-only stuck/inside UI reads (Agent 8) once fields exist; keep allocations low.",
            "Build A tag once qa_smoke --quick is green and 10-minute manual smoke in --no-llm and --provider mock passes.",
            "Build B: sprite asset drop (Agent 9) + animation readability pass + final QA."
          ],
          "pm_open_questions_resolved": [
            "Stuck/unstuck indicators are debug-only for Build A.",
            "Inside-combat QA asserts P0: no damage while inside; P1: no attack event/animation if instrumentation exists.",
            "Canonical prompt_set_id naming for WK2 rounds going forward."
          ]
        },
        "wk2_r2": {
          "round_meta": {
            "prompt_set_id": "wk2_exec_r2_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 2 execution: implement against locked contracts, wire deterministic repro + qa_smoke gates, and prepare Build A."
          },
          "pm_instruction": "WK2 Round 2 (wk2_r2): Execute. Only ACTIVE agents should respond. Implement against Agent 3 locked contracts and the acceptance thresholds in wk2_r1 pm_decisions. Provide evidence (commands + PASS) and keep changes deterministic/perf-safe. Consult-only agents do not respond unless pinged.",
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "Round 2: treat your wk2_r1 contract surface as LOCKED. Please review upcoming PRs for contract compliance + determinism pitfalls (sim-time only, no random.*, stable ordering). Also pick a single tunables location (constants module) that AI/QA can read without cycles and note it in your log."
            },
            "06": {
              "status": "requested",
              "message": "Round 2: implement Build A P0. Order: (1) inside-combat gating at authoritative attack/damage site using `hero.can_attack`/`is_inside_building` (no damage while inside), (2) stuck detection + deterministic recovery + counters per Agent 3 fields (sim-time), (3) anti-oscillation commitment window + hysteresis using locked thresholds. Evidence: `python tools/qa_smoke.py --quick` PASS + deterministic repro scenario run once Tools lands."
            },
            "08": {
              "status": "requested",
              "message": "Round 2: implement minimal debug-only UI reads: selected hero panel shows inside status and stuck snapshot (reason, attempts, time stuck) by reading Agent 3 contract fields (`get_stuck_snapshot`). Keep rate-limited and cache-friendly; no player-facing clutter. Ensure `python tools/qa_smoke.py --quick` stays PASS."
            },
            "09": {
              "status": "requested",
              "message": "Round 2: proceed with Build B prep (assets+docs only): confirm folder conventions match loader, create/extend docs for sprite pipeline, and begin producing frames for the 4 classes (idle/walk/attack/hurt/inside). No Build A dependencies."
            },
            "11": {
              "status": "requested",
              "message": "Round 2: after Agent 12 lands deterministic scenarios, wire them into `python tools/qa_smoke.py --quick` with non-flaky assertions. P0: inside-combat asserts no damage while inside. Stuck: assert >=1 stuck detection and >=1 recovery attempt OR bounded max stuck time in scenario. Keep oscillation checks optional/report-only until thresholds are proven stable."
            },
            "12": {
              "status": "requested",
              "message": "Round 2: implement deterministic scenarios in `tools/observe_sync.py`: required `--scenario hero_stuck_repro` (forces repeatable stall) and optional `--scenario inside_combat_repro` (hero inside with enemies). Emit compact counters: stuck_events, unstuck_attempts, inside_attack_blocks. Coordinate with Agent 11 to assert these in `qa_smoke --quick`."
            }
          },
          "pm_round2_results": {
            "high_level_status": "mostly_complete",
            "what_landed": [
              "Agent 06 implemented Build A P0: inside-combat damage gating via Hero.can_attack + CombatSystem hard gate; deterministic stuck detection/recovery; anti-oscillation commitment windows. Gates: qa_smoke PASS + boot smoke OK.",
              "Agent 08 implemented debug-only HUD visibility for inside state + stuck snapshot + attack blocked reason; added game_state.debug_ui gating and caching. Gate: qa_smoke PASS.",
              "Agent 03 added canonical tunables module `game/sim/hero_guardrails_tunables.py` for locked thresholds; qa_smoke PASS.",
              "Agent 12 added deterministic observe scenarios: hero_stuck_repro (required) and inside_combat_repro (optional), plus counters; qa_smoke PASS.",
              "Agent 09 completed Build B prep (docs + folder skeletons) and fixed a HUD init crash discovered during manual smoke; qa_smoke PASS."
            ],
            "still_pending_before_tagging_build_a": [
              "Agent 11 must wire Agent 12 scenarios into `python tools/qa_smoke.py --quick` with non-flaky assertions (hero_stuck_repro required).",
              "PM/human must complete the 10-minute interactive manual smoke in both modes: `python main.py --no-llm` and `python main.py --provider mock` (player-visible checks: no damage while inside, stuck recovery observed at least once in the repro, reduced oscillation)."
            ],
            "integration_risks": [
              "Potential merge conflict risk: `game/ui/hud.py` was modified by Agents 08 and 09 in wk2_r2; ensure Agent 09's HUD init crash fix is preserved when integrating Agent 08's debug UI additions.",
              "Drift risk: Agent 06 should import locked thresholds from `game.sim.hero_guardrails_tunables` (avoid duplicating constants)."
            ]
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Thanks—gate PASS evidence recorded and no vision disputes. We still need the interactive 10-minute manual smoke before tagging Build A."
              ],
              "asks": []
            },
            "03": {
              "status": "acknowledged",
              "pm_reply": [
                "Approved: `game/sim/hero_guardrails_tunables.py` is now the single source of truth for thresholds. Great call."
              ],
              "asks": [
                "Please sanity-review any final merges for contract compliance and ensure no cycles were introduced by the new tunables module."
              ]
            },
            "06": {
              "status": "in_review",
              "pm_reply": [
                "Excellent—core Build A P0 is implemented and gates are green.",
                "Please switch any hard-coded thresholds to import from `game.sim.hero_guardrails_tunables` so AI/QA/tools cannot drift."
              ],
              "asks": [
                "Run Agent 12's deterministic scenarios after integration and paste the counter lines into your log: `hero_stuck_repro` (required) and `inside_combat_repro` (optional)."
              ]
            },
            "08": {
              "status": "in_review",
              "pm_reply": [
                "Approved direction: debug-only visibility + caching + game_state.debug_ui gating.",
                "Important: coordinate merge with Agent 09 since both touched `game/ui/hud.py`."
              ],
              "asks": [
                "When integrating, ensure the HUD init crash fix from Agent 09 is preserved alongside your debug UI changes."
              ]
            },
            "09": {
              "status": "in_review",
              "pm_reply": [
                "Thanks—Build B pipeline prep is on track.",
                "Note: you fixed a HUD crash (helpful), but for process: please ensure any cross-domain fixes are clearly logged (which you did) and call out merge-risk if another agent touched the same file."
              ],
              "asks": [
                "When integrating with Agent 08 HUD work, double-check `hud.py` keeps your messages init fix."
              ]
            },
            "11": {
              "status": "action_required",
              "pm_reply": [
                "Agent 12 has now landed `hero_stuck_repro` and `inside_combat_repro`. Please wire `hero_stuck_repro` into `tools/qa_smoke.py --quick` as a failing profile with deterministic assertions."
              ],
              "asks": [
                "Update `tools/qa_smoke.py` to run the scenario and assert either (a) stuck_events>=1 AND unstuck_attempts>=1, or (b) bounded max_stuck_ms (per plan).",
                "Define the inside-combat P0 check as 'no damage while inside' (as previously locked).",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS after wiring."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Great—deterministic repro scenarios and counters are exactly what we needed.",
                "Thanks for keeping assertions conditioned to field presence to avoid flake during rollout."
              ],
              "asks": [
                "Please coordinate with Agent 11 on the exact counter names being asserted in qa_smoke (stuck_events, unstuck_attempts, max_stuck_ms, inside_attack_blocks)."
              ]
            }
          },
          "status": "in_review"
        },
        "wk2_r3": {
          "round_meta": {
            "prompt_set_id": "wk2_wrap_r3_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 3 is final sync + blockers only. Goal: close remaining automation gaps and declare Build A ready for human manual smoke + tag."
          },
          "pm_decisions": {
            "automation_status": [
              "Agent 11 has wired `hero_stuck_repro` into `python tools/qa_smoke.py --quick` (now a mandatory failing profile).",
              "Agent 06 has imported locked thresholds from `game.sim.hero_guardrails_tunables` (no duplicated constants).",
              "Agents 08+09 confirmed `game/ui/hud.py` integration preserves both the HUD init crash fix and debug-only stuck/inside indicators.",
              "Agent 12 confirmed the stable counter keys/format for scenario parsing."
            ],
            "build_a_readiness": "Automated gates are satisfied. Remaining gate is HUMAN interactive manual smoke (10 minutes) in both modes before tagging Build A."
          },
          "pm_wrapup_notes": [
            "Evidence (automated): `python tools/qa_smoke.py --quick` PASS including hero_stuck_repro profile.",
            "Evidence (deterministic repro): Agent 11 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=11 unstuck_attempts=31 inside_attack_blocks=0 max_stuck_ms=3483` during qa_smoke run.",
            "Evidence (AI repro run): Agent 06 observed `[scenario] counters: scenario=hero_stuck_repro stuck_events=25 unstuck_attempts=103 inside_attack_blocks=0 max_stuck_ms=19983` and `qa_smoke` PASS.",
            "Integration risk cleared: `game/ui/hud.py` contains both messages init crash fix + debug_ui gated indicators; qa_smoke PASS after merge."
          ],
          "pm_remaining_steps_for_human": [
            "Run 10-minute interactive manual smoke: `python main.py --no-llm`.",
            "Run 10-minute interactive manual smoke: `python main.py --provider mock`.",
            "Confirm player-visible checks: (1) heroes do not deal damage while inside buildings, (2) fewer freezes/unstuck feels reasonable, (3) reduced target thrash/oscillation, (4) debug panel (F1) shows stuck/attack-block info when applicable.",
            "If both manual runs look good: tag Build A and (optionally) ping Agent 13 to draft/post Build A notes."
          ],
          "pm_message_for_all_agents": "WK2 Build A automation is complete (qa_smoke includes hero_stuck_repro). Studio is now waiting on HUMAN manual smoke (10 minutes in --no-llm and provider=mock) before tagging Build A. All agents stand down unless you have a blocker/regression to report.",
          "status": "ready_for_manual_smoke"
        }
      }
    },
    "wk3-ui-polish-1080p-pixelart": {
      "sprint_meta": {
        "plan_ref": ".cursor/plans/wk3-ui-polish-1080p-pixelart_f37350f2.plan.md",
        "notes": "WK3 PM hub: ship borderless 1920x1080 default + Majesty-inspired UI skeleton (Build A), then pixel-art ingestion + attribution + validation (Build B)."
      },
      "rounds": {
        "wk3_r1": {
          "round_meta": {
            "prompt_set_id": "wk3_kickoff_r1_v1",
            "build_target": "BuildA_midweek+BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 1 is the async meeting stage: lock contracts (window + UI layout + asset conventions + attribution rules) before heavy implementation."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "02_GameDirector_ProductOwner",
                "03_TechnicalDirector_Architecture",
                "08_UX_UI_Director",
                "10_PerformanceStability_Lead",
                "11_QA_TestEngineering_Lead",
                "12_ToolsDevEx_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "consult_only_agents": [
                "09_ArtDirector_Pixel_Animation_VFX"
              ],
              "silent_agents": [
                "04_NetworkingDeterminism_Lead",
                "05_GameplaySystemsDesigner",
                "06_AIBehaviorDirector_LLM",
                "07_ContentScenarioDirector"
              ],
              "note": "Keep roster tight. Only Active agents should respond in wk3_r2 unless PM explicitly pings others."
            },
            "build_split": {
              "build_a_midweek": [
                "Default launch: borderless fullscreen 1920x1080 (fallback to display resolution if smaller)",
                "Majesty-inspired HUD layout skeleton (top bar / bottom command bar / right info panel / minimap region) with theme primitives",
                "No new external art dependency; sprite fallbacks remain OK",
                "Perf-safe widgets (cache surfaces; no per-frame allocations)"
              ],
              "build_b_endweek": [
                "Pixel-art ingestion for all currently shipped heroes/enemies/buildings (PNG override folders populated)",
                "Attribution compliance: assets/ATTRIBUTION.md + assets/third_party/<pack>/{LICENSE,README}.txt (verbatim)",
                "Asset validation tool (strict mode) + QA wiring; keep qa_smoke green"
              ]
            },
            "display_contract_locked": {
              "default_mode": "borderless fullscreen at 1920x1080",
              "fallback_mode": "if display smaller than 1920x1080, use display's current resolution (still borderless)",
              "owner": "Agent 03",
              "implementation_boundary": [
                "config.py owns defaults/toggles",
                "game/engine.py owns pygame.display.set_mode flags + fallback resolution selection"
              ]
            },
            "ui_scaling_contract_locked": {
              "design_reference": "1920x1080",
              "policy": [
                "Primary target is 1080p: pixel-crisp, no smoothing.",
                "If runtime resolution differs (fallback), compute layout using actual screen_w/screen_h; do NOT assume 1920x1080.",
                "Avoid fractional scaling of pixel art; if any scaling is needed, prefer integer-ish/rounded sizes and nearest-neighbor."
              ],
              "owner": "Agent 08 (final layout details), Agent 03 (window + any scale primitives)"
            },
            "asset_conventions_locked": {
              "heroes": "assets/sprites/heroes/<class>/{idle,walk,attack,hurt,inside}/frame_###.png",
              "enemies": "assets/sprites/enemies/<type>/{idle,walk,attack,hurt,dead}/frame_###.png",
              "buildings": "assets/sprites/buildings/<building_type>/{built,construction,damaged}/frame_###.png",
              "frame_naming": "frame_000.png ... (filename-sort order is playback order)",
              "note": "Do not change loader paths this sprint unless absolutely required; prefer matching existing loaders."
            },
            "attribution_contract_locked": {
              "rollup_file": "assets/ATTRIBUTION.md",
              "per_pack_dir": "assets/third_party/<pack_name>/",
              "required_verbatim_files": [
                "LICENSE*.txt",
                "README*.txt"
              ],
              "policy": "Strict attribution is a Build B gate; Build A may add scaffolding docs/tools but must not block UI work."
            },
            "qa_and_perf_gates_locked": {
              "always_on_gate": "python tools/qa_smoke.py --quick (must PASS)",
              "manual_smoke": [
                "python main.py --no-llm (10 min; verify window mode + UI readability)",
                "python main.py --provider mock (10 min; verify window mode + UI readability)"
              ],
              "perf_baseline_policy": "Record perf_wk3.csv baseline via tools/perf_benchmark.py; investigate >15% ms/tick increase on same machine/config (not a hard fail gate this sprint).",
              "asset_validation_policy": "Build A: report-only; Build B: strict/failing gate."
            }
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: your 1080p readability + ‘no clutter’ rules are the product acceptance lens for Build A.",
                "Decision: we are not attempting a full settings menu this sprint; focus on default behavior + clarity."
              ],
              "asks": [
                "In wk3_r2, please do an approval/cut pass on Agent 8’s concrete HUD layout and list any ‘must cut’ items if clutter risk appears."
              ]
            },
            "03": {
              "status": "assigned",
              "pm_reply": [
                "Greenlight: implement the borderless 1920x1080 default + smaller-display fallback as you described.",
                "Decision: keep changes localized to config/engine; no UI coupling."
              ],
              "asks": [
                "Expose the selected window size (screen_w/screen_h) to UI in a simple, non-cyclic way if not already available.",
                "Provide evidence: `python tools/qa_smoke.py --quick` PASS and a one-line startup log (optional) stating chosen window mode + resolution."
              ]
            },
            "08": {
              "status": "assigned",
              "pm_reply": [
                "Approved: your Majesty-inspired layout spec and minimal theme/widgets approach.",
                "Decision: Build A must be shippable without any new PNG assets; do not hardcode asset paths beyond existing contracts."
              ],
              "asks": [
                "Build A: implement HUD layout skeleton + theme primitives with caching (no per-frame surface churn).",
                "Answer the scaling question by following the locked policy: compute layout from actual screen_w/screen_h; keep pixel-crisp; avoid fractional scaling."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Accepted: perf guardrails and baseline approach (perf_wk3.csv + >15% investigate threshold)."
              ],
              "asks": [
                "In wk3_r2, record a baseline perf_wk3.csv and call out any obvious new allocation hotspots introduced by UI work."
              ]
            },
            "11": {
              "status": "assigned",
              "pm_reply": [
                "Accepted: keep fullscreen verification as human smoke (platform-dependent).",
                "Decision: do not add flaky automated fullscreen asserts to qa_smoke; focus on no-crash + tool validation for Build B."
              ],
              "asks": [
                "In wk3_r2, add/refresh a short manual smoke checklist for borderless 1080p + UI readability (Windows).",
                "Coordinate with Agent 12 on validator wiring: report-only in Build A, strict in Build B."
              ]
            },
            "12": {
              "status": "assigned",
              "pm_reply": [
                "Decision: asset validation is report-only for Build A; strict/failing gate for Build B (recommended).",
                "Approved: optional manifest/allowlist approach to avoid guessing entity types."
              ],
              "asks": [
                "In wk3_r2, implement `tools/validate_assets.py` (or similar) + initial manifest and keep it fast (no image decoding/scaling).",
                "Provide output examples for --report and exit codes for --strict/--check-attribution."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Approved: create attribution standard doc + patch-notes template section for Credits/Attribution.",
                "Decision: keep release notes precise: we will not claim ‘pixel art for everything’ unless validator passes and QA confirms coverage."
              ],
              "asks": [
                "In wk3_r2, add docs-only scaffolds: attribution standard + WK3 Build A/B patch notes drafts (with Credits section placeholders)."
              ]
            },
            "09": {
              "status": "stand_down_consult_only",
              "pm_reply": [
                "Thanks—style direction is accepted. You are consult-only for wk3_r2; no response needed unless pinged.",
                "We may ask you in wk3_r3 to shortlist 1–2 CC0/open-license packs per category (heroes/enemies/buildings/UI) with cohesion notes."
              ],
              "asks": []
            }
          },
          "pm_integration_order": [
            "Agent 03 lands borderless 1920x1080 default + fallback in config/engine; keep qa_smoke green.",
            "Agent 08 lands UI skeleton + theme/widgets with caching; keep changes incremental and shippable without new art.",
            "Agent 10 records perf_wk3 baseline and flags any new per-frame allocations.",
            "Agents 12+11 land asset validator in report-only mode (no failing gate) + document Build B strict gate plan.",
            "Agent 13 lands attribution standard + patch-note scaffolds."
          ],
          "pm_open_questions_resolved": [
            "Asset validator strictness: Build A report-only, Build B strict/failing gate.",
            "UI scaling policy: 1080p-first; compute layout from actual screen size; keep pixel-crisp; avoid fractional scaling."
          ]
        },
        "wk3_r2": {
          "round_meta": {
            "prompt_set_id": "wk3_exec_r2_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 2 is execution (Build A). Only ACTIVE agents should respond."
          },
          "pm_instruction": "WK3 Round 2 (wk3_r2): Execute Build A. Implement borderless 1920x1080 default + fallback, and the Majesty-inspired UI skeleton/theme, keeping perf safe and `python tools/qa_smoke.py --quick` PASS. Asset validation should be report-only (no failing gate yet). Only ACTIVE agents respond; consult-only agents stand down unless pinged.",
          "pm_messages_to_agents": {
            "02": {
              "status": "requested",
              "message": "Round 2: do an approval/cut pass on Agent 8’s HUD layout implementation once it’s posted/landed. Call out any clutter risks; prioritize readability at 1080p and ‘key info always visible’ (gold/time/alerts) without covering the playfield."
            },
            "03": {
              "status": "requested",
              "message": "Round 2: implement borderless fullscreen default 1920x1080 with fallback to display resolution if smaller. Keep changes localized to config/engine. If feasible, expose chosen screen_w/screen_h to UI (game_state) without cycles. Evidence: `python tools/qa_smoke.py --quick` PASS."
            },
            "08": {
              "status": "requested",
              "message": "Round 2: implement Build A UI skeleton: top bar + bottom command bar + right info panel + minimap region, plus minimal `theme.py` + `widgets.py` primitives. Keep it incremental (don’t refactor everything at once), cache surfaces/text to avoid per-frame churn, and compute layout from actual screen_w/screen_h (no hardcoded 1920x1080 assumptions). Evidence: `python tools/qa_smoke.py --quick` PASS."
            },
            "10": {
              "status": "requested",
              "message": "Round 2: record a baseline perf run (perf_wk3.csv) and review any UI PRs for per-frame allocations. Flag any hotspots early. Keep changes minimal and coordination-safe."
            },
            "11": {
              "status": "requested",
              "message": "Round 2: keep qa_smoke green. Add/refresh a short Windows manual smoke checklist for borderless 1080p + UI readability. Coordinate with Agent 12: validator is report-only in Build A and strict in Build B (do not add flaky fullscreen asserts)."
            },
            "12": {
              "status": "requested",
              "message": "Round 2: implement `tools/validate_assets.py` (or similar) + initial manifest/allowlist. It must be fast (no image decoding/scaling). Provide `--report` output example and `--strict`/`--check-attribution` exit behavior. Do NOT block Build A; wire as report-only if integrated."
            },
            "13": {
              "status": "requested",
              "message": "Round 2: docs-only scaffolding: attribution standard doc + patch-notes template Credits section + WK3 Build A/B patch note draft files. Keep claims precise and gated by validator/QA later."
            }
          },
          "pm_round2_results": {
            "high_level_status": "mostly_complete_with_one_blocker",
            "what_landed": [
              "Agent 08 shipped Build A UI skeleton + minimal UI framework (`game/ui/theme.py`, `game/ui/widgets.py`) and refactored `game/ui/hud.py` to compute layout from actual surface size; qa_smoke PASS.",
              "Display mode work appears landed in code: `config.py` sets WINDOW_WIDTH/HEIGHT=1920/1080 + DEFAULT_BORDERLESS=True, and `game/engine.py` selects desired window size with fallback to display resolution and uses NOFRAME for borderless (skips in SDL dummy); qa_smoke PASS.",
              "Agent 12 shipped report-only asset validator tooling: `tools/validate_assets.py` + `tools/assets_manifest.json`; qa_smoke PASS.",
              "Agent 11 added Windows manual smoke checklist: `docs/sprint/wk3_acceptance_checklist.md`; qa_smoke PASS.",
              "Agent 10 recorded perf baseline to local perf_wk3.csv and flagged legacy per-frame Surface allocations in `game/ui/building_panel.py` and `game/ui/debug_panel.py`.",
              "Agent 13 shipped docs scaffolding: attribution standard + patch notes templates/drafts for WK3 Build A/B."
            ],
            "still_pending_before_calling_build_a_ready": [
              "HUMAN manual smoke (required): `python main.py --no-llm` and `python main.py --provider mock` for ~10 minutes each, verifying borderless behavior and UI readability.",
              "P0 tech blocker: ensure render/camera/scaling paths do not assume WINDOW_WIDTH/WINDOW_HEIGHT when window resolution differs due to fallback. (Engine currently sets `self.window_width/height`, but many downstream uses still reference constants; this can break smaller-display fallback.)",
              "Audit trail gap: Agent 03 did not log a wk3_r2 entry even though display-mode code appears landed. We need a retro-log for traceability."
            ],
            "integration_risks": [
              "Fallback resolution risk: `pygame.transform.scale(..., (WINDOW_WIDTH, WINDOW_HEIGHT), self._scaled_surface)` and camera edge logic may mismatch the actual window size when fallback < 1920x1080. Must use `self.window_width/self.window_height` (or derive from `self.screen.get_width/height`) consistently.",
              "Perf risk: legacy `building_panel.py` and `debug_panel.py` allocate surfaces per render; keep behind debug toggles or schedule a caching pass if they remain frequently visible."
            ]
          },
          "pm_responses_by_agent": {
            "02": {
              "status": "acknowledged",
              "pm_reply": [
                "Thanks—your cut guidance is accepted. Good call that we should avoid always-on clutter and keep full control legends behind F3."
              ],
              "asks": [
                "In wk3_r3, please sanity-check the completed UI skeleton at 1920x1080 and confirm it meets readability rules (no overlap/clipping; right panel not too wide)."
              ]
            },
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Great—UI skeleton + theme/widgets landed with caching and screen-size-derived layout; that matches Build A goals."
              ],
              "asks": [
                "In wk3_r3, do a quick pass to ensure the new HUD doesn’t accidentally force legacy panels to stay visible (building/debug panels) and that layout remains usable if window size changes."
              ]
            },
            "10": {
              "status": "acknowledged",
              "pm_reply": [
                "Perf baseline recorded; hotspot notes accepted."
              ],
              "asks": [
                "After Agent 03 fixes any fallback sizing issues (wk3_r3), rerun perf_benchmark and compare to baseline (investigate >15% increases)."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Checklist addition is correct; keep fullscreen verification human-run as planned."
              ],
              "asks": [
                "In wk3_r3, add one line to the checklist to also validate behavior on a smaller-than-1080 display if available (or at least verify window size mismatch does not crash).",
                "Coordinate with Agent 12 on whether to mention `python tools/validate_assets.py --report` as optional Build A informational command."
              ]
            },
            "12": {
              "status": "acknowledged",
              "pm_reply": [
                "Validator shipped as requested (fast + report-only). Good job keeping it non-blocking."
              ],
              "asks": [
                "In wk3_r3, coordinate with Agent 11 to optionally call `python tools/validate_assets.py --report` in Build A workflow (non-failing).",
                "Prepare a severity-tightening plan for Build B strict mode (which findings become ERROR vs WARN once assets land)."
              ]
            },
            "13": {
              "status": "acknowledged",
              "pm_reply": [
                "Docs scaffolding is landed; keep claims gated by validator+QA."
              ],
              "asks": [
                "In wk3_r3, stand by for pack list so you can convert it into Credits bullets; no further action unless pinged."
              ]
            }
          },
          "status": "action_required"
        },
        "wk3_r3": {
          "round_meta": {
            "prompt_set_id": "wk3_wrap_and_buildb_kick_r3_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Round 3: close remaining Build A blockers and (if clear) kickoff Build B asset ingestion + strict validation."
          },
          "pm_instruction": "WK3 Round 3 (wk3_r3): Blockers-only. Primary goal is to make borderless fallback safe (no WINDOW_WIDTH/HEIGHT assumptions when window differs), keep `python tools/qa_smoke.py --quick` PASS, and declare Build A ready for human manual smoke + tag. If Build A is cleared early, we’ll immediately kickoff Build B prep (pack shortlist + strict validator severity plan + attribution wiring).",
          "pm_messages_to_agents": {
            "03": {
              "status": "requested",
              "message": "P0 blocker fix: ensure engine/render/camera/scaling uses the actual window size when fallback < 1920x1080. Today the window is created with `self.window_width/height`, but many downstream computations still use WINDOW_WIDTH/WINDOW_HEIGHT. Fix minimally: derive `screen_w/screen_h` from `self.window_width/height` (or `self.screen.get_width/height`) and use it consistently for camera center, edge-scroll boundaries, view scaling, and `pygame.transform.scale` destinations. Keep determinism unchanged. Evidence: `python tools/qa_smoke.py --quick` PASS. Also retro-log a wk3_r2 entry summarizing your earlier display-mode changes (audit trail)."
            },
            "11": {
              "status": "requested",
              "message": "Update docs checklist (small): add a note to validate that window-size mismatch (smaller-than-1080 display) does not crash or clip UI catastrophically. Optionally add `python tools/validate_assets.py --report` as a non-blocking informational command for Build A. Keep qa_smoke PASS."
            },
            "02": {
              "status": "requested",
              "message": "Quick signoff: once Agent 03 lands fallback-safe sizing, review UI readability at 1920x1080 and confirm no overlap/clipping + right panel not too wide. If anything is too cluttered, list the top 1–2 cuts (Build A only)."
            },
            "08": {
              "status": "requested",
              "message": "Sanity pass after Agent 03 sizing fix: ensure HUD layout remains correct (derived from surface size), and confirm no legacy panels are forced always-on. Keep caching intact; qa_smoke must remain PASS."
            },
            "12": {
              "status": "requested",
              "message": "Build B prep (no asset ingestion yet unless cleared): propose severity-tightening for strict mode (what becomes ERROR once we add packs) and coordinate with Agent 11 on wiring `validate_assets.py` into QA (Build A report-only, Build B strict)."
            },
            "09": {
              "status": "requested",
              "message": "Build B kickoff prep: shortlist 1–2 CC0/open-license packs per category (heroes/enemies/buildings, optional UI icons) with cohesion notes (outline thickness, palette/ramp). Keep it minimal and curated (avoid repo bloat). Do not commit assets yet in this round—just shortlist + rationale + any normalization steps."
            },
            "13": {
              "status": "requested",
              "message": "Stand by for Build B: once Agent 09/12 select packs, convert the pack list into exact Credits bullets format (assets/ATTRIBUTION.md + per-pack third_party folder expectations). No new claims until validator+QA confirm coverage."
            }
          },
          "pm_round3_results": {
            "high_level_status": "blocker_resolved_build_a_ready_for_human_smoke",
            "what_landed": [
              "Agent 03 removed remaining WINDOW_WIDTH/WINDOW_HEIGHT assumptions from camera + render scaling paths and exposed `screen_w/screen_h` in game_state; `python tools/qa_smoke.py --quick` PASS.",
              "Agent 11 updated `docs/sprint/wk3_acceptance_checklist.md` to explicitly validate smaller-than-1080 fallback safety and added optional `python tools/validate_assets.py --report` (non-blocking); `qa_smoke` PASS.",
              "Agent 12 proposed Build B strict-mode severity policy for `tools/validate_assets.py` and confirmed `qa_smoke` PASS.",
              "Agent 09 delivered Build B pack shortlist (Kenney primary; LPC fallback) and confirmed `qa_smoke` PASS.",
              "Agent 13 is standing by to convert the final pack list into Credits/Attribution bullets; `qa_smoke` PASS."
            ],
            "build_a_readiness": "Automation gates are green and the fallback-resolution blocker is resolved in code. However, a new P0 crash was found during manual smoke boot: UITheme dataclass slots prevent setting font_* attributes in __post_init__. Build A is NOT smokeable until WK3-BUG-001 is fixed.",
            "required_human_steps": [
              "Manual smoke 10 min: `python main.py --no-llm` — verify borderless behavior and UI readability at actual runtime resolution; confirm no catastrophic clipping/crash if display <1080p.",
              "Manual smoke 10 min: `python main.py --provider mock` — same checks.",
              "Optional informational: `python tools/validate_assets.py --report` (should exit 0 and report missing sprite folders/states as WARNs)."
            ],
            "build_b_go_no_go": "GO for Build B kickoff planning now (pack/license verification + strict validator policy), but do not claim ‘pixel art for everything’ until validator+QA confirm coverage."
          },
          "pm_decisions": {
            "build_a_status": "blocked_on_WK3-BUG-001",
            "build_b_validator_strict_policy": {
              "ATTRIBUTION_md": "ERROR (required) once any third_party packs are added",
              "third_party_LICENSE": "ERROR when pack dir exists",
              "third_party_README": "WARN (upgrade to ERROR if we find license requires it)",
              "missing_required_state_frames": "ERROR in strict mode for Build B"
            },
            "pack_selection_policy": "Prefer single-source cohesion. Start with a minimal curated subset; avoid importing entire packs."
          },
          "pm_bug_tickets": [
            {
              "id": "WK3-BUG-001",
              "title": "Boot crash: UITheme dataclass(slots=True) cannot set font_* attributes in __post_init__",
              "severity": "blocker",
              "build_target": "BuildA",
              "owner_agent": "08_UX_UI_Director",
              "reporter": "human_manual_smoke",
              "repro_steps": [
                "Run: python main.py (or python main.py --no-llm / --provider mock)",
                "Observe crash during GameEngine init when HUD creates UITheme"
              ],
              "expected": "Game boots successfully; UITheme initializes fonts safely.",
              "actual": "Crash: AttributeError: 'UITheme' object has no attribute 'font_title' and no __dict__ for setting new attributes",
              "evidence": [
                "Trace points to game/ui/theme.py: UITheme.__post_init__ assigning self.font_title/body/small on a slots dataclass without declaring those fields."
              ],
              "suspected_area": [
                "game/ui/theme.py (UITheme dataclass)",
                "game/ui/hud.py (constructs UITheme in HUD.__init__)"
              ],
              "constraints": [
                "Keep behavior deterministic and perf-safe.",
                "Prefer keeping slots=True; declare font fields properly (init=False) rather than removing slots unless necessary."
              ],
              "proposed_fix": [
                "In UITheme dataclass, add fields: font_title/font_body/font_small (e.g., pygame.font.Font | None) with init=False default=None, then assign in __post_init__.",
                "Alternative: remove slots=True (less preferred)."
              ],
              "acceptance_test": [
                "python main.py --no-llm boots to a running window (no crash)",
                "python tools/qa_smoke.py --quick remains PASS"
              ],
              "status": "resolved",
              "resolution_summary": [
                "Agent 08 kept `@dataclass(slots=True)` and declared `font_title/font_body/font_small` as dataclass fields (init=False, default=None), then assigned them in `UITheme.__post_init__`.",
                "Boot verified in `--no-llm` and `--provider mock` and `python tools/qa_smoke.py --quick` PASS per Agent 08 log (wk3_r4)."
              ],
              "resolution_evidence": [
                "Agent 08 log: sprints[\"wk3-ui-polish-1080p-pixelart\"].rounds[\"wk3_r4\"]",
                "Code: game/ui/theme.py declares the font fields using dataclasses.field(...) and assigns in __post_init__."
              ]
            }
          ],
          "status": "ready_for_human_manual_smoke"
        },
        "wk3_r5": {
          "round_meta": {
            "prompt_set_id": "wk3_manageability_r5_v1",
            "build_target": "BuildA_midweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "UI manageability polish: Quit button + closeable panels + moved perf overlay. UI-only changes; keep qa_smoke green."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "08_UX_UI_Director",
                "11_QA_TestEngineering_Lead"
              ],
              "note": "Tight roster for a small UX polish pass."
            },
            "scope_locked": [
              "Quit button visible in HUD (top bar) and exits game reliably on click.",
              "Add X close buttons for: right info panel (hero/building selection), debug panel, perf overlay.",
              "Reposition perf overlay so it does not fight top bar/right panel.",
              "Perf-safe: no per-frame surface churn.",
              "No sim/determinism changes."
            ],
            "qa_gate": "python tools/qa_smoke.py --quick must PASS"
          },
          "pm_round5_results": {
            "high_level_status": "shipped",
            "what_landed": [
              "Agent 08 implemented Quit button, close (X) on right info panel + debug panel + perf overlay, and moved perf overlay to a less intrusive placement; also added caching to debug panel to remove per-frame surface allocs while visible.",
              "Engine click routing now prioritizes UI clicks before world selection: HUD returns actions (quit/close_selection), DebugPanel consumes clicks and has close X, perf overlay has close hitbox.",
              "Agent 11 updated `docs/sprint/wk3_acceptance_checklist.md` with UI manageability checks and confirmed `python tools/qa_smoke.py --quick` PASS."
            ],
            "evidence": [
              "Agent 08 log wk3_r5: qa_smoke PASS + headless click sanity markers (ui_quit_click_ok/ui_*_close_ok).",
              "Agent 11 log wk3_r5: qa_smoke PASS; checklist updated."
            ],
            "remaining_human_steps": [
              "Run the manual smoke checklist items (Quit + X close behaviors) in a real display run (Windows): `python main.py --no-llm` and `python main.py --provider mock`."
            ]
          },
          "pm_responses_by_agent": {
            "08": {
              "status": "acknowledged",
              "pm_reply": [
                "Shipped as requested. Great job keeping it UI-only and perf-safe (debug panel caching was a nice win)."
              ],
              "asks": [
                "No further action unless a UX issue appears during manual smoke (e.g., quit misclicks → consider confirm dialog later)."
              ]
            },
            "11": {
              "status": "acknowledged",
              "pm_reply": [
                "Checklist updates accepted. Keep click behaviors manual-verified; avoid flaky headless assertions beyond what’s already in place."
              ],
              "asks": [
                "No further action unless Build B validator wiring changes are ready."
              ]
            }
          },
          "status": "complete"
        },
        "wk3_r6": {
          "round_meta": {
            "prompt_set_id": "wk3_buildB_kickoff_r6_v1",
            "build_target": "BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Build B kickoff: lock pack family + mapping, tighten validator strict policy, add attribution scaffolding + QA gate plan. No asset import expected in this kickoff round."
          },
          "pm_decisions": {
            "roster": {
              "active_agents": [
                "09_ArtDirector_Pixel_Animation_VFX",
                "12_ToolsDevEx_Lead",
                "11_QA_TestEngineering_Lead",
                "13_SteamRelease_Ops_Marketing"
              ],
              "note": "Build B kickoff is tooling/QA/Ops-led with Art providing pack+mapping. Keep roster tight; no sim/determinism changes."
            },
            "scope_locked": [
              "Primary pack family preference: Kenney (single-source cohesion).",
              "Curate subsets only (avoid importing whole packs).",
              "Do not change loader paths; use existing override folders under assets/sprites/.",
              "Build A remains report-only for assets; Build B adds failing gate via validate_assets strict + attribution checks."
            ],
            "buildb_required_gates": [
              "python tools/qa_smoke.py --quick (PASS)",
              "python tools/validate_assets.py --strict --check-attribution (PASS once assets land)"
            ]
          },
          "pm_round6_results": {
            "high_level_status": "prep_complete_no_assets",
            "what_landed": [
              "Agent 12 implemented strict enforcement in `tools/validate_assets.py` (missing kind/state frames become ERROR in strict; attribution requirements enforced when third_party packs exist).",
              "Agent 11 documented Build B gate plan in `docs/sprint/wk3_acceptance_checklist.md` (qa_smoke baseline + strict validate_assets gate).",
              "Agent 13 added attribution scaffolding: `assets/ATTRIBUTION.md` (rollup template + Steam credits bullet format) and `assets/third_party/README.md` (required per-pack license/provenance layout).",
              "Agent 09 locked a pack-family plan (Kenney primary; LPC minimal fallback) and provided a mapping table for shipped heroes/enemies/buildings with placeholder rules (1 frame per required action/state OK initially)."
            ],
            "verification_notes": [
              "Repo currently contains `.gitkeep` placeholders under assets/sprites/ but no `frame_###.png` files yet; Build B art ingestion has NOT happened in wk3_r6 (as expected for kickoff)."
            ],
            "evidence": [
              "Agent 12 log wk3_r6: validate_assets strict policy implemented; qa_smoke PASS; validate_assets --report PASS.",
              "Agent 11 log wk3_r6: checklist updated; qa_smoke PASS.",
              "Agent 13 log wk3_r6: attribution scaffolding committed; qa_smoke PASS.",
              "Agent 09 log wk3_r6: mapping plan + pack-family lock; qa_smoke PASS."
            ],
            "blockers_to_buildb_claims": [
              "Cannot claim 'pixel art replaces shapes for all entities' until curated PNGs are imported AND `python tools/validate_assets.py --strict --check-attribution` PASS is demonstrated."
            ]
          },
          "pm_next_round_plan": {
            "round_id": "wk3_r7",
            "goal": "Actual asset ingestion: import curated Kenney subset into override folders + fill ATTRIBUTION + per-pack LICENSE files, then make strict validator PASS.",
            "success_criteria": [
              "At least one `frame_000.png` exists for every required hero class action folder.",
              "At least one `frame_000.png` exists for every required enemy type action folder.",
              "At least one `frame_000.png` exists for every required building type state folder.",
              "If any `assets/third_party/<pack>/` exists: `assets/ATTRIBUTION.md` is fully populated AND each pack dir contains `LICENSE*.txt` (verbatim) and a `README*.txt` (verbatim or provenance note).",
              "Gates: `python tools/qa_smoke.py --quick` PASS and `python tools/validate_assets.py --strict --check-attribution` PASS."
            ]
          },
          "status": "ready_for_wk3_r7_asset_ingest"
        },
        "wk3_r7": {
          "round_meta": {
            "prompt_set_id": "wk3_buildB_exec_r7_v1",
            "build_target": "BuildB_endweek",
            "pm_authored_at_local": "2025-12-21T00:00:00",
            "notes": "Build B execution: land real PNG sprites + attribution and make strict validator PASS."
          },
          "pm_round7_results": {
            "high_level_status": "shipped_buildb_gate_green",
            "what_landed": [
              "PNG sprite coverage is now present across the override folders (at least frame_000.png per required hero/enemy/building state).",
              "Attribution scaffolding exists and passes strict checks: assets/ATTRIBUTION.md populated; assets/third_party/<pack> contains LICENSE*.txt and README*.txt.",
              "Tooling/QA gates are now green on the current repo state."
            ],
            "important_note": [
              "The first landed sprites are a CC0 'kingdomsim_cc0_placeholders' set generated in-repo to unblock the pipeline end-to-end. Kenney CC0 is scaffolded and attributed, but curated Kenney-derived PNG replacements may still be desired for final art direction."
            ],
            "evidence": [
              "Local run (repo root): `python tools/validate_assets.py --strict --check-attribution --report` => OK: no findings (errors=0 warns=0).",
              "Local run (repo root): `python tools/qa_smoke.py --quick` => PASS (see agent-tools output log: 3fa31bc4-9070-4c25-aa57-9ab1ceeb505d.txt).",
              "Repo contains frame PNGs (examples): assets/sprites/heroes/*/*/frame_000.png, assets/sprites/enemies/*/*/frame_000.png, assets/sprites/buildings/*/*/frame_000.png."
            ],
            "qa_timing_reconcile": [
              "Agent 11's wk3_r7 strict validator FAIL was a timing artifact (ran before PNGs landed). Current repo state is strict PASS as verified locally."
            ]
          },
          "pm_next_actions": {
            "option_A_tag_buildb_now": [
              "If you accept the CC0 placeholders as 'pixel imagery' for this build: run the manual smoke checklist, then bump version + update CHANGELOG/patch notes and tag/release Build B."
            ],
            "option_B_swap_to_kenney_then_tag": [
              "If you want the intended Kenney look before tagging: run one more Art/Ops round to replace placeholder frames with curated Kenney subset while keeping strict validator + qa_smoke green."
            ]
          },
          "status": "ready_for_human_choice_tag_vs_swap"
        }
      }
    }
  }
}

